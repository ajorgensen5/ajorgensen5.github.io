if (self.CavalryLogger) { CavalryLogger.start_js(["jybmd"]); }

__d("CommerceSelfServeUI",[],(function a(b,c,d,e,f,g){f.exports={MIN_SHIPPING_OPTIONS:1,MAX_SHIPPING_OPTIONS:5}}),null);
__d("CommerceUI",[],(function a(b,c,d,e,f,g){f.exports={MAX_ITEMS_BEFORE_LIMITED_STOCK_WARNING:9,MAX_VARIANTS:4}}),null);
__d("PagesManagerProductToolsConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_FEATURED_ITEM_COUNT:10}}),null);
__d("AudienceManagerEngagementVideoSelectionError.react",["cx","ix","CenteredContainer.react","Image.react","Link.react","React","SUIBusinessTheme","SUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m)}l.prototype.$AudienceManagerEngagementVideoSelectionError1=function(){if(!this.props.subtitleLabel)return null;return c("React").createElement(c("SUIText.react"),{display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme")},this.props.subtitleLabel)};l.prototype.$AudienceManagerEngagementVideoSelectionError2=function(){if(!this.props.actionLabel)return null;if(!this.props.onActionClick)return c("React").createElement(c("SUIText.react"),{display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme")},this.props.actionLabel);return c("React").createElement(c("Link.react"),{onClick:this.props.onActionClick},c("React").createElement("div",{display:"block"},this.props.actionLabel))};l.prototype.render=function(){return c("React").createElement(c("CenteredContainer.react"),{horizontal:true,vertical:true},c("React").createElement(c("Image.react"),{src:i("76143")}),c("React").createElement(c("SUIText.react"),{className:"_3-8x",display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme"),weight:"bold"},this.props.mainLabel),this.$AudienceManagerEngagementVideoSelectionError1(),this.$AudienceManagerEngagementVideoSelectionError2())};f.exports=l}),null);
__d("AdsNumberInput.react",["cx","fbt","AdsTextInput.react","React","intlNumUtils","joinClasses","mergeDeep"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={focused:false,formatError:false},this.$AdsNumberInput1=function(){this.setState({focused:false,formatError:false})}.bind(this),this.$AdsNumberInput2=function(s){var t=this.$AdsNumberInput5(s);if(t>=0)s=s.substring(0,t);var u=c("intlNumUtils").parseNumber(s);if(u!=null)this.props.onChange(u)}.bind(this),this.$AdsNumberInput3=function(){this.setState({focused:true})}.bind(this),this.$AdsNumberInput4=function(s){var t=this.$AdsNumberInput5(s),u=t>=0;this.setState({formatError:u})}.bind(this),this.$AdsNumberInput5=function(s){return s.search(/[^0-9\,\.\ ]/)},o}m.prototype.render=function(){__p&&__p();var n=this.props.errors||{};if(this.state.formatError)n=c("mergeDeep")(n,{NON_NUMERIC_INPUT:i._("This input can only contain numbers")});var o=this.props,p=o.value,q=babelHelpers.objectWithoutProperties(o,["value"]);if(p!=null)p=c("intlNumUtils").formatNumber(p);if(p&&!this.state.focused){var r=this.props.prefix||"",s=this.props.suffix||"";p=r+p+s}var t="_x62";return c("React").createElement(c("AdsTextInput.react"),babelHelpers["extends"]({},q,{className:c("joinClasses")(this.props.className,t),errors:n,value:p,onBlur:this.$AdsNumberInput1,onChange:this.$AdsNumberInput2,onFocus:this.$AdsNumberInput3,onImmediateChange:this.$AdsNumberInput4}))};m.propTypes={errors:l.object,prefix:l.string,suffix:l.string,value:l.number,onChange:l.func.isRequired};f.exports=m}),null);
__d("CommerceCurrencyInputUtils",["Currency"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=100,i={convertPEFormatToPBFormat:function j(k,l){var m=k;if(m){var n=c("Currency").getOffset(l);m=n>0?m*n/h:m}return m},convertPBFormatToPEFormat:function j(k,l){var m=k;if(m){var n=c("Currency").getOffset(l);m=n>0?m*h/n:m}return m}};f.exports=i}),null);
__d("CommerceErrorNotice.react",["React","XUINotice.react","XUIText.react"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){"use strict";__p&&__p();var l=this.props.error;if(!l)return c("React").createElement("span",null);var m=null;if(l.__html)m=c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block",dangerouslySetInnerHTML:l});else m=c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},l);var n=this.props,o=n.className,p=n.use,q=babelHelpers.objectWithoutProperties(n,["className","use"]);return c("React").createElement(c("XUINotice.react"),babelHelpers["extends"]({use:p||"warn",className:o},q),m)};function k(){"use strict";h.apply(this,arguments)}k.propTypes={error:j.oneOfType([j.string,j.object])};k.defaultProps={error:null};f.exports=k}),null);
__d("PageCommerceStripeRedirectConfirmationDialog.react",["cx","fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=500;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:false},this.show=function(){this.setState({dialogShown:true})}.bind(this),this.hide=function(){this.setState({dialogShown:false})}.bind(this),p}n.prototype.render=function(){if(!this.state.dialogShown)return null;return c("React").createElement(c("XUIDialog.react"),{width:m,onToggle:function(o){return this.setState({dialogShown:o})}.bind(this),shown:this.state.dialogShown},c("React").createElement(c("XUIDialogHeader.react"),null,c("React").createElement(c("XUIDialogHeaderTitle.react"),null,i._("You Have Pending Orders"))),c("React").createElement(c("XUIDialogBody.react"),{className:"_2ph_"},c("React").createElement(c("XUIText.react"),null,i._("Your shop has orders that haven't been shipped yet. If you connect to a different Stripe account, you'll no longer be able to receive payment for those orders. Consider completing and shipping your pending orders before changing the Stripe account for your shop."))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{label:i._("Change Stripe Account"),use:"default",onClick:this.props.onContinue}),c("React").createElement(c("XUIDialogButton.react"),{label:i._("Cancel"),use:"confirm",onClick:this.hide})))};n.propTypes={onContinue:l.func.isRequired};f.exports=n}),null);
__d("PaymentsTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BOF:"BOF",NMOR:"NMOR"})}),null);
__d("XCommerceSelfServeHasPendingOrdersQueryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/commerce/self-serve/has-pending-orders/",{page_id:{type:"Int",required:true}})}),null);
__d("XStripeOnboardingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/payment/stripeconnect/onboarding/",{page_id:{type:"Int",required:true},payment_type:{type:"Enum",required:true,enumType:1},business_onboarding_flow:{type:"Bool",defaultValue:false}})}),null);
__d("CommerceStripeConnectLink.react",["cx","AsyncRequest","DOM","DTSG","Link.react","PageCommerceStripeRedirectConfirmationDialog.react","React","ReactDOM","XStripeOnboardingController","XCommerceSelfServeHasPendingOrdersQueryController","XUIText.react","PaymentsTypeEnum"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$CommerceStripeConnectLink1=function(r){var s=c("XCommerceSelfServeHasPendingOrdersQueryController").getURIBuilder().setInt("page_id",this.props.pageID).getURI();new(c("AsyncRequest"))().setURI(s).setHandler(function(t){var u=t.payload.has_pending_orders;if(u){var v=c("ReactDOM").render(c("React").createElement(c("PageCommerceStripeRedirectConfirmationDialog.react"),{onContinue:function w(){return r()}}),c("DOM").create("div"));v.show()}else r()}).send()}.bind(this),n}l.prototype.render=function(){"use strict";var m=c("XStripeOnboardingController").getURIBuilder().setInt("page_id",this.props.pageID).setEnum("payment_type",c("PaymentsTypeEnum").BOF).getURI();return c("React").createElement("span",null,c("React").createElement("form",{className:"hidden_elem",action:m,method:"post",ref:"connectStripeForm",target:"_blank"},c("React").createElement("input",{type:"hidden",name:"fb_dtsg",value:c("DTSG").getToken()})),c("React").createElement(c("Link.react"),{onClick:this.$CommerceStripeConnectLink1.bind(this,function(){return this.refs.connectStripeForm.submit()}.bind(this))},c("React").createElement(c("XUIText.react"),{size:"meta1"},this.props.content)))};l.propTypes={confirmationURI:k.string,content:k.node.isRequired,pageID:k.string.isRequired};f.exports=l}),null);
__d("CommerceExceptionHandlerMixin.react",["fbt","AsyncRequest","CommerceErrorCode","CommerceErrorNotice.react","CommerceStripeConnectLink.react","React","XCommerceResponse"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={getInitialState:function j(){return{xResponse:null}},sendAsync:function j(k,l,m,n){new(c("AsyncRequest"))(k).setData(l||{}).setHandler(function(o){var p=new(c("XCommerceResponse"))(o.payload);this.setState({xResponse:p});if(!p.hasErrors())m&&m(o);else n&&n(o)}.bind(this)).setErrorHandler(function(o){this.setGeneralError(c("CommerceErrorCode").COMMERCE__GENERIC_EXCEPTION);n&&n(o)}.bind(this)).send()},setGeneralError:function j(k){var l=this.state.xResponse?this.state.xResponse:new(c("XCommerceResponse"))({});l.setGeneralError(k);this.setState({xResponse:l})},addFieldError:function j(k,l){var m=this.state.xResponse?this.state.xResponse:new(c("XCommerceResponse"))({});m.addFieldError(k,l);this.setState({xResponse:m})},_getFullErrorMessage:function j(k){if(!k)return null;if(k.code.toString()===c("CommerceErrorCode").COMMERCE__STRIPE_DEFERRED_ACCOUNT_EMAIL_USED.code.toString()){var l=h._("connect your shop with an existing account");return h._("A Stripe account with this email address already exists. Please use a different email address or {connect to a different Stripe account link}.",[h._param("connect to a different Stripe account link",c("React").createElement(c("CommerceStripeConnectLink.react"),{pageID:this.props.pageID,content:l}))])}return k.title+": "+k.message},hasErrors:function j(){return!!this.state.xResponse&&this.state.xResponse.hasErrors()},hasGeneralError:function j(){return!!this.state.xResponse&&this.state.xResponse.hasGeneralError()},hasFieldErrors:function j(){return!!this.state.xResponse&&this.state.xResponse.hasFieldErrors()},renderAllErrors:function j(){__p&&__p();var k=this.state.xResponse,l=[];if(this.hasFieldErrors()){var m=k.getFieldErrors();m.forEach(function(o){return l.push(o)})}if(this.hasGeneralError())l.push(k.getGeneralError());var n=l.map(function(o){return this._getFullErrorMessage(o)}.bind(this));return this.renderErrorMessages(n)},renderGeneralError:function j(){if(this.hasGeneralError())return this.renderErrorMessages([this.getGeneralErrorMessage()]);else return null},renderErrorMessages:function j(k){if(k.length===0)return null;else{var l=c("React").createElement("ul",null,k.map(function(m,n){return c("React").createElement("li",{key:n},m)}));return c("React").createElement(c("CommerceErrorNotice.react"),{error:l})}},getGeneralErrorMessage:function j(){if(this.hasGeneralError()){var k=this.state.xResponse.getGeneralError();return this._getFullErrorMessage(k)}else return null},getFieldErrorMessage:function j(k){if(!this.hasFieldErrors())return null;return this._getFullErrorMessage(this.state.xResponse.getFieldErrors()[k])}};f.exports=i}),null);
__d("BOFSellerLogger",["BanzaiLogger","Event"],(function a(b,c,d,e,f,g){"use strict";var h="BOFSellerLoggerConfig",i={log:function j(k,l,m){m.event=k;m.seller_profile_id=l;c("BanzaiLogger").log(h,m)},initClickListener:function j(k,l,m,n){c("Event").listen(k,"click",function(){return this.log(l,m,n)}.bind(this))}};f.exports=i}),null);
__d("ProductTaggingTranslations",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";var i={getAddProductTitle:function j(k){return k?h._("Add Product"):h._("New Product")},getAddProductSubtitle:function j(k){return k?h._("Tag and add to your shop."):h._("Tag a new product in your posts.")}};f.exports=i}),null);
__d("CommerceSelfServeProductTaxRatesTable.react",["ix","cx","fbt","invariant","xuiglyph","AdsNumberInput.react","CommerceUSAStates","Image.react","React","SUIAtlasTheme","SUICheckboxInput.react","SUITextInput.react","XUIButton.react","XUITable.react"],(function a(b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m,n,o=c("React").PropTypes;m=babelHelpers.inherits(p,c("React").Component);n=m&&m.prototype;function p(){__p&&__p();var q,r;"use strict";for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=n.constructor).call.apply(q,[this].concat(t)),this.state={newRateLocationError:false,newTaxRateLocation:"",newTaxRatePercentage:0,newIsAppliedToShipping:false,showNewRateRow:false},this.$CommerceSelfServeProductTaxRatesTable1=function(v,w){return c("React").createElement("tr",{key:"tax_rate_"+v},c("React").createElement("td",null,c("React").createElement("span",null,v)),c("React").createElement("td",null,c("React").createElement(c("AdsNumberInput.react"),{value:this.$CommerceSelfServeProductTaxRatesTable3(w.tax_rate,3),suffix:"%",className:"_2263",onChange:function(x){if(x!==null){x=this.$CommerceSelfServeProductTaxRatesTable4(x,3);this.$CommerceSelfServeProductTaxRatesTable5(v,x,w.is_applied_to_shipping)}}.bind(this)})),c("React").createElement("td",null,c("React").createElement(c("SUICheckboxInput.react"),{label:w.is_applied_to_shipping?j._("Yes"):j._("No"),onChange:function(x){this.$CommerceSelfServeProductTaxRatesTable5(v,w.tax_rate,x)}.bind(this),theme:c("SUIAtlasTheme"),value:w.is_applied_to_shipping})),c("React").createElement("td",{className:"_5rpt"},c("React").createElement(c("Image.react"),{className:"_ksy _3-9b",src:h("88982"),onClick:function(){this.$CommerceSelfServeProductTaxRatesTable6(v)}.bind(this)})))}.bind(this),this.$CommerceSelfServeProductTaxRatesTable2=function(){return c("React").createElement("tr",{key:"new_tax_rate_row"},c("React").createElement("td",null,c("React").createElement(c("SUITextInput.react"),{className:"_2263",onChange:function(v){this.setState({newTaxRateLocation:v.toUpperCase()})}.bind(this),theme:c("SUIAtlasTheme"),value:this.state.newTaxRateLocation})),c("React").createElement("td",null,c("React").createElement(c("AdsNumberInput.react"),{value:this.$CommerceSelfServeProductTaxRatesTable3(this.state.newTaxRatePercentage,3),suffix:"%",className:"_2263",onChange:function(v){if(v!==null){v=this.$CommerceSelfServeProductTaxRatesTable4(v,3);this.setState({newTaxRatePercentage:v})}}.bind(this)})),c("React").createElement("td",null,c("React").createElement(c("SUICheckboxInput.react"),{label:this.state.newIsAppliedToShipping?j._("Yes"):j._("No"),onChange:function(v){this.setState({newIsAppliedToShipping:v})}.bind(this),theme:c("SUIAtlasTheme"),value:this.state.newIsAppliedToShipping})),c("React").createElement("td",{className:"_5rpt"},c("React").createElement(c("XUIButton.react"),{label:j._("Confirm"),use:"confirm",disabled:!this.$CommerceSelfServeProductTaxRatesTable7(this.state.newTaxRateLocation),onClick:this.$CommerceSelfServeProductTaxRatesTable8})))}.bind(this),this.$CommerceSelfServeProductTaxRatesTable6=function(v){var w=this.$CommerceSelfServeProductTaxRatesTable9(v),x=this.props.taxRates;delete x[w][v];this.props.onChangeTaxRates(x)}.bind(this),this.$CommerceSelfServeProductTaxRatesTable5=function(v,w,x){var y=this.$CommerceSelfServeProductTaxRatesTable9(v),z=this.props.taxRates;z[y][v]={tax_rate:w,is_applied_to_shipping:x};this.props.onChangeTaxRates(z)}.bind(this),this.$CommerceSelfServeProductTaxRatesTable8=function(){var v=this.state.newTaxRateLocation;this.$CommerceSelfServeProductTaxRatesTable5(v,this.state.newTaxRatePercentage,this.state.newIsAppliedToShipping);this.setState({newTaxRatePercentage:0,newTaxRateLocation:"",newIsAppliedToShipping:false})}.bind(this),this.$CommerceSelfServeProductTaxRatesTable9=function(v){this.$CommerceSelfServeProductTaxRatesTable7(v)||k(0);if(this.$CommerceSelfServeProductTaxRatesTable10(v))return"zip_code";else return"state_abbr"}.bind(this),this.$CommerceSelfServeProductTaxRatesTable3=function(v,w){var x=Math.round(v*Math.pow(10,w+2));return x/Math.pow(10,w)},this.$CommerceSelfServeProductTaxRatesTable4=function(v,w){var x=Math.round(v*Math.pow(10,w));return x/Math.pow(10,w+2)},this.$CommerceSelfServeProductTaxRatesTable7=function(v){return this.$CommerceSelfServeProductTaxRatesTable10(v)||this.$CommerceSelfServeProductTaxRatesTable11(v)}.bind(this),this.$CommerceSelfServeProductTaxRatesTable10=function(v){var w=/^[0-9]{5}$/;return v.match(w)!==null},this.$CommerceSelfServeProductTaxRatesTable11=function(v){var w="STATE_";return w+v in c("CommerceUSAStates")},r}p.prototype.render=function(){"use strict";var q=[];for(var r in this.props.taxRates){var s=this.props.taxRates[r];for(var t in s)q[q.length]=this.$CommerceSelfServeProductTaxRatesTable1(t,s[t])}q[q.length]=this.$CommerceSelfServeProductTaxRatesTable2();return c("React").createElement("div",null,c("React").createElement(c("XUITable.react"),{outerBorder:true},c("React").createElement("thead",null,c("React").createElement("tr",null,c("React").createElement("th",null,j._("Location")),c("React").createElement("th",null,j._("Tax Rate")),c("React").createElement("th",null,j._("Apply tax to shipping cost?")),c("React").createElement("th",null))),c("React").createElement("tbody",null,q)))};p.propTypes={taxRates:o.object.isRequired,onChangeTaxRates:o.func.isRequired};f.exports=p}),null);
__d("BUIFormTypes",["React"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=h.oneOf(["svelt","breathy","snug","taut"]),j=h.oneOf(["normal","top"]),k=h.oneOf(["left","top"]);f.exports={DENSITY_PROP_TYPE:i,LABEL_ALIGN:j,LABEL_POSITION_PROP_TYPE:k}}),null);
__d("BUIForm.react",["cx","BUIComponent","BUIFormTypes","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("BUIFormTypes").DENSITY_PROP_TYPE,l=c("BUIFormTypes").LABEL_POSITION_PROP_TYPE;i=babelHelpers.inherits(m,c("BUIComponent"));j=i&&i.prototype;m.prototype.render=function(){var n=c("joinClasses")(this.props.className,"_550r",(this.props.density==="breathy"?"_550s":"")+(this.props.density==="snug"?" _550t":"")+(this.props.density==="svelt"?" _550u":"")+(this.props.density==="taut"?" _550v":"")+(this.props.labelPosition==="top"?" _550w":"")+(this.props.labelPosition==="left"?" _550y":"")+(this.props.labelPosition==="left"?" _3w5n":"")),o=c("React").Children.map(this.props.children,function(p){if(!p)return p;return c("React").cloneElement(p,{density:this.props.density,labelPosition:this.props.labelPosition})}.bind(this));return c("React").createElement("div",{className:n,"data-testid":this.props.testID},o)};function m(){i.apply(this,arguments)}m.propTypes={density:k,labelPosition:l};m.defaultProps={density:"svelt",labelPosition:"left"};f.exports=m}),null);
__d("BUIFormSelector.react",["invariant","BUIForm.react","React","XUISelector.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("XUISelector.react").Option;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.density,o=babelHelpers.objectWithoutProperties(m,["density"]),p=void 0;switch(n){case"breathy":case"svelt":p="xlarge";break;case"snug":p="large";break;case"taut":p="medium";break}return c("React").createElement(c("XUISelector.react"),babelHelpers["extends"]({},o,{size:p}))};function l(){i.apply(this,arguments)}l.propTypes=babelHelpers["extends"]({},c("XUISelector.react").propTypes,{density:c("BUIForm.react").propTypes.density});l.Option=k;f.exports=l}),null);
__d("CommerceSelfServeReturnPolicyOptions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RETURN_7_DAYS:7,RETURN_14_DAYS:14,RETURN_21_DAYS:21,RETURN_30_DAYS:30,RETURN_45_DAYS_DEPRECATED:45})}),null);
__d("ShopSettingsReturnPolicyModal.react",["cx","fbt","AlignmentEnum","CommerceSelfServeReturnPolicyOptions","FDSButton.react","FDSModalFooter.react","FDSModal.react","FDSModalHeader.react","FDSSection.react","LayerHideSources","Link.react","React","SUIBusinessThemeContainer.react","SUIText.react","SUITextInput.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("CommerceSelfServeReturnPolicyOptions").RETURN_14_DAYS,m="https://www.facebook.com/payments_terms/commerce_salespolicy",n=10,o=/\d+/;j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={errorMessage:null,value:this.getDefaultValue(this.props.defaultValue)},this.onHide=function(){this.props.onHide(c("LayerHideSources").LAYER_CANCEL_BUTTON)}.bind(this),this.onChange=function(v){__p&&__p();if(!v.match(o)){this.setState({errorMessage:i._("Please input a number"),value:v});return}var w=Number.parseInt(v,n);if(w<14){this.setState({errorMessage:i._("Return policy must be longer than 14 days"),value:v});return}this.setState({errorMessage:null,value:v})}.bind(this),this.onSave=function(){if(this.state.errorMessage)return;this.props.onSave(Number.parseInt(this.state.value,n))}.bind(this),r}p.prototype.getDefaultValue=function(q){return""+(q||l)};p.prototype.renderHeader=function(){return c("React").createElement(c("FDSModalHeader.react"),{title:i._("Return Policy")})};p.prototype.renderFooter=function(){return c("React").createElement(c("FDSModalFooter.react"),{primaryButton:c("React").createElement(c("FDSButton.react"),{label:i._("Save"),use:"primary",onClick:this.onSave}),secondaryButton:c("React").createElement(c("FDSButton.react"),{label:i._("Cancel"),onClick:this.onHide})})};p.prototype.render=function(){return c("React").createElement(c("FDSModal.react"),{footer:this.renderFooter(),header:this.renderHeader(),isShown:this.props.isShown,onHide:this.props.onHide},c("React").createElement(c("FDSSection.react"),null,c("React").createElement(c("SUIBusinessThemeContainer.react"),null,c("React").createElement("div",{className:"_31_h"},c("React").createElement("div",{className:"_31_i"},c("React").createElement(c("SUIText.react"),{display:"block",size:"body1",weight:"bold"},i._("Number of Business Days")),c("React").createElement(c("SUIText.react"),{color:"secondary",size:"meta1"},i._("Items must be returned to you within the time period you enter, calculated from the day your item is delivered to the customer. {Learn More link}.",[i._param("Learn More link",c("React").createElement(c("Link.react"),{href:m,target:"_blank"},i._("Learn more")))]))),c("React").createElement(c("SUITextInput.react"),{errorMessage:this.state.errorMessage,textAlign:c("AlignmentEnum").right,value:this.state.value,onChange:this.onChange})))))};f.exports=p}),null);
__d("PageProductComposerReturnPolicy.react",["cx","fbt","BUIFormSelector.react","CommerceSelfServeReturnPolicyOptions","Link.react","React","ShopSettingsReturnPolicyModal.react","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("BUIFormSelector.react").Option,m=-1,n="https://www.facebook.com/payments_terms/commerce_salespolicy",o=[c("CommerceSelfServeReturnPolicyOptions").RETURN_14_DAYS,c("CommerceSelfServeReturnPolicyOptions").RETURN_30_DAYS];j=babelHelpers.inherits(p,c("React").PureComponent);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={isDialogShown:false,returnPolicyTimeOptions:o},this.onChange=function(v){if(v.value===m){this.setState({isDialogShown:true});return}this.props.onReturnPolicyTimeChange(v)}.bind(this),this.onDialogHide=function(){this.setState({isDialogShown:false});this.props.onReturnPolicyTimeChange({value:this.props.selectedReturnPolicyTime})}.bind(this),this.onDialogSave=function(v){this.setState({isDialogShown:false});this.props.onReturnPolicyTimeChange({value:v})}.bind(this),r}p.getDerivedStateFromProps=function(q,r){var s=r.returnPolicyTimeOptions;if(!s.includes(q.selectedReturnPolicyTime))s.push(q.selectedReturnPolicyTime);return{returnPolicyTimeOptions:s}};p.prototype.render=function(){var q=this.state.returnPolicyTimeOptions.sort(function(s,t){return s-t}).map(function(s){return c("React").createElement(l,{key:s,value:s},i._("{Number of days} Business Days",[i._param("Number of days",s)]))});q.push(c("React").createElement(l,{key:m,value:m},i._("Create Custom")));var r=this.state.isDialogShown?c("React").createElement(c("ShopSettingsReturnPolicyModal.react"),{isShown:this.state.isDialogShown,onHide:this.onDialogHide,onSave:this.onDialogSave}):null;return c("React").createElement("div",{className:"_4qx _2pid"},c("React").createElement("div",{className:"_3-94"},c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"dark",size:"meta1",weight:"bold"},i._("Return Policy")),c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1"},i._("Items must be returned to you within the time period you choose below, calculated from the day your item is delivered to the customer. {Learn More link}.",[i._param("Learn More link",c("React").createElement(c("Link.react"),{href:n,target:"_blank"},i._("Learn more")))]))),c("React").createElement(c("BUIFormSelector.react"),{density:"snug",onChange:this.onChange,value:this.props.selectedReturnPolicyTime},q),r)};f.exports=p}),null);
__d("FBNumberInput.react",["Input","React","intlNumUtils","joinClasses","debounce"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=200,k=c("React").PropTypes;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){"use strict";__p&&__p();i.constructor.call(this);this.$FBNumberInput1=c("debounce")(function(m){var n=this.$FBNumberInput2(c("Input").getValue(m));if(n===this.$FBNumberInput3(n))this.props.onValueChange(n)}.bind(this),j);this.$FBNumberInput4=function(m){return this.props.formatNumber?c("intlNumUtils").formatNumberWithThousandDelimiters(m,0):""+m}.bind(this);this.$FBNumberInput2=function(m){var n=c("intlNumUtils").parseNumber(m);if(this.props.onlyIntegers)n=Math.trunc(n);return n}.bind(this);this.$FBNumberInput3=function(m){__p&&__p();if(m!==null){m=this.props.nonnegative?Math.abs(m):m;if(this.props.minValue!=null&&m<this.props.minValue)m=this.props.minValue;else if(this.props.maxValue!=null&&m>this.props.maxValue)m=this.props.maxValue}else if(this.props.defaultValue!=null)m=this.props.defaultValue;return m}.bind(this);this.$FBNumberInput5=function(event){this.setState({focused:false});var m=this.$FBNumberInput3(this.$FBNumberInput2(c("Input").getValue(event.target))),n=m!==null?this.$FBNumberInput4(m):"";c("Input").setValue(event.target,n);if(this.props.triggerCallbackOnChange)this.$FBNumberInput1.reset();this.props.onValueChange(m)}.bind(this);this.$FBNumberInput6=function(event){this.setState({focused:true})}.bind(this);this.$FBNumberInput7=function(event){this.$FBNumberInput1(event.target)}.bind(this);this.state={focused:false}}l.prototype.render=function(){"use strict";var m=this.props,n=m.value,o=m.className,p=babelHelpers.objectWithoutProperties(m,["value","className"]);if(n)n=this.$FBNumberInput4(n);return c("React").createElement("input",babelHelpers["extends"]({},p,{className:c("joinClasses")(o,"inputtext"),type:"text",defaultValue:n,value:this.state.focused?undefined:n,onBlur:this.$FBNumberInput5,onFocus:this.$FBNumberInput6,onChange:this.props.triggerCallbackOnChange?this.$FBNumberInput7:p.onChange}))};l.propTypes={nonnegative:k.bool,onValueChange:k.func.isRequired,value:k.number,defaultValue:k.number,minValue:k.number,maxValue:k.number,placeholder:k.string,formatNumber:k.bool,onlyIntegers:k.bool,triggerCallbackOnChange:k.bool};f.exports=l}),null);
__d("BUIFormButton.react",["invariant","BUIForm.react","React","XUIButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.density,n=babelHelpers.objectWithoutProperties(l,["density"]),o=void 0;switch(m){case"breathy":case"svelt":o="xlarge";break;case"snug":o="large";break;case"taut":o="medium";break}return c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({},n,{size:o}))};function k(){i.apply(this,arguments)}k.propTypes=babelHelpers["extends"]({},c("XUIButton.react").propTypes,{density:c("BUIForm.react").propTypes.density});f.exports=k}),null);
__d("TokenizerExampleSearchSource",["AbstractSearchSource","CountryCodeMap","SearchableEntry","filterObject","forEachObject"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;j.prototype.searchImpl=function(k,l,m){"use strict";__p&&__p();var n=[];m=m||{};if(k){var o=k.toLowerCase(),p=c("filterObject")(c("CountryCodeMap"),function(r){return r.toLowerCase().startsWith(o)}),q=0;c("forEachObject")(p,function(r,s){return n.push(new(c("SearchableEntry"))({order:q++,photo:"/images/mobile/glyph/book_blue_s.png",subtitle:r,title:r,uniqueID:s}))})}l(n,k)};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("FreeformSearchSource",["AbstractSearchSource","RegexMatchSearchSource","SearchableEntry","SearchSourceQueryStatus"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this);this.$FreeformSearchSource1=k;this.$FreeformSearchSource2=new(c("RegexMatchSearchSource"))("\\S+");this.$FreeformSearchSource3=l;this.$FreeformSearchSource4=m}j.prototype.getBootstrappedEntries=function(k){"use strict";return typeof this.$FreeformSearchSource1.getBootstrappedEntries==="function"?this.$FreeformSearchSource1.getBootstrappedEntries(k):null};j.prototype.bootstrapImpl=function(k){"use strict";this.$FreeformSearchSource1.bootstrapImpl(k)};j.prototype.validateQuery=function(k){"use strict";return k.length>=this.$FreeformSearchSource4};j.prototype.searchImpl=function(k,l,m){"use strict";__p&&__p();this.$FreeformSearchSource2.searchImpl(k,function(n,o){var p=[];if(n.length===1&&this.validateQuery(o)){p=[new(c("SearchableEntry"))({uniqueID:n[0].getUniqueID(),title:this.$FreeformSearchSource3(n[0].getTitle().trim())})];l(p,k)}this.$FreeformSearchSource1.searchImpl(k,function(n,o){if(n.length>0)l(n.concat(p),o,c("SearchSourceQueryStatus").COMPLETE)},m)}.bind(this),m)};f.exports=j}),null);
__d("AutoPager.react",["DOM","Event","OnVisible","Parent","React","ReactDOM","SubscriptionsHandler","throttle"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.getViewportListener=function(){if(!this.onEnterViewportListener)this.onEnterViewportListener=new(c("OnVisible"))(c("ReactDOM").findDOMNode(this),function(){return this.props.onVisible()}.bind(this),false,this.props.onEnterBuffer,false,this.scrollableArea);return this.onEnterViewportListener}.bind(this),this.onScroll=function(){this.getViewportListener().reset()}.bind(this),m}k.prototype.componentDidMount=function(){"use strict";if(this.props.scrollableAreaClass){this.scrollableArea=c("Parent").byClass(c("ReactDOM").findDOMNode(this),this.props.scrollableAreaClass);var l=c("DOM").find(this.scrollableArea,".uiScrollableAreaWrap")}else l=window;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(c("Event").listen(l,"scroll",c("throttle")(this.onScroll,100)))};k.prototype.componentWillUnmount=function(){"use strict";this.getViewportListener().remove();this.subscriptions.release()};k.prototype.render=function(){"use strict";return c("React").createElement("div",{className:this.props.className})};k.propTypes={className:j.string,onEnterBuffer:j.number.isRequired,onVisible:j.func.isRequired,scrollableAreaClass:j.string};f.exports=k}),null);
__d("FormatNumberUtil.atlas",["NumberFormatConfig","intlNumUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={_getDecimals:function i(j,k,l){__p&&__p();if(!k&&!l){var m=j.toString(),n=m.split(c("NumberFormatConfig").decimalSeparator);return n.length===2?n[1].length:0}if(j===0)return k;var o=Math.floor(j*Math.pow(10,l)),p=l,q=10;while(p>k&&o>1)if(o%q===0){q*=10;--p}else break;return p},formatWithVariablePrecision:function i(j,k,l,m){if(m)return c("intlNumUtils").formatNumberWithThousandDelimiters(j,h._getDecimals(j,k,l));return c("intlNumUtils").formatNumber(j,h._getDecimals(j,k,l))}};f.exports=h}),null);
__d("NumberInput.atlas",["FormatNumberUtil.atlas","Keys","NumberFormatConfig","React","SUIAtlasTheme","SUITextInput.react","ads-lib-formatters"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").Element,k=c("React").PureComponent,l={isZeroValidValue:false,maxPrecision:0,minPrecision:0};h=babelHelpers.inherits(m,k);i=h&&h.prototype;function m(n,o){__p&&__p();i.constructor.call(this,n,o);this.$NumberInput2=function(p){if(this.$NumberInput3(p)){this.setState({dirtyValue:p});var q=this.$NumberInput4(p);if(this.props.onValueUpdated)this.props.onValueUpdated(q)}}.bind(this);this.$NumberInput5=function(event){this.setState({dirtyValue:null});if(this.props.onBlur)this.props.onBlur(event)}.bind(this);this.$NumberInput6=function(event){this.setState({dirtyValue:null});if(this.props.onFocus)this.props.onFocus(event)}.bind(this);this.$NumberInput7=function(event){var p=event.keyCode;if(p===c("Keys").RETURN||p===c("Keys").TAB)this.setState({dirtyValue:null});if(this.props.onKeyUp)this.props.onKeyUp(event)}.bind(this);this.state={dirtyValue:null}}m.prototype.focusInput=function(){this.$NumberInput1&&this.$NumberInput1.focusInput()};m.prototype.$NumberInput3=function(n){var o=new RegExp("^[0-9.,]*$");return o.test(n)};m.prototype.$NumberInput4=function(n){return c("ads-lib-formatters").parseNumber(n)||0};m.prototype.render=function(){__p&&__p();var n=void 0,o=this.props.minPrecision;if(this.state.dirtyValue===null){n=this.props.value;if(!n)n=this.props.isZeroValidValue?0:null;n=n===null?"":c("FormatNumberUtil.atlas").formatWithVariablePrecision(n,o,this.props.maxPrecision,false).toString()}else n=this.state.dirtyValue;var p=Array(o+1).join("0"),q=o?"0"+c("NumberFormatConfig").decimalSeparator+p:"0";return c("React").createElement(c("SUITextInput.react"),{className:this.props.className,disabled:this.props.disabled,onBlur:this.$NumberInput5,onChange:this.$NumberInput2,onFocus:this.$NumberInput6,onKeyUp:this.$NumberInput7,placeholder:q,ref:function(r){return this.$NumberInput1=r}.bind(this),theme:c("SUIAtlasTheme"),value:n})};m.defaultProps=l;f.exports=m}),null);
__d("CurrencyInput.atlas",["cx","Currency","NumberInput.atlas","React","Text.atlas","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k,l,m=c("React").Element,n=c("React").PureComponent,o={isZeroValidValue:false},p=babelHelpers["extends"]({},o,{isZeroValidValue:false});i=babelHelpers.inherits(q,n);j=i&&i.prototype;function q(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=j.constructor).call.apply(s,[this].concat(v)),this.$CurrencyInputFormWrapper1=function(x){this.props.binding.update(x)}.bind(this),t}q.prototype.render=function(){return c("React").createElement(r,{className:this.props.className,currency:this.props.currency,isZeroValidValue:this.props.isZeroValidValue,maxPrecision:this.props.maxPrecision,minPrecision:this.props.minPrecision,onBlur:this.props.onBlur,onChange:this.$CurrencyInputFormWrapper1,onFocus:this.props.onFocus,onKeyUp:this.props.onKeyUp,value:this.props.binding.value})};q.defaultProps=p;k=babelHelpers.inherits(r,n);l=k&&k.prototype;function r(s,t){l.constructor.call(this,s,t);this.$CurrencyInput1=function(u){this.props.onChange&&this.props.onChange(u||0)}.bind(this);this.$CurrencyInput1=this.$CurrencyInput1.bind(this)}r.prototype.render=function(){__p&&__p();var s=this.props.value;if(!s)s=this.props.isZeroValidValue?0:null;var t=null,u=null;if(this.props.currency){var v=c("Currency").getSymbol(this.props.currency),w=v.length>1;t=c("React").createElement(c("Text.atlas"),{className:"_3mef"+(s===null?" _35ka":"")},v);u="_35kc"+(!w?" _4l4k":"")+(w?" _4l4l":"")}return c("React").createElement("div",{className:c("joinClasses")(this.props.className,u)},c("React").createElement(c("NumberInput.atlas"),{className:"_ty0",disabled:this.props.disabled,isZeroValidValue:this.props.isZeroValidValue,maxPrecision:this.props.maxPrecision,minPrecision:this.props.minPrecision,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onKeyUp:this.props.onKeyUp,onValueUpdated:this.$CurrencyInput1,value:s}),t)};r.defaultProps=o;r.FormWrapper=q;f.exports=r}),null);
__d("AsyncUploadQueue",["AsyncUploadBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AsyncUploadBase"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this._pending=[];this._waiting=[]}j.prototype.enqueue=function(k,l,m){"use strict";return this._add(this._waiting.push.bind(this._waiting),k,l,m)};j.prototype.prepend=function(k,l,m){"use strict";return this._add(this._waiting.unshift.bind(this._waiting),k,l,m)};j.prototype._add=function(k,l,m,n){"use strict";var o=babelHelpers["extends"]({},this._data,n),p=this._createFileUpload(l,m,o);k(p);this._processQueue();return p};j.prototype.dequeue=function(k){"use strict";this._abort(k)};f.exports=j}),null);
__d("Waiter",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$Waiter1=i;this.$Waiter2=0;this.$Waiter3=false}h.prototype.wait=function(i){"use strict";__p&&__p();var j=this,k=false;this.$Waiter4();return function(){if(k)return;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];i&&i.apply(this,m);j.$Waiter5();k=true}};h.prototype.go=function(){"use strict";this.$Waiter3=true;this.$Waiter6();return this};h.prototype.$Waiter4=function(){"use strict";this.$Waiter2++};h.prototype.$Waiter6=function(){"use strict";if(!this.$Waiter2&&this.$Waiter3)this.$Waiter1()};h.prototype.$Waiter5=function(){"use strict";this.$Waiter2--;this.$Waiter6()};f.exports=h}),null);
__d("ReactComposerBoostedPostLazyButton.react",["Bootloader","React","ReactDOM"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){"use strict";c("Bootloader").loadModules(["BoostedPostDialogButton.react"],function(k){c("ReactDOM").render(c("React").createElement(k,this.props),c("ReactDOM").findDOMNode(this.refs.boostButtonContainer))}.bind(this),"ReactComposerBoostedPostLazyButton.react")};j.prototype.render=function(){"use strict";return c("React").createElement("span",{ref:"boostButtonContainer"})};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("ReactTargetingTaggerStore.react",["ReactComposerStoreBase","ReactComposerTaggerActionType","ReactComposerTaggerType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactComposerStoreBase"));i=h&&h.prototype;function j(){"use strict";var k=void 0;i.constructor.call(this,function(){var l={};l[c("ReactComposerTaggerType").TARGETING]={};return{taggersData:l,taggersSource:{}}},function(l){if(l.type===c("ReactComposerTaggerActionType").SET_TAGGER_DATA)k&&k.$ReactTargetingTaggerStore1(l)});k=this}j.prototype.getTaggerData=function(k,l){"use strict";return this.getComposerData(k).taggersData[l]};j.prototype.$ReactTargetingTaggerStore1=function(k){"use strict";var l=this.getComposerData(k.composerID),m=Array.isArray(k.taggerData)?k.taggerData.slice():Object.assign({},k.taggerData);l.taggersData[k.taggerID]=m;this.emitChange(k.composerID)};f.exports=new j()}),null);
__d("XPagesGetTargetingMetadataController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/targeting/metadata/",{page_id:{type:"Int",required:true},target_spec:{type:"String",required:true}})}),null);
__d("ReactComposerTargetingUtils",["fbt","AsyncRequest","React","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactTargetingTaggerStore.react","XPagesGetTargetingMetadataController","XUIText.react","curry","intlList"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={fetchMetadata:function j(k,l,m){var n=c("XPagesGetTargetingMetadataController").getURIBuilder().setInt("page_id",l).setString("target_spec",JSON.stringify(k)).getURI();new(c("AsyncRequest"))().setURI(n).setHandler(c("curry")(this._onFetchMetadataHandler,m)).send()},_onFetchMetadataHandler:function j(k,l){var m=l.payload,n=m.sentences.map(function(o){return c("React").createElement("span",null,h._("{content_label} {children}",[h._param("content_label",c("React").createElement(c("XUIText.react"),{weight:"bold"},o.content)),h._param("children",c("intlList")(o.children,c("intlList").CONJUNCTIONS.OR))]))});k(JSON.parse(m.target_spec),c("React").createElement("span",null,c("intlList")(n,c("intlList").CONJUNCTIONS.NONE)),m.reach_estimate)},getDataFromComposerTaggerStore:function j(k){return c("ReactComposerTaggerStore").getTaggerData(k,c("ReactComposerTaggerType").TARGETING)},getDataFromTargetingTaggerStore:function j(k){return c("ReactTargetingTaggerStore.react").getTaggerData(k,c("ReactComposerTaggerType").TARGETING)},setData:function j(k,l){var m={},n=["targeting","gating","hints","targetingSentences","gatingSentences","reachEstimate","woodhengeInfo","woodhengeSentence"];n.map(function(o){if(l[o])m[o]=l[o]});c("ReactComposerTaggerActions").setTaggerDataWithoutLogging(k,c("ReactComposerTaggerType").TARGETING,m)}};f.exports=i}),null);
__d("WoodhengeAudienceType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ALL_SUPPORTERS:"ALL_SUPPORTERS"})}),null);
__d("PagesComposerAudiences.react",["cx","fbt","BanzaiODS","BootloadedComponent.react","JSResource","LayerFadeOnHide","Link.react","PageComposerAccessToken","React","ReactComposerContextTypes","ReactComposerTaggerStore","ReactComposerTargetingUtils","ReactTargetingTaggerStore.react","TargetingSpecStore","WebApiApplication","WoodhengeAudienceType","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogSaveButton.react","XUISpinner.react","XUIText.react","areEqual","gkx","idx","isEmpty"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("gkx")("AT4XL2t-wa00hmW-66Az9QaF0cGFY8DGGRpG9yabO_7-z46IsTWd_E-_OBbO4z-YheXhycgEn3xN9Bm4Cw7XJ_pNynrGtcF83Akhd1j-tKF_vQ"),k=c("React").PropTypes,l=587,m=c("React").createClass({displayName:"PagesComposerAudiences",contextTypes:c("ReactComposerContextTypes"),propTypes:{accessToken:k.string,allowExclusionsWithoutInclusions:k.bool,appID:k.string,callbackDataStatus:k.func,callbackSelectionStatus:k.func,canSeeCompleteList:k.bool,canSeeDemographicOptions:k.bool,feedTargetingShowReachGK:k.bool,hideFeedTargeting:k.bool,hideGating:k.bool,initialActiveKey:k.string,isLiveVideo:k.bool,onGatingChange:k.func,onSave:k.func.isRequired,onToggle:k.func.isRequired,rootElement:k.object,saveData:k.func,shouldHideLeftFooter:k.bool,shouldShowRestrictionTabNux:k.bool,shown:k.bool.isRequired,showWoodhengeGating:k.bool,useFromLegacyComposer:k.bool,useTargetingAsFilter:k.bool,woodhengeTiers:k.array},getStores:function n(){if(this.props.useFromLegacyComposer)return[c("ReactTargetingTaggerStore.react")];return[c("ReactComposerTaggerStore")]},getInitialState:function n(){return{fetching:false,targeting:this.getInitialSavedData("targeting"),gating:this.getInitialSavedData("gating"),hints:this.getInitialSavedData("hints"),targetingSentences:this.getInitialSavedData("targetingSentences"),gatingSentences:this.getInitialSavedData("gatingSentences"),reachEstimate:this.getInitialReachEstimate(),woodhengeInfo:this.getInitialSavedData("woodhengeInfo"),woodhengeSentence:this.getInitialSavedData("woodhengeSentence")}},UNSAFE_componentWillMount:function n(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(true);var o=this.props.appID||c("PageComposerAccessToken").getAppID(),p=this.props.accessToken||c("PageComposerAccessToken").getAccessToken();if(!!o&&!!p)c("WebApiApplication").init(p,o)},componentWillUnmount:function n(){if(this.props.callbackSelectionStatus)this.props.callbackSelectionStatus(false)},componentDidMount:function n(){c("BanzaiODS").bumpEntityKey("ui_audience_targeting","dialog_open")},_onSave:function n(){var o={};Object.assign(o,this.state);if(!c("isEmpty")(o.targeting)&&!j)o.targeting=this.convertConnectionsToInterestsFromApiToTargetingSpec(c("TargetingSpecStore").getTargetingApiSpec());if(this.props.useFromLegacyComposer)this._onSaveLegacy(o);else this._onSaveStore(o);this.props.onSave()},_onSaveStore:function n(o){c("ReactComposerTargetingUtils").setData(this.context.composerID,o)},_isDefaultSpec:function n(o){return c("areEqual")(o,{age_max:65,age_min:13})},_onSaveLegacy:function n(o){if(this.props.callbackDataStatus)this.props.callbackDataStatus(o.gating&&!c("isEmpty")(o.gating)&&!this._isDefaultSpec(o.gating)||o.targeting&&!c("isEmpty")(o.targeting)&&!this._isDefaultSpec(o.targeting)||o.hints&&!c("isEmpty")(o.hints)&&!this._isDefaultSpec(o.hints));c("ReactComposerTargetingUtils").setData(this.context.targetID,o)},_onTargetingChange:function n(o){if(!this.props.useTargetingAsFilter){delete o.age_min;delete o.age_max}if(c("areEqual")(this.state.targeting,o)||c("areEqual")(this.state.hints,o))return;this.setState({fetching:true});var p=this.props.useTargetingAsFilter?o:Object.assign({},o,this.state.targeting);c("ReactComposerTargetingUtils").fetchMetadata(p,this.context.targetID,this._onTargetingChangeHandler)},_onTargetingChangeHandler:function n(o,p,q){if(this.props.useTargetingAsFilter)this.setState({fetching:false,targeting:o,targetingSentences:p,reachEstimate:q});else this.setState({fetching:false,hints:o,targetingSentences:p})},_onGatingChange:function n(o){var p;if(c("areEqual")(this.state.gating,o))return;this.setState({fetching:true});var q=(p=o)!=null?(p=p.geo_locations)!=null?(p=p.zips)!=null?p.length:p:p:p;if(j&&q&&q>=1e3)this.setState({fetching:false,gating:o,gatingSentences:c("React").createElement("span",null,i._("{=Location - Living in:}",[i._param("=Location - Living in:",c("React").createElement(c("XUIText.react"),{weight:"bold"},i._("Location - Living in:")))]),c("React").createElement(c("XUIText.react"),{weight:"bold"}," \u2026"))});else c("ReactComposerTargetingUtils").fetchMetadata(o,this.context.targetID,this._onGatingChangeHandler)},_onGatingChangeHandler:function n(o,p){if(this.props.useTargetingAsFilter)this.setState({fetching:false,gating:o,gatingSentences:p});else this.setState({fetching:false,gating:o,targetingSentences:p});if(c("isEmpty")(o)||c("isEmpty")(p.props.children))this.props.onGatingChange&&this.props.onGatingChange(null,null);else this.props.onGatingChange&&this.props.onGatingChange(o,p)},_onWoodhengeInfoChange:function n(o){var p=void 0,q=void 0;switch(o){case c("WoodhengeAudienceType").ALL_SUPPORTERS:p={woodhengeAudience:c("WoodhengeAudienceType").ALL_SUPPORTERS,woodhengeTiers:this.props.woodhengeTiers};q=i._("Supporters only");break;default:p=null;q=null;break}this.setState({woodhengeInfo:p,woodhengeSentence:q})},_isValidSelection:function n(){if(!this.props.showWoodhengeGating)return true;if((this.state.gating&&!c("isEmpty")(this.state.gating)&&!this._isDefaultSpec(this.state.gating)||this.state.targeting&&!c("isEmpty")(this.state.targeting)&&!this._isDefaultSpec(this.state.targeting))&&this.state.woodhengeInfo&&!c("isEmpty")(this.state.woodhengeInfo))return false;return true},convertConnectionsToInterestsFromApiToTargetingSpec:function n(o){if(o&&o.connections&&!o.fan_of){o.fan_of=o.connections;delete o.connections}return o},convertInterestsToConnectionsFromTargetingSpecToApi:function n(o){if(o&&o.fan_of&&!o.connections){o.connections=o.fan_of;delete o.fan_of}return o},getInitialSavedData:function n(o){var p={};if(this.props.useFromLegacyComposer)p=this.getSavedSpec(o,this.context.targetID);else p=this.getSavedSpec(o,this.context.composerID);return this.convertInterestsToConnectionsFromTargetingSpecToApi(p)},getSavedSpec:function n(o,p){if(this.props.useFromLegacyComposer)var q=c("ReactComposerTargetingUtils").getDataFromTargetingTaggerStore(p);else q=c("ReactComposerTargetingUtils").getDataFromComposerTaggerStore(p);return q==null?null:q[o]},getInitialReachEstimate:function n(){if(!this.props.useTargetingAsFilter)return null;else{var o=c("ReactComposerTargetingUtils").getDataFromComposerTaggerStore(this.context.composerID);return o==null?null:o.reachEstimate}},renderReachEstimate:function n(){if(!this.state.reachEstimate)return null;var o=this.state.reachEstimate===20?i._("0-20"):this.state.reachEstimate,p=i._("Reach estimate for news feed targeting: {estimate_number}",[i._param("estimate_number",o)]);return c("React").createElement(c("XUIText.react"),null,p)},renderHelpLink:function n(){var o=i._("Have a Question?"),p="https://www.facebook.com/facebookmedia/get-started/audience-optimization/",q=c("React").createElement(c("Link.react"),{href:p,target:"_blank"},i._("Read our Guidelines."));return c("React").createElement("div",{className:"_3xrd"},c("React").createElement(c("XUIText.react"),null,o)," ",q)},renderFooterLeftContent:function n(){if(this.props.shouldHideLeftFooter)return null;if(!this.props.useTargetingAsFilter)return this.renderHelpLink();return this.renderReachEstimate()},render:function n(){var o=c("React").createElement("div",{className:"_1220"},c("React").createElement(c("XUISpinner.react"),null)),p=this.props.useTargetingAsFilter?this.state.targeting:this.state.hints,q="";if(this.state.woodhengeInfo)q=this.state.woodhengeInfo.woodhengeAudience;var r=this._isValidSelection();return c("React").createElement(c("XUIDialog.react"),{shown:this.props.shown,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},layerHideOnBlur:false,onToggle:this.props.onToggle,width:l},c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("BootloadedComponent.react"),{accessToken:this.props.accessToken,allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions,bootloadLoader:c("JSResource")("PagesComposerAudiencesBody.react").__setRef("PagesComposerAudiences.react"),bootloadPlaceholder:o,canSeeCompleteList:this.props.canSeeCompleteList,canSeeDemographicOptions:this.props.canSeeDemographicOptions,disallowRadiusSelection:this.props.isLiveVideo,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,hideGating:this.props.hideGating,initialActiveKey:this.props.initialActiveKey,initialGatingSpec:this.state.gating,initialTargetingSpec:p,initialWoodhengeAudience:q,onGatingChange:this._onGatingChange,onTargetingChange:this._onTargetingChange,onWoodhengeInfoChange:this._onWoodhengeInfoChange,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux,showWoodhengeGating:this.props.showWoodhengeGating,useTargetingAsFilter:this.props.useTargetingAsFilter})),c("React").createElement(c("XUIDialogFooter.react"),{leftContent:this.renderFooterLeftContent()},c("React").createElement(c("XUIDialogCancelButton.react"),{use:"default"}),c("React").createElement(c("XUIDialogSaveButton.react"),{"data-hover":"tooltip","data-tooltip-content":!r?"Invalid targeting":null,action:"confirm",className:"_2uyv",disabled:this.state.fetching||!r,onClick:this._onSave,use:"confirm"})))}});f.exports=m}),null);
__d("CommerceInventoryToggle.react",["cx","fbt","FBToggleSwitch.react","React","SUIBusinessTheme","SUISimplePopover.react"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=c("React").PropTypes,k=c("React").createClass({displayName:"CommerceInventoryToggle",propTypes:{disabled:j.bool.isRequired,inventory:j.number.isRequired,setInventoryInfo:j.func},render:function l(){var m=this.props.inventory>0?i._("In Stock"):i._("Out of Stock");return c("React").createElement("div",{className:"_3-95"},c("React").createElement("div",{className:"_2pim"},c("React").createElement(c("FBToggleSwitch.react"),{disabled:this.props.disabled,animate:true,checked:this.props.inventory>0,onToggle:this.props.setInventoryInfo}),c("React").createElement("span",{className:"_3jn"},m,c("React").createElement(c("SUISimplePopover.react"),{content:i._("Mark this product as in stock or out of stock"),contentWidthUseSparingly:318,position:"above",theme:c("SUIBusinessTheme")}))))}});f.exports=k}),null);
__d("CommerceInventoryAvailabilityOptions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INVENTORY_IN_STOCK:100,INVENTORY_OUT_OF_STOCK:0})}),null);
__d("CommerceProductVariantType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COLOR:"Color",CUSTOM:"Custom",EDITION:"Edition",FIT:"Fit",FLAVOR:"Flavor",FORMAT:"Format",LENGTH:"Length",MATERIAL:"Material",MODEL:"Model",PLATFORM:"Platform",SCENT:"Scent",SIZE:"Size",WIDTH:"Width"})}),null);
__d("CommerceSelfServeSection",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHECKOUT_URL:"checkout_url",COMMERCE_INSIGHTS:"commerce_insights",FEATURED_PRODUCT_TOGGLE:"featured_product_toggle",INVENTORY:"inventory",IN_STOCK_TOGGLE:"in_stock_toggle",PRODUCT_VISIBILITY:"product_visibility",RETURN_POLICY:"return_policy",SHIPPING_OPTIONS:"shipping_options",TAX_CATEGORY:"tax_category",TAX_TABLE:"tax_table",VARIANTS:"variants",MINIMUM_PRICE_ERROR:"minimum_price_error",SALE_PRICE:"sale_price",CATEGORY:"category"})}),null);
__d("PageCommerceProductVariantPage.react",["ix","cx","fbt","glyph","invariant","AccessibleTableParts.react","AdsCurrencyInput_DEPRECATED.react","CommerceCurrencyInputUtils","CommerceInventoryAvailabilityOptions","CommerceInventoryToggle.react","CommerceProductVariantType","CommerceSelfServeSection","CommerceUI","DummySearchSource","FreeformSearchSource","Image.react","Layout.react","Link.react","NumberInput.atlas","React","SearchableEntry","SUIBusinessTheme","SUISimplePopover.react","XUISingleSelector.react","XUITable.react","XUITokenizer.react","isEmpty"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m=c("React").PropTypes,n=c("AccessibleTableParts.react").BodyRow,o=c("AccessibleTableParts.react").HeadRow,p=c("Layout.react").Column,q=c("Layout.react").FillColumn,r=c("XUISingleSelector.react").Option,s=c("React").createClass({displayName:"PageCommerceProductVariantPage",propTypes:{currencyCode:m.string.isRequired,defaultVariantPrice:m.number,getPriceError:m.func.isRequired,isOnSale:m.bool.isRequired,inventoryType:m.string.isRequired,setVariantInfo:m.func.isRequired,variants:m.arrayOf(m.shape({label:m.string,options:m.arrayOf(m.string)})).isRequired,variantItems:m.objectOf(m.shape({properties:m.object,price:m.number.isRequired,salePrice:m.number.isRequired,inventory:m.number,productID:m.number})).isRequired},_cachedItems:{},_deepClone:function t(u){return JSON.parse(JSON.stringify(u))},getInitialState:function t(){this._cachedItems=this._deepClone(this.props.variantItems);return{searchSource:new(c("FreeformSearchSource"))(new(c("DummySearchSource"))(),function(u){return u},0)}},render:function t(){var u=null;if(this.props.variants.length<c("CommerceUI").MAX_VARIANTS)u=c("React").createElement(c("Link.react"),{onClick:this._addNewVariantInput},j._("Add Option"));return c("React").createElement("div",{className:"_3-8j"},c("React").createElement("div",{ref:"variant_input_list"},this.props.variants.map(function(v,w){return this._getVariantInput(v,w,this._getVariantLabels())}.bind(this))),u,this._getVariantsTable())},_getVariantInput:function t(u,v,w){return c("React").createElement("div",{key:"variant"+v,className:"_3-95"},c("React").createElement(c("Layout.react"),null,c("React").createElement(p,null,this._getVariantOptions(u,v,w)),c("React").createElement(q,{className:"_2pis"},c("React").createElement(c("XUITokenizer.react"),{entries:this._getTokenizerEntries(u),searchSource:this.state.searchSource,onRemoveEntryAttempt:this._onRemoveVariantOptionAttempt.bind(this,u,v),onAddEntryAttempt:this._onAddVariantOptionAttempt.bind(this,u,v),tokenizeQueryString:this._tokenizeQueryString.bind(this,u,v),selectOnBlur:true})),c("React").createElement(p,null,c("React").createElement(c("Image.react"),{className:"_11dw",onClick:this._removeVariant.bind(this,u,v),src:h("101449")}))))},_getVariantsTable:function t(){__p&&__p();if(c("isEmpty")(this.props.variants))return null;var u=[];for(var v in this.props.variantItems){var w=this.props.variantItems[v],x=w.properties,y=[];this.props.variants.forEach(function(C,D){var E=x&&x[C.label]?x[C.label]:"";y.push(c("React").createElement("td",{className:"_2ncv",key:D},E))});y.push(c("React").createElement("td",{width:"50",key:v+"inventory"},this._getInventoryInput(v,w.inventory)));var z=c("CommerceCurrencyInputUtils").convertPEFormatToPBFormat(w.price,this.props.currencyCode),A=c("CommerceCurrencyInputUtils").convertPEFormatToPBFormat(w.salePrice,this.props.currencyCode);y.push(c("React").createElement("td",{width:"50",key:v+"price"},c("React").createElement(c("AdsCurrencyInput_DEPRECATED.react"),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantPrice.bind(this,v),value:z!==null?z:0,xuiError:this.props.getPriceError(w.price)})));if(this.props.isOnSale)y.push(c("React").createElement("td",{width:"50",key:v+"salePrice"},c("React").createElement(c("AdsCurrencyInput_DEPRECATED.react"),{currency:this.props.currencyCode,onDataUpdate:this._updateVariantSalePrice.bind(this,v),value:A!==null?A:0,xuiError:this.props.getPriceError(w.salePrice)})));u.push(c("React").createElement(n,{key:v},y))}var B=[];this.props.variants.forEach(function(C,D){B.push(c("React").createElement("th",{key:C.label+D},this._getVariantLabelDescription(String(C.label))))}.bind(this));B.push(c("React").createElement("th",{key:"inventory"},j._("Inventory")));B.push(c("React").createElement("th",{key:"price"},j._("Price")));if(this.props.isOnSale)B.push(c("React").createElement("th",{key:"salePrice"},j._("Sale Price"),c("React").createElement(c("SUISimplePopover.react"),{content:j._("You can disable individual \"Sale Prices\" by setting them equal to regular \"Prices\"."),contentWidthUseSparingly:318,position:"below",theme:c("SUIBusinessTheme")})));return c("React").createElement(c("XUITable.react"),{outerBorder:true,className:"_2ncw"},c("React").createElement("thead",null,c("React").createElement(o,null,B)),c("React").createElement("tbody",null,u))},_updateVariantPrice:function t(u,v){var w=c("CommerceCurrencyInputUtils").convertPBFormatToPEFormat(v,this.props.currencyCode);this._updateVariantItem(u,"price",w)},_getInventoryInput:function t(u,v){return this.props.inventoryType===c("CommerceSelfServeSection").IN_STOCK_TOGGLE?c("React").createElement(c("CommerceInventoryToggle.react"),{disabled:false,inventory:v!==null?v:0,setInventoryInfo:function(w){var v=w?c("CommerceInventoryAvailabilityOptions").INVENTORY_IN_STOCK:c("CommerceInventoryAvailabilityOptions").INVENTORY_OUT_OF_STOCK;this._updateVariantItem(u,"inventory",v)}.bind(this)}):c("React").createElement(c("NumberInput.atlas"),{isZeroValidValue:true,name:"inventory",nonnegative:true,value:v,formatNumber:false,onValueUpdated:this._updateVariantItem.bind(this,u,"inventory")})},_updateVariantSalePrice:function t(u,v){var w=c("CommerceCurrencyInputUtils").convertPBFormatToPEFormat(v,this.props.currencyCode);this._updateVariantItem(u,"salePrice",w)},_updateVariantItem:function t(u,v,w){var x=this.props.variantItems;x[u][v]=w;this._cachedItems[u][v]=w;this.props.setVariantInfo({variantItems:x})},_getVariantItems:function t(u){__p&&__p();var v={};if(u.length===0)return v;this._getVariantCombos(u.slice(0)).forEach(function(w){__p&&__p();var x=[];for(var y in w)x.push(y+w[y]);x.sort();var z=JSON.stringify(x);if(z in this._cachedItems)v[z]=this._deepClone(this._cachedItems[z]);else{v[z]={properties:w,price:this.props.defaultVariantPrice,salePrice:this.props.defaultVariantPrice,inventory:0};this._cachedItems[z]=this._deepClone(v[z])}}.bind(this));return v},_getVariantCombos:function t(u){__p&&__p();if(u.length===0)return[{}];var v=[],w=u.shift(),x=this._getVariantCombos(u.slice(0));if(w.options.length==0)return x;w.options.forEach(function(y){x.forEach(function(z){var A=Object.assign({},z);A[w.label]=y;v.push(A)})});return v},_getTokenizerEntries:function t(u){return u.options.map(function(v){return new(c("SearchableEntry"))({uniqueID:v,title:v})})},_onRemoveVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim(),y=u.options.indexOf(x);if(y>=0)u.options.splice(y,1);this._updateVariant(u,v)},_onAddVariantOptionAttempt:function t(u,v,w){var x=w.getTitle().trim();if(u.options.indexOf(x)>=0||x.length===0)return;u.options.push(x);this._updateVariant(u,v)},_updateVariant:function t(u,v){var w=this.props.variants;w[v]=u;var x=this._getVariantItems(w);this.props.setVariantInfo({variants:w,variantItems:x})},_tokenizeQueryString:function t(u,v,w){if(!w||!w.includes(","))return null;var x=w.split(",").filter(function(z){return z!==""}),y=x.pop();x.map(function(z){this._onAddVariantOptionAttempt(u,v,new(c("SearchableEntry"))({uniqueID:z,title:z}))}.bind(this));return new(c("SearchableEntry"))({uniqueID:y,title:y})},_addNewVariantInput:function t(){var u=this.props.variants;u.push(this._getDefaultVariant());this.props.setVariantInfo({variants:u,variantItems:this._getVariantItems(u)})},_removeVariant:function t(u,v){var w=this.props.variants;w.splice(v,1);this.props.setVariantInfo({variants:w,variantItems:this._getVariantItems(w)})},_getVariantLabels:function t(){return this.props.variants.map(function(u){return String(u.label)})},_getDefaultVariant:function t(){var u=this._getVariantLabels(),v=void 0;for(var w in c("CommerceProductVariantType")){var x=c("CommerceProductVariantType")[w];if(u.indexOf(x)===-1){v=x;break}}return{label:v,options:[]}},_getVariantOptions:function t(u,v,w){var x=[];for(var y in c("CommerceProductVariantType")){var z=c("CommerceProductVariantType")[y];if(u.label!==z&&w.indexOf(z)!==-1)continue;x.push(c("React").createElement(r,{key:y+v,value:z},this._getVariantLabelDescription(z)))}return c("React").createElement(c("XUISingleSelector.react"),{className:"_11dy",onChange:this._onSelectorChange.bind(this,u,v),value:u.label,size:"large"},x)},_getVariantLabelDescription:function t(u){__p&&__p();var v=u.toUpperCase();Object.prototype.hasOwnProperty.call(c("CommerceProductVariantType"),v)||l(0);switch(c("CommerceProductVariantType")[v]){case c("CommerceProductVariantType").SIZE:return j._("Size");case c("CommerceProductVariantType").COLOR:return j._("Color");case c("CommerceProductVariantType").MATERIAL:return j._("Material");case c("CommerceProductVariantType").LENGTH:return j._("Length");case c("CommerceProductVariantType").FIT:return j._("Fit");case c("CommerceProductVariantType").WIDTH:return j._("Width");case c("CommerceProductVariantType").SCENT:return j._("Scent");case c("CommerceProductVariantType").FLAVOR:return j._("Flavor");case c("CommerceProductVariantType").MODEL:return j._("Model");case c("CommerceProductVariantType").FORMAT:return j._("Format");case c("CommerceProductVariantType").PLATFORM:return j._("Platform");case c("CommerceProductVariantType").EDITION:return j._("Edition");default:return u}},_onSelectorChange:function t(u,v,w){var x=this.props.variants;x[v].label=w.value;this.props.setVariantInfo({variants:x,variantItems:this._getVariantItems(x)});u.label=w.value;this._updateVariant(u,v)}});f.exports=s}),null);
__d("ComputerPanelActionState",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({NEUTRAL:null,DROP:null});f.exports=h}),null);
__d("DragDropFilePicker",["DragDropTarget","mixin","ArbiterMixin","FilePickerEvent","FileSelectionContainer","createArrayFromMixed","SelectionSource"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l){"use strict";__p&&__p();i.constructor.call(this);this.$DragDropFilePicker1=new(c("DragDropTarget"))(k);if(l.onDocumentDragEnterCallback)this.$DragDropFilePicker1.setOnDocumentDragEnterCallback(l.onDocumentDragEnterCallback);if(l.onDocumentDragLeaveCallback)this.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(l.onDocumentDragLeaveCallback);if(l.onDragEnterCallback)this.$DragDropFilePicker1.setOnDragEnterCallback(l.onDragEnterCallback);if(l.onDragLeaveCallback)this.$DragDropFilePicker1.setOnDragLeaveCallback(l.onDragLeaveCallback);this.$DragDropFilePicker1.setOnFilesDropCallback(function(m){var n=c("createArrayFromMixed")(m).filter(function(o){return!l.isFileValid||l.isFileValid(o)}).map(function(o){return new(c("FileSelectionContainer"))(o)});if(n.length>0)this.inform(c("FilePickerEvent").SELECTED,{sender:this,source:c("SelectionSource").FILE,selections:n});else l.onDocumentDragLeaveCallback.call(null)}.bind(this));this.$DragDropFilePicker1.enable()}j.prototype.disable=function(){"use strict";this.$DragDropFilePicker1.disable()};f.exports=j}),null);
__d("PUWUploaders",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HTML5:"html5",FLASH:"flash"})}),null);
__d("OmnipickerHTML5FilePickerFactory",["fbt","HTML5FilePicker","PUWApplications","PUWMethods","PUWUploaders"],(function a(b,c,d,e,f,g,h){var i={create:function j(k){return new(c("HTML5FilePicker"))(k,{accept:"image/*",fallbackFunction:function l(){},multiple:true,qn:"todo",waterfallApp:c("PUWApplications").WEB_OMNIPICKER,waterfallUploader:c("PUWUploaders").HTML5,waterfallMethod:c("PUWMethods").FILE_SELECTOR,title:h._("Choose files to upload")})}};f.exports=i}),null);
__d("OmnipickerDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("OmnipickerActions",["OmnipickerDispatcher","clamp","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null}),i={types:h,appInitialized:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.APP_INITIALIZED,appID:k,logger:l,initialSource:m})},panelInitialized:function j(k,l){c("OmnipickerDispatcher").dispatch({type:h.PANEL_INITIALIZED,appID:k,source:l})},photoSourceSelected:function j(k,l){c("OmnipickerDispatcher").dispatch({type:h.PHOTO_SOURCE_SELECTED,appID:k,source:l})},filePickerSelectStarted:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECT_STARTED,appID:k,method:l,ref:m})},filePickerSelected:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECTED,appID:k,method:l,ref:m})},filePickerSelectCancelled:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECT_CANCELED,appID:k,method:l,ref:m})},resizeFailed:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_FAILED,appID:k,dt:l,bytes:m,errorCode:n})},resizeStarted:function j(k){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_STARTED,appID:k})},resizeSucceeded:function j(k,l,m,n,o){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_SUCCEEDED,appID:k,dt:l,bytes:m,originalSize:n,customTags:o})},uploadQueued:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_QUEUED,appID:k,source:l,ids:m.map(function(n){return n.getSelectionContainerID()}),volume:m.length})},selectionChanged:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.SELECTION_CHANGED,appID:k,source:l,id:m,checked:n})},uploadStart:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_STARTED,appID:k,source:l,id:m,bytes:n})},uploadProgress:function j(k,l,m,n){var o=c("clamp")(n.bytesTransferred/n.file.size*100,0,100);c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_PROGRESSED,appID:k,source:l,id:m,progress:o})},uploadDone:function j(k,l,m,n,o,p){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_FINISHED,appID:k,source:l,id:m,src:n,fbid:o,retriesNeeded:p})},uploadFailed:function j(k,l,m,n,o){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_FAILED,appID:k,source:l,id:m,retriesNeeded:n,errorCode:o})},existingPhotosFetched:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.EXISTING_PHOTOS_FETCHED,appID:k,photos:m.map(function(n){return{source:l,id:n.id,src:n.image.uri}})})},optimisticSelect:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.PHOTO_SELECTED_OPTIMISTICALLY,appID:k,source:l,id:m})},cancelUpload:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_CANCELED,appID:k,source:l,id:m})}};f.exports=i}),null);
__d("OmnipickerUploadController",["OmnipickerActions","SelectionSource"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$OmnipickerUploadController1={}}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadController1[i]={}};h.prototype.registerAdapter=function(i,j,k){__p&&__p();this.$OmnipickerUploadController1[i][k]=j;var l=c("SelectionSource").toPhotoSourceType(k);j.subscribe("maxReached",function(){});j.subscribe("resize_start",this.$OmnipickerUploadController2.bind(this,i));j.subscribe("resize_done",this.$OmnipickerUploadController3.bind(this,i));j.subscribe("resize_hires_start",function(){});j.subscribe("upload_start",this.$OmnipickerUploadController4.bind(this,i,l));j.subscribe("upload_progress",this.$OmnipickerUploadController5.bind(this,i,l));j.subscribe("upload_done",this.$OmnipickerUploadController6.bind(this,i,l));j.subscribe("upload_failed",this.$OmnipickerUploadController7.bind(this,i,l));j.subscribe("finished",function(){})};h.prototype.uploadSelections=function(i,j,k,l){__p&&__p();if(!k.every(function(o){return o.getSource()==j}))throw new Error("Selections' source must be "+j);var m=this.$OmnipickerUploadController1[i][j],n=c("SelectionSource").toPhotoSourceType(j);if(!m){k.forEach(function(o){var p=o.getExistingImageID(),q=o.getSrc();c("OmnipickerActions").uploadDone(i,n,p,q,p,0)});return}if(!k[0].hasPlaceholderUI())c("OmnipickerActions").uploadQueued(i,n,k);m.uploadSelections(k,l)};h.prototype.cancelUpload=function(i,j,k){c("OmnipickerActions").cancelUpload(i,j,k)};h.prototype.$OmnipickerUploadController2=function(i,event,j){c("OmnipickerActions").resizeStarted(i)};h.prototype.$OmnipickerUploadController3=function(i,event,j){var k=j.scubaData.scuba_ints,l=k.timeResizing||k.dt,m=k.resizedSize;if(j.error)c("OmnipickerActions").resizeFailed(i,l,m,j.error.message);else c("OmnipickerActions").resizeSucceeded(i,l,m,k.originalSize,{skipped_resizing:j.scubaData.scuba_tags.skippedResizing})};h.prototype.$OmnipickerUploadController4=function(i,j,event,k){c("OmnipickerActions").uploadStart(i,j,k.uploadID,k.size)};h.prototype.$OmnipickerUploadController5=function(i,j,event,k){c("OmnipickerActions").uploadProgress(i,j,k.uploadID,k)};h.prototype.$OmnipickerUploadController6=function(i,j,event,k){c("OmnipickerActions").uploadDone(i,j,k.uploadID,k.response.src,k.response.fbid,k.retriesNeeded)};h.prototype.$OmnipickerUploadController7=function(i,j,event,k){c("OmnipickerActions").uploadFailed(i,j,k.uploadID,k.retriesNeeded,k.response_error)};f.exports=new h()}),null);
__d("OmnipickerUploadSession",["FilePickerEvent","OmnipickerActions","OmnipickerUploadController","PhotoSourceTypes","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$OmnipickerUploadSession1={}}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadSession1[i]={pickersData:[]}};h.prototype.addPicker=function(i,j,k,l){__p&&__p();var m=new(c("SubscriptionsHandler"))();m.addSubscriptions(j.subscribe(c("FilePickerEvent").SELECT_START,function(n,o){c("OmnipickerActions").filePickerSelectStarted(i,l,k)}),j.subscribe(c("FilePickerEvent").SELECTED,function(n,o){if(o.selections&&o.selections.length>0){c("OmnipickerActions").filePickerSelected(i,l,k);var p=o.selections[0].getSource();c("OmnipickerUploadController").uploadSelections(i,p,o.selections)}}),j.subscribe(c("FilePickerEvent").SELECT_CANCELED,function(n,o){c("OmnipickerActions").filePickerSelectCancelled(i,l,k)}));this.$OmnipickerUploadSession1[i].pickersData.push({picker:j,subscriptions:m})};h.prototype.removePicker=function(i,j){var k=this.$OmnipickerUploadSession1[i].pickersData;k.forEach(function(l,m){if(l.picker===j){l.subscriptions.release();k.splice(m,1)}})};h.prototype.cancelUpload=function(i,j,k){if(j!==c("PhotoSourceTypes").COMPUTER)throw new Error("Can only cancel "+c("PhotoSourceTypes").COMPUTER+" uploads. Actual source: "+j);c("OmnipickerUploadController").cancelUpload(i,j,k)};f.exports=new h()}),null);
__d("HTML5FilePickerButton.react",["fbt","OmnipickerHTML5FilePickerFactory","OmnipickerUploadSession","React","ReactDOM","PhotoSourceTypes","PUWMethods","XUIButton.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){"use strict";this.picker=c("OmnipickerHTML5FilePickerFactory").create(c("ReactDOM").findDOMNode(this.refs.fileButton));c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,c("PhotoSourceTypes").COMPUTER,c("PUWMethods").FILE_SELECTOR)};l.prototype.componentWillUnmount=function(){"use strict";c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)};l.prototype.render=function(){"use strict";var m=h._("Select Files");return c("React").createElement(c("XUIButton.react"),{ref:"fileButton",href:"#",size:"xlarge",label:m})};function l(){"use strict";i.apply(this,arguments)}l.propTypes={appID:k.string.isRequired};f.exports=l}),null);
__d("DragDropInstructions.react",["cx","fbt","ComputerPanelActionState","HTML5FilePickerButton.react","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderInstructions=function(){switch(this.props.actionState){case c("ComputerPanelActionState").DROP:return c("React").createElement("div",null,c("React").createElement("div",{className:"_39ld"},c("React").createElement("div",{className:"_4zwj"})),c("React").createElement("div",{className:"_4zwc"},i._("Drop photos here")));case c("ComputerPanelActionState").NEUTRAL:return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement("div",{className:"_39ld"},c("React").createElement("div",{className:"_4zwd"})),c("React").createElement("div",{className:"_4zwc"},i._("Drag photos here"))),c("React").createElement("div",{className:"_4zwi"},c("React").createElement("span",{className:"_4zwe"}),i._("or"),c("React").createElement("span",{className:"_4zwe"})),c("React").createElement("div",{className:"_4zwf"},c("React").createElement(c("HTML5FilePickerButton.react"),{appID:this.props.appID})))}}.bind(this),this.renderOverlay=function(){return c("React").createElement("div",{className:"_4zwg"},c("React").createElement("div",{className:"_4zwh"},this.renderInstructions()))}.bind(this),o}m.prototype.render=function(){"use strict";if(this.props.isOverlay)return this.renderOverlay();return this.renderInstructions()};m.propTypes={actionState:l.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:l.string.isRequired,isOverlay:l.bool};f.exports=m}),null);
__d("EmptyPanel.react",["cx","DragDropInstructions.react","React","ComputerPanelActionState"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m="_2gyt"+(this.props.actionState===c("ComputerPanelActionState").NEUTRAL?" _2gyu":"")+(this.props.actionState===c("ComputerPanelActionState").DROP?" _2gyw":"");return c("React").createElement("div",{className:m},c("React").createElement("div",{className:"_2gyv"},c("React").createElement(c("DragDropInstructions.react"),{actionState:this.props.actionState,appID:this.props.appID})))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={actionState:k.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:k.string.isRequired};f.exports=l}),null);
__d("HTML5UploadAdapter",["AsyncUploadQueue","ArbiterMixin","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","PhotosMimeType","JpegResizer","JpegResizerConfig","SphericalImage","SphericalPhotoConfig","performanceNow","SphericalPhotoUploadHelper","URI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("SphericalPhotoUploadHelper").shouldResize360;function i(j){__p&&__p();this._config=babelHelpers["extends"]({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},j);this._uploads={};this._numProcessing=0;this._activeUploadCount=0;this._uploadQueue=new(c("AsyncUploadQueue"))(this._config.uri);this._uploadQueue.setAllowCrossOrigin(true);this._uploadQueue.setLimit(j.maxParallel);this._uploadQueue.subscribe("start",this._handleStart.bind(this));this._uploadQueue.subscribe("failure",this._handleFailure.bind(this));this._uploadQueue.subscribe("success",this._handleSuccess.bind(this));this._uploadQueue.subscribe("progress",this._handleProgress.bind(this));this._uploadQueue.subscribe("success_after_abort",this._handleCanceledPhotoUploadedAnyway.bind(this));if(c("JpegResizer").isSupported()){this._jpegResizer=new(c("JpegResizer"))(j.maxParallel);if(Object.prototype.hasOwnProperty.call(j,"useHighQuality"))this._jpegResizer.setHighQuality(j.useHighQuality);this._jpegResizer.setUndershoot(c("JpegResizerConfig").undershoot).setEncodeQuality(c("JpegResizerConfig").quality)}this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this))}Object.assign(i,{isSupported:function j(){return c("AsyncUploadQueue").isSupported()&&c("JpegResizer").isSupported()},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(i.prototype,c("ArbiterMixin"),c("PhotosUploadWaterfallMixin"),{getUploaderApp:function j(){return c("PhotosUploadWaterfall").APP_HTML5},getWaterfallID:function j(){return this._config.qn},getWaterfallSource:function j(){return this._config.ref},uploadFiles:function j(k,l){__p&&__p();var m=function(o,p){o.sphericalImage=p;this._enqueueUpload(o,babelHelpers["extends"]({},this._config.postParams,l))}.bind(this),n=function(o){var p=c("performanceNow")(),q=function(s){m(o,s);this.logWaterfallStep(c("PhotosUploadWaterfall").DONE_SPHERICAL_CHECK,{scuba_ints:{dt:c("performanceNow")()-p},projection_type:s.getProjectionType()})}.bind(this),r=function(s){m(o);this.logWaterfallStep(c("PhotosUploadWaterfall").FAIL_SPHERICAL_CHECK,{code:c("PhotosUploadWaterfallErrorCodes").SPHERICAL_CHECK_FAILED,scuba_ints:{dt:c("performanceNow")()-p}})}.bind(this);c("SphericalImage").createFromBlob(o).then(q)["catch"](r).done()}.bind(this);k.forEach(n)},uploadSelections:function j(k,l){var m=k.map(function(n){var o=n.getFile();o.uploadID=n.getSelectionContainerID();return o});this.uploadFiles(m,l)},setHiRes:function j(k){if(Object.prototype.hasOwnProperty.call(this._config,"useHighQuality"))this._jpegResizer&&this._jpegResizer.setHighQuality(k)},setNumSelected:function j(k){},markDeleted:function j(k){},addPostParam:function j(k,l){this._config.postParams=this._config.postParams||{};this._config.postParams[k]=l},cancelIndividualUpload:function j(k){var l=this._getUpload(k);if(l){this._uploadQueue.dequeue(l);this._removeUpload(l)}},cancelAllUploads:function j(){for(var k in this._uploads){var l=this._getUpload(k);this._uploadQueue.dequeue(l);this._removeUpload(l)}},getActiveUploadCount:function j(){return this._activeUploadCount},_getUpload:function j(k){if(k&&this._uploads[k])return this._uploads[k];else return null},_removeUpload:function j(k){if(!this._uploads[k.getFile().uploadID])return;delete this._uploads[k.getFile().uploadID];if(!k.isWaiting())this._activeUploadCount--},_handleStart:function j(k,l){this._activeUploadCount++;this.inform("upload_start",{uploadID:l.getFile().uploadID,retry:!!l.getFile()._retryCount,file:l.getFile(),size:l.getFile().size})},_handleFailure:function j(k,l){var m=Math.pow(2,l.getFile()._retryCount);this._removeUpload(l);if(l.getFile()._retryCount++<this._config.maxRetries){setTimeout(this._enqueueUpload.bind(this,l.getFile(),babelHelpers["extends"]({},this._config.postParams,{retry:l.getFile()._retryCount})),this._config.retryTimeout*m);this.logWaterfallStep(c("PhotosUploadWaterfall").RETRY_UPLOAD,{code:l.getResponse().getError()});this.inform("upload_retry",{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse(),retry:l.getFile()._retryCount})}else this.inform("upload_failed",{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse()});return false},_handleSuccess:function j(k,l){this._removeUpload(l);var m=l.getResponse(),n=m.payload;if(n.metadata)n=n.metadata;this.inform("upload_done",{uploadID:l.getFile().uploadID,response:n[0],hiRes:true,retriesNeeded:l.getFile()._retryCount})},_handleProgress:function j(k,l){this.inform("upload_progress",{file:l.getFile(),uploadID:l.getFile().uploadID,bytesTransferred:l.getProgressEvent().loaded})},_resizeUpload:function j(k,l){__p&&__p();var m=k.getFile();if(!c("PhotosMimeType").isJpeg(m.type))return l(k);this.inform("resize_start",{uploadID:m.uploadID,file:m});var n=c("performanceNow")(),o=function(t,u,v,w,x){__p&&__p();if(t)this.logWaterfallStep(c("PhotosUploadWaterfall").CLIENT_ERROR,{code:c("PhotosUploadWaterfall").CERROR_RESIZING_FAILED,meta:{message:t.message}});var y=t||v;this.inform("resize_done",{uploadID:m.uploadID,scubaData:{scuba_tags:{skippedResizing:+y},scuba_ints:{timeResizing:c("performanceNow")()-n,originalSize:m.size,resizedSize:u&&u.size}},error:t});if(!y){u.uploadID=m.uploadID;u.name=m.name;k.setFile(u);k.getAdditionalData().set("js_resized",true).set("original_width",w).set("original_height",x)}l(k)}.bind(this);if(m.sphericalImage&&m.sphericalImage.isSpherical()){var p=m.sphericalImage,q=p.getSize(),r=c("SphericalPhotoConfig").upload_size_limit,s=p.getProjectionType();if(this._jpegResizer&&h(s,q,r))this._jpegResizer.resize360Blob(m,o,function(){},r);else o(false,m,true)}else if(this._jpegResizer)this._jpegResizer.resizeBlob(m,o);else o(false,m,true)},_handleCanceledPhotoUploadedAnyway:function j(k,l){this.inform("canceled_photo_uploaded",l.payload[0].fbid)},_enqueueUpload:function j(k,l){l=babelHelpers["extends"]({},l,{uploader:"html5"});k._retryCount=k._retryCount||0;this._uploads[k.uploadID]=k._retryCount?this._uploadQueue.prepend(k.fileName,k,l):this._uploadQueue.enqueue(k.fileName,k,l)}});f.exports=i}),null);
__d("OmnipickerPanelMixin.react",["PhotoSourceTypes","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i={propTypes:{appID:h.string,photoData:h.object,sourceType:h.oneOf(Object.keys(c("PhotoSourceTypes"))),selectionSource:h.string.isRequired}};f.exports=i}),null);
__d("OmnipickerPhotoUploadState",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});f.exports=h}),null);
__d("OmnipickerPhoto.react",["cx","fbt","Event","Image.react","OmnipickerActions","OmnipickerPhotoUploadState","OmnipickerUploadSession","PhotoSourceTypes","ProgressBar.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=2e4;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={canCancel:false},this.onDragStart=function(event){c("Event").kill(event)},this.onMouseDown=function(){},this.onMouseUp=function(){var t=true;if(!this.props.checked&&this.props.onPhotoSelected)t=this.props.onPhotoSelected.call(null,this.props.id);if(t)c("OmnipickerActions").selectionChanged(this.props.appID,this.props.photoSourceType,this.props.id,!this.props.checked)}.bind(this),this.getImage=function(){if(!this.props.src)return null;return c("React").createElement(c("Image.react"),{src:this.props.src,className:"_2dh3"})}.bind(this),this.getSelection=function(){if(!this.props.checked)return null;return c("React").createElement("div",{className:"_2dh3 _1cyy"})}.bind(this),this.getCancelOverlay=function(){if(this.props.uploadState!==c("OmnipickerPhotoUploadState").UPLOADING||!this.state.canCancel)return null;return c("React").createElement("div",{className:"_5goe"},c("React").createElement(c("ShimButton.react"),{className:"_5gof _1cu0",onClick:this.onCancel},i._("Cancel Upload")))}.bind(this),this.getFailedOverlay=function(){if(this.props.uploadState!==c("OmnipickerPhotoUploadState").FAILED)return null;return c("React").createElement("div",{className:"_5goe"},c("React").createElement("div",{className:"_5gof"},i._("Upload Failed")))}.bind(this),this.getProgressBar=function(){if(!this.props.showUploadProgress||this.props.uploadState!==c("OmnipickerPhotoUploadState").UPLOADING)return null;var t=null;if(this.props.progress<100)t=c("React").createElement(c("ProgressBar.react"),{value:this.props.progress,min:0,max:100});else t=c("React").createElement("div",{className:"_1t2c"});return c("React").createElement("div",{className:"_1cyx"},t)}.bind(this),this.onCancel=function(){c("OmnipickerUploadSession").cancelUpload(this.props.appID,this.props.photoSourceType,this.props.id)}.bind(this),this.setCancelTimeout=function(){this.cancelTimeout=setTimeout(function(){this.setState({canCancel:true})}.bind(this),m)}.bind(this),this.clearCancelTimeout=function(){if(this.cancelTimeout){clearTimeout(this.cancelTimeout);this.cancelTimeout=null}}.bind(this),p}n.prototype.componentDidMount=function(){if(this.props.supportsCancel&&this.props.uploadState===c("OmnipickerPhotoUploadState").UPLOADING)this.setCancelTimeout()};n.prototype.UNSAFE_componentWillReceiveProps=function(o){if(this.props.supportsCancel){var p=this.props.uploadState!==o.uploadState||this.props.progress!==o.progress;if(p){this.clearCancelTimeout();if(o.uploadState===c("OmnipickerPhotoUploadState").UPLOADING)this.setCancelTimeout()}}};n.prototype.componentWillUnmount=function(){this.clearCancelTimeout()};n.prototype.render=function(){return c("React").createElement("div",{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar())};n.propTypes={appID:l.string.isRequired,checked:l.bool,id:l.string.isRequired,onPhotoSelected:l.func,photoSourceType:l.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired,progress:l.number,showUploadProgress:l.bool,src:l.string,supportsCancel:l.bool,uploadState:l.oneOf([c("OmnipickerPhotoUploadState").NOT_STARTED,c("OmnipickerPhotoUploadState").UPLOADING,c("OmnipickerPhotoUploadState").DONE,c("OmnipickerPhotoUploadState").FAILED]).isRequired};n.defaultProps={checked:false,progress:0,showUploadProgress:true,supportsCancel:false};f.exports=n}),null);
__d("OmnipickerPhotoGrid.react",["cx","AutoPager.react","OmnipickerPhoto.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=300;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.getPhotos=function(){return Object.keys(this.props.photos).map(function(s){var t=this.props.photos[s];return c("React").createElement(c("OmnipickerPhoto.react"),{appID:this.props.appID,checked:t.checked,id:t.id,key:t.id,onPhotoSelected:this.props.onPhotoSelected,photoSourceType:this.props.photoSourceType,progress:t.progress,showUploadProgress:this.props.showUploadProgress,src:t.src,supportsCancel:this.props.supportsCancel,uploadState:t.uploadState})}.bind(this))}.bind(this),this.getAutoPager=function(){if(!this.props.onScrollPositionThresholdReached)return null;return c("React").createElement(c("AutoPager.react"),{className:"_4qgs",onEnterBuffer:l,onVisible:this.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"})}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_xhf"},c("React").createElement("div",{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager()))};m.propTypes={appID:k.string.isRequired,onPhotoSelected:k.func,onScrollPositionThresholdReached:k.func,photos:k.object.isRequired,photoSourceType:k.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired,showUploadProgress:k.bool,supportsCancel:k.bool};m.defaultProps={showUploadProgress:true,supportsCancel:false};f.exports=m}),null);
__d("PhotoPanel.react",["cx","fbt","ComputerPanelActionState","DragDropInstructions.react","HTML5FilePickerButton.react","OmnipickerPhotoGrid.react","PhotoSourceTypes","React","ReactDOM","Scroll"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={photoCount:0},this.renderInstructions=function(){return c("React").createElement("div",{className:"_1-nd"},c("React").createElement("div",null,c("React").createElement("div",{className:"_4zwc"},i._("Drag more photos"))),c("React").createElement("div",{className:"_4zwi"},c("React").createElement("span",{className:"_4zwe"}),i._("or"),c("React").createElement("span",{className:"_4zwe"})),c("React").createElement("div",{className:"_4zwf"},c("React").createElement(c("HTML5FilePickerButton.react"),{appID:this.props.appID})))}.bind(this),this.renderDragAndDropInstructions=function(){if(this.props.actionState!==c("ComputerPanelActionState").NEUTRAL)return c("React").createElement(c("DragDropInstructions.react"),{actionState:this.props.actionState,appID:this.props.appID,isOverlay:true})}.bind(this),this.renderPhotoGrid=function(){return c("React").createElement(c("OmnipickerPhotoGrid.react"),{appID:this.props.appID,photos:this.props.photoData,photoSourceType:c("PhotoSourceTypes").COMPUTER,supportsCancel:true})}.bind(this),o}m.prototype.UNSAFE_componentWillReceiveProps=function(n){"use strict";var o=Object.keys(n.photoData).length;this.setState({photoCount:o})};m.prototype.componentDidUpdate=function(n,o){"use strict";if(this.state.photoCount>o.photoCount){var p=c("ReactDOM").findDOMNode(this.refs.pickerBox);c("Scroll").setTop(p,p.scrollHeight)}};m.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement("div",{className:"_1x-l"},c("React").createElement("div",{className:"_1-ne _1-nf",ref:"pickerBox"},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions())};m.propTypes={actionState:l.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:l.string.isRequired,photoData:l.object.isRequired};f.exports=m}),null);
__d("ComputerPanel.react",["ComputerPanelActionState","DragDropFilePicker","EmptyPanel.react","FilePickerEvent","HTML5UploadAdapter","React","OmnipickerConfig","OmnipickerPanelMixin.react","OmnipickerUploadSession","PhotosMimeType","PhotoPanel.react","PhotoSourceTypes","PUWMethods","PUWUploaders","SelectionSource"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").createClass({displayName:"ComputerPanel",mixins:[c("OmnipickerPanelMixin.react")],statics:{getAdapter:function i(j,k){var l=c("OmnipickerConfig").FILE_UPLOAD_URI;if(k&&k.fileUploadURI)l=k.fileUploadURI;return new(c("HTML5UploadAdapter"))({uri:l,maxRetries:c("OmnipickerConfig").HTML5_UPLOADER_MAX_RETRIES,maxParallel:c("OmnipickerConfig").HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:j.getWaterfallID(),waterfallApp:j.getWaterfallAppName(),waterfallUploader:c("PUWUploaders").HTML5})}},getDefaultProps:function i(){return{selectionSource:c("SelectionSource").FILE,sourceType:c("PhotoSourceTypes").COMPUTER}},getInitialState:function i(){return{actionState:c("ComputerPanelActionState").NEUTRAL}},componentDidMount:function i(){this.picker=new(c("DragDropFilePicker"))(document.documentElement,{onDocumentDragEnterCallback:function(){this.setState({actionState:c("ComputerPanelActionState").DROP})}.bind(this),onDocumentDragLeaveCallback:function(){this.setState({actionState:c("ComputerPanelActionState").NEUTRAL})}.bind(this),isFileValid:function j(k){return c("PhotosMimeType").isImage(k.type)}});c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,c("PhotoSourceTypes").COMPUTER,c("PUWMethods").DRAGDROP);this.picker.subscribe(c("FilePickerEvent").SELECTED,this.onFilesDropped)},componentWillUnmount:function i(){this.picker.disable();c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},onFilesDropped:function i(j){this.setState({actionState:c("ComputerPanelActionState").NEUTRAL})},renderEmptyPanel:function i(){return c("React").createElement(c("EmptyPanel.react"),{actionState:this.state.actionState,appID:this.props.appID})},renderPhotoPanel:function i(){return c("React").createElement(c("PhotoPanel.react"),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData})},render:function i(){var j=Object.keys(this.props.photoData).length,k=j===0?this.renderEmptyPanel():this.renderPhotoPanel();return c("React").createElement("div",null,k)}});f.exports=h}),null);
__d("OmnipickerLoggerStore",["invariant","OmnipickerActions","FluxStore","OmnipickerDispatcher","PUWSteps"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("OmnipickerActions").types;i=babelHelpers.inherits(l,c("FluxStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.__moduleID=f.id;this.$OmnipickerLoggerStore1={}}l.prototype.__onDispatch=function(m){__p&&__p();if(m.type===k.APP_INITIALIZED){m.logger||h(0);this.$OmnipickerLoggerStore1[m.appID]=m.logger;return}var n=this.$OmnipickerLoggerStore1[m.appID];n||h(0);switch(m.type){case k.FILE_PICKER_SELECT_STARTED:case k.FILE_PICKER_SELECTED:case k.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(m,n);break;case k.RESIZE_STARTED:n.logStep(c("PUWSteps").CLIENT_UPLOAD_BEGIN);n.logStep(c("PUWSteps").CLIENT_PROCESS_BEGIN);break;case k.RESIZE_SUCCEEDED:n.logStep(c("PUWSteps").CLIENT_PROCESS_SUCCESS,{dt:m.dt,bytes:m.bytes,media_data_size:m.originalSize,custom_tags:m.customTags});break;case k.RESIZE_FAILED:n.logStep(c("PUWSteps").CLIENT_PROCESS_FAIL,{dt:m.dt,bytes:m.bytes,error_code:m.errorCode});break;case k.UPLOAD_STARTED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_BEGIN,{bytes:m.bytes,ref:m.source});break;case k.UPLOAD_FINISHED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_SUCCESS,{auto_retry_count:m.retriesNeeded,ref:m.source});n.logStep(c("PUWSteps").CLIENT_UPLOAD_SUCCESS,{fbid:m.fbid,ref:m.source});break;case k.UPLOAD_FAILED:n.logStep(c("PUWSteps").CLIENT_UPLOAD_FAIL,{auto_retry_count:m.retriesNeeded,error_code:m.errorCode,ref:m.source});break;case k.UPLOAD_QUEUED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_BATCH_BEGIN,{ref:m.source,volume:m.volume});break;default:}};l.prototype.$OmnipickerLoggerStore2=function(m,n){__p&&__p();var o=void 0;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:o=c("PUWSteps").CLIENT_SELECT_BEGIN;break;case k.FILE_PICKER_SELECTED:o=c("PUWSteps").CLIENT_SELECT_SUCCESS;break;case k.FILE_PICKER_SELECT_CANCELED:o=c("PUWSteps").CLIENT_SELECT_CANCEL;break;default:h(0)}var p=m.method,q=m.ref;n.logStep(o,{method:p,ref:q})};f.exports=new l(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerPanelList.react",["cx","ix","Image.react","OmnipickerActions","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.UNSAFE_componentWillMount=function(){"use strict";c("React").Children.forEach(this.props.children,function(n){if(!n)return;var o=this.props.appID;c("OmnipickerActions").panelInitialized(o,n.props.sourceType)}.bind(this))};m.prototype.render=function(){"use strict";__p&&__p();var n=null;if(this.props.doneSelecting)n=c("React").createElement("div",{className:"_5e8d"},c("React").createElement("div",{className:"_5e8e"},c("React").createElement(c("Image.react"),{className:"_5e8o",src:i("95719")})));var o;if(this.props.children.length)o=this.props.children.find(function(p){if(!p)return false;return p.props.sourceType===this.props.selectedSourceType}.bind(this));else o=this.props.children;o=c("React").cloneElement(o,{photoData:this.props.photoData,appID:this.props.appID});return c("React").createElement("div",null,n,c("React").createElement("div",{className:"_5gfy"},o))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={appID:l.string,photoData:l.object,doneSelecting:l.bool,selectedSourceType:l.oneOf(Object.keys(c("PhotoSourceTypes")))};f.exports=m}),null);
__d("OmnipickerPhotoSourceStore",["OmnipickerActions","FluxStore","OmnipickerDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("OmnipickerActions").types;h=babelHelpers.inherits(k,c("FluxStore"));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.__moduleID=f.id;this.$OmnipickerPhotoSourceStore1={}}k.prototype.__onDispatch=function(l){switch(l.type){case j.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[l.appID]={currentSource:l.initialSource};break;case j.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[l.appID].currentSource=l.source;this.__emitChange();break;default:return}};k.prototype.getCurrentSource=function(l){return this.$OmnipickerPhotoSourceStore1[l].currentSource};f.exports=new k(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerPhotoStore",["invariant","OmnipickerActions","FluxStore","OmnipickerDispatcher","OmnipickerPhotoUploadState"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("OmnipickerActions").types;i=babelHelpers.inherits(l,c("FluxStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.__moduleID=f.id;this.$OmnipickerPhotoStore1={}}l.prototype.__onDispatch=function(m){__p&&__p();m.appID||h(0);var n=this.$OmnipickerPhotoStore1[m.appID];if(n){var o=n.deletedPhotos;if(o&&o[m.id])return}switch(m.type){case k.APP_INITIALIZED:this.$OmnipickerPhotoStore2(m);return;case k.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(m);return;case k.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(m);break;case k.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(m);break;case k.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(m);break;case k.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(m);break;case k.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(m);break;case k.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(m);break;case k.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(m);break;case k.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(m);break;case k.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(m);break;default:return}this.__emitChange()};l.prototype.getState=function(m){var n=this.$OmnipickerPhotoStore1[m];return{numPhotosSelected:this.$OmnipickerPhotoStore13(n).length,photosOptimisticallyUploading:n.photosOptimisticallyUploading,photosWaitingForUpload:n.photosWaitingForUpload,photoData:n.photos}};l.prototype.getSelectedPhotos=function(m){var n=this.$OmnipickerPhotoStore1[m];return this.$OmnipickerPhotoStore13(n,n.uploadOrder).filter(function(o){return o.fbid!==""})};l.prototype.$OmnipickerPhotoStore13=function(m,n){var o=n||m.photos,p=[];Object.keys(m.photos).forEach(function(q){var r=Array.isArray(o[q])?o[q]:Object.keys(o[q]);r.forEach(function(s){var t=this.$OmnipickerPhotoStore14(m,q,s);if(t.checked)if(t)p.push(t)}.bind(this))}.bind(this));return p};l.prototype.$OmnipickerPhotoStore14=function(m,n,o){var p=m.photos;p[n]||h(0);var q=p[n][o];q||h(0);return q};l.prototype.$OmnipickerPhotoStore15=function(m){this.$OmnipickerPhotoStore16(m,["source","id"]);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[m.appID],m.source,m.id)};l.prototype.$OmnipickerPhotoStore17=function(m,n){Object.prototype.hasOwnProperty.call(m,n)||h(0);m[n]!==undefined&&m[n]!==null||h(0)};l.prototype.$OmnipickerPhotoStore16=function(m,n){n.push("appID");n.forEach(function(o){return this.$OmnipickerPhotoStore17(m,o)}.bind(this))};l.prototype.$OmnipickerPhotoStore18=function(m,n,o){var p=m.photos;p[n]||h(0);!p[n][o]||h(0);m.uploadOrder[n].push(o);return p[n][o]={id:o,checked:false,fbid:"",progress:0,src:"",uploadState:c("OmnipickerPhotoUploadState").NOT_STARTED}};l.prototype.$OmnipickerPhotoStore19=function(m,n){m.photosWaitingForUpload[n.id]=true};l.prototype.$OmnipickerPhotoStore2=function(m){var n=m.appID;!this.$OmnipickerPhotoStore1[n]||h(0);this.$OmnipickerPhotoStore1[n]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{}}};l.prototype.$OmnipickerPhotoStore5=function(m){var n=this.$OmnipickerPhotoStore15(m);n.checked=true;var o=this.$OmnipickerPhotoStore1[m.appID];o.photosOptimisticallyUploading[m.id]=true};l.prototype.$OmnipickerPhotoStore6=function(m){this.$OmnipickerPhotoStore16(m,["checked"]);var n=this.$OmnipickerPhotoStore15(m);n.checked=m.checked};l.prototype.$OmnipickerPhotoStore3=function(m){this.$OmnipickerPhotoStore16(m,["source"]);var n=this.$OmnipickerPhotoStore1[m.appID];n.photos[m.source]={};n.uploadOrder[m.source]=[]};l.prototype.$OmnipickerPhotoStore20=function(m,n,o,p){if(p===c("OmnipickerPhotoUploadState").FAILED||m.photosOptimisticallyUploading[o])return;n.checked=true};l.prototype.$OmnipickerPhotoStore21=function(m,n,o,p){n.uploadState=p;delete m.photosWaitingForUpload[o];delete m.photosOptimisticallyUploading[o]};l.prototype.$OmnipickerPhotoStore22=function(m,n,o){var p=n.id;delete m.photos[o][p];delete m.photosWaitingForUpload[p];delete m.photosOptimisticallyUploading[p];var q=m.uploadOrder[o].indexOf(p);m.uploadOrder[o].splice(q,1);m.deletedPhotos[p]=true};l.prototype.$OmnipickerPhotoStore4=function(m){this.$OmnipickerPhotoStore17(m,"photos");var n=this.$OmnipickerPhotoStore1[m.appID];m.photos.forEach(function(o){var p=o.source,q=o.id,r=o.src,s=this.$OmnipickerPhotoStore18(n,p,q);s.src=r}.bind(this))};l.prototype.$OmnipickerPhotoStore7=function(m){var n=this.$OmnipickerPhotoStore15(m);this.$OmnipickerPhotoStore22(this.$OmnipickerPhotoStore1[m.appID],n,m.source)};l.prototype.$OmnipickerPhotoStore8=function(m){var n=this.$OmnipickerPhotoStore1[m.appID];this.$OmnipickerPhotoStore21(n,this.$OmnipickerPhotoStore15(m),m.id,c("OmnipickerPhotoUploadState").FAILED)};l.prototype.$OmnipickerPhotoStore9=function(m){this.$OmnipickerPhotoStore16(m,["src","fbid"]);var n=m.appID,o=m.id,p=m.src,q=m.fbid,r=this.$OmnipickerPhotoStore1[n],s=this.$OmnipickerPhotoStore15(m),t=c("OmnipickerPhotoUploadState").DONE;this.$OmnipickerPhotoStore20(r,s,o,t);this.$OmnipickerPhotoStore21(r,s,o,t);s.src=p;s.fbid=q};l.prototype.$OmnipickerPhotoStore10=function(m){this.$OmnipickerPhotoStore17(m,"progress");var n=this.$OmnipickerPhotoStore15(m);n.progress=100};l.prototype.$OmnipickerPhotoStore12=function(m){var n=this.$OmnipickerPhotoStore15(m);n.uploadState=c("OmnipickerPhotoUploadState").UPLOADING};l.prototype.$OmnipickerPhotoStore11=function(m){this.$OmnipickerPhotoStore16(m,["source","ids"]);var n=m.source,o=this.$OmnipickerPhotoStore1[m.appID],p=m.ids;p.forEach(function(q){return this.$OmnipickerPhotoStore19(o,this.$OmnipickerPhotoStore18(o,n,q))}.bind(this))};f.exports=new l(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerWaterfallLogger",["PhotosUploadWaterfallXMixin","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("PhotosUploadWaterfallXMixin")));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this);this.$OmnipickerWaterfallLogger1=k;this.$OmnipickerWaterfallLogger2=l}j.prototype.getWaterfallAppName=function(){"use strict";return this.$OmnipickerWaterfallLogger1};j.prototype.getWaterfallID=function(){"use strict";return this.$OmnipickerWaterfallLogger2};f.exports=j}),null);
__d("Omnipicker.react",["invariant","ClientIDs","OmnipickerActions","OmnipickerPanelList.react","OmnipickerPhotoSourceStore","OmnipickerPhotoStore","OmnipickerUploadController","OmnipickerUploadSession","OmnipickerWaterfallLogger","React","SubscriptionsHandler","Waiter","OmnipickerLoggerStore"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;c("OmnipickerLoggerStore");c("OmnipickerPhotoSourceStore");c("OmnipickerPhotoStore");var k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={numPhotosSelected:0,numPhotosUploading:0,photoData:{}},this.handlePhotosChangeEvent=function(){__p&&__p();var r=c("OmnipickerPhotoStore").getState(this.state.appID),s=Object.keys(r.photosWaitingForUpload).length,t=Object.keys(r.photosOptimisticallyUploading).length;if(t>0){if(!this.$Omnipicker3)this.$Omnipicker3=this.$Omnipicker2.wait()}else if(this.$Omnipicker3){this.$Omnipicker3.call(this);this.$Omnipicker3=null}this.setState({numPhotosSelected:r.numPhotosSelected,numPhotosUploading:s,photoData:r.photoData});this.props.onPhotosChange&&this.props.onPhotosChange(r.numPhotosSelected,s)}.bind(this),this.handleSourceChangeEvent=function(){this.setState({sourceType:c("OmnipickerPhotoSourceStore").getCurrentSource(this.state.appID)})}.bind(this),n}l.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();var m="Omnipicker_ID_"+c("ClientIDs").getNewClientID();c("OmnipickerUploadController").registerOmnipicker(m);c("OmnipickerUploadSession").registerOmnipicker(m);var n=[];c("React").Children.forEach(this.props.children,function(q){if(q.type===c("OmnipickerPanelList.react"))n.push(c("React").cloneElement(q,{appID:m}))});n.length===1||h(0);var o=n[0],p=null;c("React").Children.forEach(o.props.children,function(q){if(!q)return;if(!p||q.props.isSelected)p=q.props.sourceType;if(q.type.getAdapter)c("OmnipickerUploadController").registerAdapter(m,q.type.getAdapter(this.props.logger,q.props.config),q.props.selectionSource)}.bind(this));!!p||h(0);this.setState({appID:m,sourceType:p});c("OmnipickerActions").appInitialized(m,this.props.logger,p)};l.prototype.componentDidMount=function(){"use strict";this.$Omnipicker1=new(c("SubscriptionsHandler"))();this.$Omnipicker1.addSubscriptions(c("OmnipickerPhotoStore").addListener(this.handlePhotosChangeEvent),c("OmnipickerPhotoSourceStore").addListener(this.handleSourceChangeEvent));this.$Omnipicker2=new(c("Waiter"))(function(){this.props.onDoneSelecting(c("OmnipickerPhotoStore").getSelectedPhotos(this.state.appID),this.state.sourceType)}.bind(this))};l.prototype.componentWillUnmount=function(){"use strict";this.$Omnipicker1.release()};l.prototype.componentDidUpdate=function(){"use strict";if(this.props.doneSelecting)this.$Omnipicker2.go()};l.prototype.render=function(){"use strict";var m=c("React").Children.map(this.props.children,function(n){var o={selectedSourceType:this.state.sourceType,appID:this.state.appID};if(n.type===c("OmnipickerPanelList.react"))Object.assign(o,{photoData:this.state.photoData[this.state.sourceType]||{},doneSelecting:this.props.doneSelecting});return c("React").cloneElement(n,o)}.bind(this));return c("React").createElement("div",null,m)};l.propTypes={doneSelecting:k.bool.isRequired,logger:k.instanceOf(c("OmnipickerWaterfallLogger")).isRequired,onDoneSelecting:k.func.isRequired,onPhotosChange:k.func};l.defaultProps={doneSelecting:false};f.exports=l}),null);
__d("OmnipickerSelector.react",["cx","OmnipickerActions","PhotoSourceTypes","React","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){c("OmnipickerActions").photoSourceSelected(this.props.appID,this.props.sourceType)}.bind(this),n}l.prototype.render=function(){"use strict";return c("React").createElement("li",{className:"_1ys7"},c("React").createElement(c("ShimButton.react"),{className:"_1ys8"+(this.props.isSelected?" selected":""),onClick:this.onClick},c("React").createElement("div",{className:"_1ys9"},c("React").createElement("span",{className:c("joinClasses")("_1ysb",this.props.iconClass)}),c("React").createElement("span",{className:"_1ysc"},this.props.children))))};l.propTypes={appID:k.string.isRequired,iconClass:k.string.isRequired,isSelected:k.bool.isRequired,sourceType:k.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired};f.exports=l}),null);
__d("OmnipickerComputerSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){"use strict";return c("React").createElement(c("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_5o68"},this.props),this.props.labelText)};function m(){"use strict";j.apply(this,arguments)}m.propTypes={labelText:l.string};m.defaultProps={sourceType:c("PhotoSourceTypes").COMPUTER,labelText:i._("Computer")};f.exports=m}),null);
__d("OmnipickerDialog.react",["cx","fbt","DOM","Event","Keys","Link.react","OmnipickerConfig","React","SubscriptionsHandler","XUICloseButton.react","XUIDialog.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={doneSelecting:false,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0},this.getButtonLabel=function(){var s=this.state.numPhotosSelected;if(s===1)return i._("Use Photo");if(s>1)return i._("Use Photos ({number})",[i._param("number",s)]);return i._("Use Photos")}.bind(this),this.handleUsePhotos=function(){this.setState({doneSelecting:true})}.bind(this),this.handleKeyDownEvent=function(event){if(c("Event").getKeyCode(event)===c("Keys").ESC)this.props.onCancel()}.bind(this),this.handlePhotosChange=function(s,t){this.setState({numPhotosSelected:s,numPhotosUploading:t})}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.$OmnipickerDialog1=new(c("SubscriptionsHandler"))();this.$OmnipickerDialog1.addSubscriptions(c("Event").listen(document,"keydown",this.handleKeyDownEvent))};m.prototype.componentWillUnmount=function(){"use strict";this.$OmnipickerDialog1.release()};m.prototype.render=function(){"use strict";var n=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,o=null;if(c("OmnipickerConfig").FEEDBACK_GROUP_PATH)o=c("React").createElement("div",{className:"_2srv"},c("React").createElement(c("Link.react"),{href:c("OmnipickerConfig").FEEDBACK_GROUP_PATH,target:"_blank"},"Omnipicker Feedback Group"));var p=c("React").Children.only(this.props.children);p=c("React").cloneElement(p,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return c("React").createElement(c("XUIDialog.react"),{shown:true,layerHideOnBlur:false,width:c("OmnipickerConfig").DIALOG_WIDTH,key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},c("React").createElement("span",null,this.props.title),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Close"),onClick:this.props.onCancel})),p,c("React").createElement("div",{className:"_3bnc"},c("React").createElement(c("XUIDialogFooter.react"),{className:"_3bnd",leftContent:o},c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Cancel"),onClick:this.props.onCancel,size:"xlarge"}),c("React").createElement(c("XUIDialogButton.react"),{className:"_3bne",use:"confirm",action:"confirm",size:"xlarge",disabled:n,label:this.getButtonLabel(),onClick:this.handleUsePhotos}))))};m.propTypes={onCancel:l.func.isRequired,title:l.string.isRequired};f.exports=m}),null);
__d("OmnipickerDialogRenderer",["DOM","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$OmnipickerDialogRenderer1=i;this.$OmnipickerDialogRenderer2=i.props.$OmnipickerDialogRenderer2;if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c("DOM").create("div");c("DOM").appendContent(document.body,this.$OmnipickerDialogRenderer2)}}h.prototype.show=function(){if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c("DOM").create("div");c("DOM").appendContent(document.body,this.$OmnipickerDialogRenderer2)}c("ReactDOM").render(this.$OmnipickerDialogRenderer1,this.$OmnipickerDialogRenderer2)};h.prototype.hide=function(){c("ReactDOM").unmountComponentAtNode(this.$OmnipickerDialogRenderer2);c("DOM").remove(this.$OmnipickerDialogRenderer2);this.$OmnipickerDialogRenderer2=null};h.prototype.isShowing=function(){return!!this.$OmnipickerDialogRenderer2};f.exports=h}),null);
__d("ExistingPhotoSelectionContainer",["BaseSelectionContainer"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("BaseSelectionContainer"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this);this.$ExistingPhotoSelectionContainer1=k;this.$ExistingPhotoSelectionContainer2=l;this.$ExistingPhotoSelectionContainer3=m}j.prototype.getExistingImageID=function(){"use strict";return this.$ExistingPhotoSelectionContainer1};j.prototype.getSrc=function(){"use strict";return this.$ExistingPhotoSelectionContainer2};j.prototype.getSource=function(){"use strict";return this.$ExistingPhotoSelectionContainer3};j.prototype.hasPlaceholderUI=function(){"use strict";return true};f.exports=j}),null);
__d("ExistingPhotoPicker",["ArbiterMixin","mixin","FilePickerEvent","ExistingPhotoSelectionContainer"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$ExistingPhotoPicker1=k}j.prototype.begin=function(){"use strict";this.inform(c("FilePickerEvent").BEGIN)};j.prototype.select=function(k,l){"use strict";this.inform(c("FilePickerEvent").SELECTED,{sender:this,selections:[new(c("ExistingPhotoSelectionContainer"))(k,l,this.$ExistingPhotoPicker1)]})};f.exports=j}),null);
__d("OmnipickerExistingPhotosPanelMixin.react",["cx","invariant","ExistingPhotoPicker","OmnipickerActions","OmnipickerPanelMixin.react","OmnipickerPhotoGrid.react","OmnipickerUploadSession","PhotoStore","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k={mixins:[c("OmnipickerPanelMixin.react")],propTypes:{initBatchSize:j.number,pageBatchSize:j.number,puwMethod:j.string.isRequired,setID:j.string.isRequired},UNSAFE_componentWillMount:function l(){typeof this.getViewState==="function"||i(0);this.picker=new(c("ExistingPhotoPicker"))(this.props.selectionSource);c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod)},componentDidMount:function l(){this.getViewState().initViewState();this.picker.begin()},componentWillUnmount:function l(){this.getViewState().destroy();c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},render:function l(){return c("React").createElement("div",null,this.getThrobber(),this.getPhotoGrid())},onViewStateChanged:function l(m){c("OmnipickerActions").existingPhotosFetched(this.props.appID,this.props.sourceType,m.media.filter(function(n){return!this.props.photoData[n.id]}.bind(this)))},onPhotoSelected:function l(m){this.picker.select(m,this.props.photoData[m].src);return false},getPhotoGrid:function l(){if(!c("PhotoStore").hasBeenCreated(this.props.setID))return null;var m=null;if(!c("PhotoStore").hasBeenCreated(this.props.setID)||c("PhotoStore").hasNextPage(this.props.setID))m=function(){this.getViewState().fetchMore()}.bind(this);return c("React").createElement(c("OmnipickerPhotoGrid.react"),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:m,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:false})},getThrobber:function l(){if(c("PhotoStore").hasBeenCreated(this.props.setID))return null;return c("React").createElement("div",{className:"_j0-"})}};f.exports=k}),null);
__d("ScrollablePhotoViewStateCore",["SubscriptionsHandler","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";__p&&__p();this.$ScrollablePhotoViewStateCore1=i.photoStore;this.$ScrollablePhotoViewStateCore2=i.viewer;this.$ScrollablePhotoViewStateCore3=i.setToken;this.$ScrollablePhotoViewStateCore4=i.updateCallback;this.$ScrollablePhotoViewStateCore5=i.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=i.fetchInitData;this.$ScrollablePhotoViewStateCore7=i.initBatchSize;this.$ScrollablePhotoViewStateCore8=i.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new(c("SubscriptionsHandler"))()}h.prototype.initViewState=function(){"use strict";this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var i=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(i>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3)};h.prototype.hasNextPage=function(){"use strict";return this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3)};h.prototype.fetchToIndex=function(i){"use strict";var j=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),k=i-j;if(k<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,j,k,c("emptyFunction"))};h.prototype.fetchMore=function(i){"use strict";if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,i||c("emptyFunction"))};h.prototype.destroy=function(){"use strict";this.$ScrollablePhotoViewStateCore9.release()};h.prototype.updateData=function(i){"use strict";if(i.set_id!=this.$ScrollablePhotoViewStateCore3)return;var j=i.query_results&&i.query_results.result_type;if(j=="init")this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState()}.bind(this));else this.syncState()};f.exports=h}),null);
__d("fetchInitPhotoViewState",["AsyncRequest"],(function a(b,c,d,e,f,g){function h(i,j){new(c("AsyncRequest"))(i).setData({set:j}).send()}f.exports=h}),null);
__d("subscribeToArbiterUpdatePhotos",["Arbiter"],(function a(b,c,d,e,f,g){function h(i){return c("Arbiter").subscribe("update-photos",function(j,k){i(k)})}f.exports=h}),null);
__d("OmnipickerExistingPhotosViewState",["PhotoStore","ScrollablePhotoViewStateCore","subscribeToArbiterUpdatePhotos","fetchInitPhotoViewState"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;function j(l,m){c("fetchInitPhotoViewState")(l,m)}h=babelHelpers.inherits(k,c("ScrollablePhotoViewStateCore"));i=h&&h.prototype;function k(l,m,n,o,p,q){"use strict";i.constructor.call(this,{fetchInitData:j.bind(null,p),initBatchSize:n,pageBatchSize:o,photoStore:c("PhotoStore"),setToken:m,subscribeUpdatePhotos:c("subscribeToArbiterUpdatePhotos"),updateCallback:q,viewer:l});this.$OmnipickerExistingPhotosViewState1=n;this.$OmnipickerExistingPhotosViewState2=m;this.$OmnipickerExistingPhotosViewState3=q}k.prototype.syncState=function(){"use strict";this.$OmnipickerExistingPhotosViewState3({media:c("PhotoStore").getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:c("PhotoStore").hasNextPage(this.$OmnipickerExistingPhotosViewState2)})};f.exports=k}),null);
__d("XPagesManagerPostedPhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/posted_photos/",{set:{type:"String",required:true},size:{type:"Int",required:true}})}),null);
__d("OmnipickerPagePostedPhotosPanel.react",["ActorURI","OmnipickerConfig","OmnipickerExistingPhotosPanelMixin.react","OmnipickerExistingPhotosViewState","PhotoSourceTypes","PUWMethods","React","SelectionSource","XPagesManagerPostedPhotosController"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"OmnipickerPagePostedPhotosPanel",mixins:[c("OmnipickerExistingPhotosPanelMixin.react")],_viewState:null,propTypes:{pageID:h.string.isRequired},getDefaultProps:function j(){return{initBatchSize:20,pageBatchSize:16,puwMethod:c("PUWMethods").RECENT_PHOTOS,selectionSource:c("SelectionSource").PAGES_POSTED_PHOTOS,setID:c("OmnipickerConfig").POSTED_PHOTOS_SET_ID,sourceType:c("PhotoSourceTypes").PAGES_POSTED_PHOTOS}},UNSAFE_componentWillMount:function j(){var k=c("ActorURI").create(c("XPagesManagerPostedPhotosController").getURIBuilder().setString("set",this.props.setID).setInt("size",this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new(c("OmnipickerExistingPhotosViewState"))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,k,this.onViewStateChanged)},getViewState:function j(){return this._viewState}});f.exports=i}),null);
__d("OmnipickerPagePostedPhotosSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){return c("React").createElement(c("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_2_y4"},this.props),this.props.labelText)};function m(){j.apply(this,arguments)}m.propTypes={labelText:l.node};m.defaultProps={sourceType:c("PhotoSourceTypes").PAGES_POSTED_PHOTOS,labelText:i._("Page Photos")};f.exports=m}),null);
__d("OmnipickerSelectorList.react",["cx","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=c("React").Children.map(this.props.children,function(n){if(!n)return;return c("React").cloneElement(n,{isSelected:n.props.sourceType===this.props.selectedSourceType,appID:this.props.appID})}.bind(this));return c("React").createElement("div",{className:"_1n6_"},c("React").createElement("ul",null,m))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={appID:k.string,selectedSourceType:k.oneOf(Object.keys(c("PhotoSourceTypes")))};f.exports=l}),null);
__d("ProductVideoChunkedUploader",["AdsVideoUploadEvents","AdsVideoUploadSession","AdsVideoUploadUtil","URI","VideoUploader","VideoUploadProgressBar"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j="/v2.4",k="graph-video";h=babelHelpers.inherits(l,c("VideoUploader"));i=h&&h.prototype;function l(m){"use strict";var n=m.config,o=new(c("URI"))(j+"/"+m.target_id+"/videos?access_token="+m.access_token).setSubdomain(k).toString(),p={start_uri:o,receive_uri:o,post_uri:o,chunk_start_uri:o,chunk_receive_uri:o,chunk_post_uri:o,min_size:n.minSize,min_width:n.minWidth,min_height:n.minHeight,min_length:n.minLength,max_size:n.maxSize,max_length:n.maxLength,extensions:n.extensions,logging_delay:n.loggingDelay,max_transport_retries:n.maxTransportRetries,transport_retry_interval_base:n.transportRetryIntervalBase,max_server_retries:n.maxServerRetries,server_retry_interval_base:n.serverRetryIntervalBase,source:m.source,target_id:m.target_id,target_type:m.target_type};i.constructor.call(this,p);this.$ProductVideoChunkedUploader1=""}l.prototype.getUploadTime=function(){"use strict";if(this.__getSession()!==null)return this.__getSession().getUploadTime();return null};l.prototype.getEncodingTime=function(){"use strict";if(this.__getSession()!==null)return this.__getSession().getEncodingTime();return null};l.prototype.abort=function(){"use strict";this.cancel()};l.prototype.upload=function(m){"use strict";var n=m.getFile(),o=c("AdsVideoUploadUtil").getVideoTitle(n);this.$ProductVideoChunkedUploader1=o?o:"";i.upload.call(this,m)};l.prototype.__getVideoUploadSession=function(m){"use strict";return new(c("AdsVideoUploadSession"))(m)};l.prototype.getVideoTitle=function(){"use strict";return this.$ProductVideoChunkedUploader1};l.prototype.__createSession=function(m){"use strict";return new(c("AdsVideoUploadSession"))(m)};l.prototype.__getEventsWhichShouldListenFromSession=function(){"use strict";var m=i.__getEventsWhichShouldListenFromSession.call(this);m.push(c("AdsVideoUploadEvents").ENCODING_SUCCESS,c("AdsVideoUploadEvents").ENCODING_ERROR);return m};l.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){"use strict";return["upload-failed",c("AdsVideoUploadEvents").ENCODING_SUCCESS,c("AdsVideoUploadEvents").ENCODING_ERROR]};l.prototype.__delegateEvent=function(event,m){"use strict";__p&&__p();var n=null;if(event==="upload-progressed"){var o=c("VideoUploadProgressBar").computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);n=o/100}else if(event==="upload-finished")this.post({});else if(event==="post-finished")n=m.video_id;else if(event==="post-failed")event="upload-failed";i.__delegateEvent.call(this,event,n)};f.exports=l}),null);
__d("PageContentTabProductUploadVideoButton.react",["cx","fbt","AdsVideoUploadConfig","AdsVideoUploadEvents","AsyncRequest","FileInput.react","GraphAPI","Link.react","ProductVideoChunkedUploader","React","VideoUploadFile","VideoUploadTargetType","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e3,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={videoUploaders:[],lastEncodingStatusCheckTimes:[]},this.$PageContentTabProductUploadVideoButton1=function(){__p&&__p();var t=this.refs.fileInput.getFileInput().getInput(),u=c("VideoUploadFile").fromFileInput(t),v=new(c("ProductVideoChunkedUploader"))({config:c("AdsVideoUploadConfig"),source:"product_edit_tool",target_id:this.props.productCatalogID,target_type:c("VideoUploadTargetType").PRODUCT_CATALOG,access_token:this.props.pageContentTabAccessToken}),w=this.state.videoUploaders.length;v.subscribe("upload-failed",this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe(c("AdsVideoUploadEvents").UPLOAD_ERROR,this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe("post-failed",this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe("post-finished",this.$PageContentTabProductUploadVideoButton3.bind(this,w));this.props.onVideoSelected(w);v.upload(u);var x=this.state.videoUploaders;x[w]=v;this.setState({videoUploaders:x})}.bind(this),this.$PageContentTabProductUploadVideoButton2=function(t){this.props.onVideoUploadError(t)}.bind(this),this.$PageContentTabProductUploadVideoButton3=function(t){this.$PageContentTabProductUploadVideoButton4(t)}.bind(this),this.$PageContentTabProductUploadVideoButton5=function(t){var u=this.$PageContentTabProductUploadVideoButton6(t),v=this.state.lastEncodingStatusCheckTimes;v[t]=Date.now();this.setState({lastEncodingStatusCheckTimes:v});new(c("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:u}).setHandler(this.$PageContentTabProductUploadVideoButton7.bind(this,t)).send()}.bind(this),this.$PageContentTabProductUploadVideoButton8=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.data;if(w)for(var x=0;x<w.length;x++)if(w[x].is_preferred){this.props.onVideoUploadFinished(t,v,w[x].uri);return}}.bind(this),this.$PageContentTabProductUploadVideoButton6=function(t){return this.state.videoUploaders[t].getUploadSession().getVideoID()}.bind(this),p}n.prototype.render=function(){return c("React").createElement(c("FileInput.react"),{name:"video",ref:"fileInput",onChange:this.$PageContentTabProductUploadVideoButton1},c("React").createElement(c("Link.react"),{className:"_25dc"},c("React").createElement("div",{className:"_25dd _25de"},c("React").createElement(c("XUIGrayText.react"),{className:"_25df",size:"meta1",display:"block"},i._("Add Videos")))))};n.prototype.$PageContentTabProductUploadVideoButton4=function(o){var p=this.state.lastEncodingStatusCheckTimes[o]+l,q=Math.max(0,p-Date.now());setTimeout(this.$PageContentTabProductUploadVideoButton5.bind(this,o),q)};n.prototype.$PageContentTabProductUploadVideoButton7=function(o,p){var q=this.$PageContentTabProductUploadVideoButton6(o),r=p.payload;if(r)if(r.is_ready)c("GraphAPI")("2.3").object("video",q).edge("thumbnails").get({access_token:this.props.pageContentTabAccessToken}).done(this.$PageContentTabProductUploadVideoButton8.bind(this,o));else if(r.error)this.$PageContentTabProductUploadVideoButton2(o);else this.$PageContentTabProductUploadVideoButton4(o)};n.propTypes={onVideoSelected:m.func.isRequired,onVideoUploadError:m.func.isRequired,onVideoUploadFinished:m.func.isRequired,pageContentTabAccessToken:m.string.isRequired,productCatalogID:m.string.isRequired};f.exports=n}),null);
__d("XPagesManagerProductPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/upload/file/product/photo/",{waterfall_id:{type:"String"}})}),null);
__d("PageProductPhotoEditButton.react",["cx","fbt","ActorURI","Arbiter","AsyncRequest","BOFSellerLogger","BOFSellerLoggerEvent","ReactComposerPhotoActions","PhotoEditorTargetType","XPagesManagerProductPhotoUploadController","React","Tooltip","XComposerPhotoUploader","XStickerPhotoEditorController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){c("Arbiter").subscribe("PageProductPhotoEditor/newImage"+this.props.composerID,this.$PageProductPhotoEditButton2.bind(this))};m.prototype.render=function(){var n=i._("Edit Photo");return c("React").createElement("button",babelHelpers["extends"]({className:"_k4v",onClick:this.$PageProductPhotoEditButton3.bind(this)},c("Tooltip").propsFor(n)),c("React").createElement("div",{className:"_k4w"}))};m.prototype.$PageProductPhotoEditButton3=function(){__p&&__p();if(this.$PageProductPhotoEditButton1)return;c("BOFSellerLogger").log(c("BOFSellerLoggerEvent").ACTN_EDIT_PHOTO_CLICK,this.props.pageID,{target_class:"Photo",target_id:this.props.photoID});var n=void 0,o=void 0;if(this.props.photoID==parseInt(this.props.photoID,10)){n=parseInt(this.props.photoID,10);o=""}else{n=0;o=this.props.photoID}var p=c("ActorURI").create(c("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.props.composerID).setEnum("target_type",c("PhotoEditorTargetType").PAGE_PRODUCT_COMPOSER).setInt("photo_fbid",n).setString("encrypted_photo_id",o).getURI(),this.props.pageID);this.$PageProductPhotoEditButton1=new(c("AsyncRequest"))(p).setFinallyHandler(function(){this.$PageProductPhotoEditButton1=null}.bind(this)).send();c("ReactComposerPhotoActions").startPhotoEdit(this.props.composerID,null)};m.prototype.$PageProductPhotoEditButton2=function(n,o){var p=c("ActorURI").create(c("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID),q=o.encryptedID||o.fbid,r=new(c("XComposerPhotoUploader"))({uploadEndpoint:p,onUploadSuccess:function(n,s){this.props.onPhotoEdited(q,s.response.payload[0])}.bind(this)});r.getAsyncUploadRequest([o.blob]).send()};function m(){j.apply(this,arguments)}m.propTypes={composerID:l.string.isRequired,onPhotoEdited:l.func.isRequired,pageID:l.string.isRequired,photoID:l.string.isRequired};f.exports=m}),null);
__d("PageContentTabProductPhotoUploader.react",["cx","fbt","invariant","ActorURI","AudienceManagerEngagementVideoSelectionError.react","Image.react","Link.react","Omnipicker.react","ComputerPanel.react","OmnipickerComputerSelector.react","OmnipickerDialog.react","OmnipickerDialogRenderer","OmnipickerPagePostedPhotosPanel.react","OmnipickerPagePostedPhotosSelector.react","OmnipickerPanelList.react","OmnipickerSelectorList.react","OmnipickerWaterfallLogger","PageContentTabProductUploadVideoButton.react","PageProductPhotoEditButton.react","XPagesManagerProductPhotoUploadController","PUWApplications","PUWSteps","React","WaterfallIDGenerator","XUICloseButton.react","XUIError.react","XUIGrayText.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"PageContentTabProductPhotoUploader",_waterfallLogger:c("OmnipickerWaterfallLogger"),propTypes:{className:k.string,maxPhotosCount:k.number,pageID:k.string.isRequired,onPhotoEdited:k.func,onPhotosSelected:k.func.isRequired,onPhotoRemoved:k.func.isRequired,photos:k.array.isRequired,photoEditingEnabled:k.bool.isRequired,productCatalogID:k.string,pageContentTabAccessToken:k.string,videos:k.array,onVideoSelected:k.func,onVideoUploadFinished:k.func,onVideoUploadError:k.func,onVideoRemoved:k.func,showVideoUploadButton:k.bool,xuiError:k.any},getInitialState:function m(){var n={fileUploadURI:c("ActorURI").create(c("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID)};this._waterfallLogger=new(c("OmnipickerWaterfallLogger"))(c("PUWApplications").WEB_PRODUCT_PHOTO_OMNIPICKER,c("WaterfallIDGenerator").generate());return{dialogRenderer:new(c("OmnipickerDialogRenderer"))(c("React").createElement(c("OmnipickerDialog.react"),{onCancel:this.onPickerCancel,title:i._("Select Photo")},c("React").createElement(c("Omnipicker.react"),{logger:this._waterfallLogger,onDoneSelecting:this.onPickerAddPhotos},c("React").createElement(c("OmnipickerSelectorList.react"),null,c("React").createElement(c("OmnipickerComputerSelector.react"),null),c("React").createElement(c("OmnipickerPagePostedPhotosSelector.react"),null)),c("React").createElement(c("OmnipickerPanelList.react"),null,c("React").createElement(c("ComputerPanel.react"),{config:n}),c("React").createElement(c("OmnipickerPagePostedPhotosPanel.react"),{pageID:this.props.pageID})))))}},onPickerCancel:function m(){this.state.dialogRenderer.hide();this._waterfallLogger.logStep(c("PUWSteps").CLIENT_FLOW_CANCEL)},onPickerAddPhotos:function m(n){this.state.dialogRenderer.hide();this.props.onPhotosSelected(n)},render:function m(){var n=null,o=null,p=this.props.photos.length;if(this.props.videos)p+=this.props.videos.length;if(!this.props.maxPhotosCount||p<this.props.maxPhotosCount){n=this._renderAddPhotoLink();o=this._renderAddVideoLink()}return c("React").createElement("div",{className:this.props.className},this._renderUploadedMedia(),n,o)},_renderUploadedPhoto:function m(n){var o=null;if(this.props.photoEditingEnabled)o=c("React").createElement(c("PageProductPhotoEditButton.react"),{composerID:this._waterfallLogger.getWaterfallID(),onPhotoEdited:this.props.onPhotoEdited,pageID:this.props.pageID,photoID:n.fbid});return c("React").createElement("div",{key:n.fbid,className:"_5m94"},c("React").createElement(c("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(p){return this.props.onPhotoRemoved(n)}.bind(this)}),c("React").createElement(c("Image.react"),{className:"_19tc",src:n.src}),o,c("React").createElement("div",{className:"_19td"}))},_renderUploadedVideo:function m(n){var o=null;if(!n.ready&&!n.error)o=c("React").createElement(c("XUISpinner.react"),{className:"_37cg",size:"large"});var p=null;if(n.error)p=c("React").createElement("div",{className:"_37ch"},c("React").createElement(c("AudienceManagerEngagementVideoSelectionError.react"),{mainLabel:i._("Upload failed")}));return c("React").createElement("div",{key:n.fbid,className:"_5m94"},c("React").createElement(c("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(){this.props.onVideoRemoved||j(0);this.props.onVideoRemoved(n)}.bind(this)}),c("React").createElement(c("Image.react"),{className:"_19tc",src:n.src}),o,p,c("React").createElement("div",{className:"_37cj"}),c("React").createElement("div",{className:"_37cm"},c("React").createElement("div",{className:"_37cn"})),c("React").createElement("div",{className:"_19td"}))},_renderUploadedMedia:function m(){var n=this.props.videos&&this.props.onVideoRemoved?this.props.videos.map(this._renderUploadedVideo):[],o=this.props.photos.map(this._renderUploadedPhoto);return n.concat(o)},_renderAddPhotoLink:function m(){return c("React").createElement(c("Link.react"),{className:"_3ff7",ref:"uploadButton",onClick:this._onPickerLaunch},c("React").createElement(c("XUIError.react"),{xuiError:this.props.xuiError},c("React").createElement("div",{className:"_22to _19tc"},c("React").createElement(c("XUIGrayText.react"),{className:"_3ff8",size:"meta1",display:"block"},i._("Add Photos")))))},_renderAddVideoLink:function m(){if(!this.props.showVideoUploadButton||!this.props.onVideoSelected||!this.props.onVideoUploadFinished||!this.props.onVideoUploadError||!this.props.productCatalogID||!this.props.pageContentTabAccessToken)return null;return c("React").createElement(c("PageContentTabProductUploadVideoButton.react"),{productCatalogID:this.props.productCatalogID,onVideoSelected:this.props.onVideoSelected,onVideoUploadFinished:this.props.onVideoUploadFinished,onVideoUploadError:this.props.onVideoUploadError,pageContentTabAccessToken:this.props.pageContentTabAccessToken})},_onPickerLaunch:function m(){this._waterfallLogger.logStep(c("PUWSteps").CLIENT_FLOW_BEGIN);this.state.dialogRenderer.show()}});f.exports=l}),null);
__d("XPagesManagerProductDeleteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/products/product_delete/",{catalog_item_ids:{type:"FBIDVector"}})}),null);
__d("XPagesManagerProductUpdateInventoryController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/products/update_inventory/",{product_group_ids:{type:"IntVector"},inventory_in_stock:{type:"Bool",defaultValue:false}})}),null);
__d("PageProductActions",["fbt","ActorURI","AsyncRequest","PageContentTabCommonConfig","PageContentTabDispatcher","PageContentTabLoadingDialog","XPagesManagerProductDeleteController","XPagesManagerProductUpdateInventoryController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={deleteProducts:function j(k,l,m){c("PageContentTabLoadingDialog").show();var n=c("ActorURI").create(c("XPagesManagerProductDeleteController").getURIBuilder().setFBIDVector("catalog_item_ids",k).getURI(),l);new(c("AsyncRequest"))(n).setMethod("POST").setHandler(function(o){k.forEach(function(p){return c("PageContentTabDispatcher").handlePostRemoved(l,p)})}).setFinallyHandler(function(){c("PageContentTabLoadingDialog").hide();m&&m()}).send()},deleteProductsWithConfirmation:function j(k,l,m){var n=k.length===1?h._("Deleting this product will remove it from your shop"):h._("Deleting these products will remove them from your shop");c("PageContentTabCommonConfig").showConfirmationDialog(h._({"Product":"Delete Product ?","Products":"Delete Products ?"},[h._enum(k.length===1?"Product":"Products",{Product:"Product",Products:"Products"})]),n,h._({"product":"Delete product","products":"Delete products"},[h._enum(k.length===1?"product":"products",{product:"product",products:"products"})]),i.deleteProducts.bind(i,k,l,m),null)},MarkStockWithConfirmation:function j(k,l,m,n){__p&&__p();var o=l.map(function(t){return t.id}),p=false;l.forEach(function(t){if(t.products.data.length>1)p=true});var q=null;if(m)q=p?h._({"product":"Mark product as in stock. All variants will be affected","products":"Mark products as in stock. All variants will be affected"},[h._enum(o.length===1?"product":"products",{product:"product",products:"products"})]):h._({"product":"Mark product as in stock","products":"Mark products as in stock"},[h._enum(o.length===1?"product":"products",{product:"product",products:"products"})]);else q=p?h._({"product":"Mark product as out of stock. All variants will be affected","products":"Mark products as out of stock. All variants will be affected"},[h._enum(o.length===1?"product":"products",{product:"product",products:"products"})]):h._({"product":"Mark product as out of stock","products":"Mark products as out of stock"},[h._enum(o.length===1?"product":"products",{product:"product",products:"products"})]);var r=m?h._("Mark in stock"):h._("Mark out of stock"),s=m?h._("Mark in stock"):h._("Mark out of stock");c("PageContentTabCommonConfig").showConfirmationDialog(r,q,s,i.MarkStockProducts.bind(i,k,m,l,n),null,null)},MarkStockProducts:function j(k,l,m,n){__p&&__p();c("PageContentTabLoadingDialog").show();var o=m.map(function(q){return q.id}),p=c("ActorURI").create(c("XPagesManagerProductUpdateInventoryController").getURIBuilder().setIntVector("product_group_ids",o).setBool("inventory_in_stock",l).getURI(),k);new(c("AsyncRequest"))(p).setMethod("POST").setHandler(function(q){__p&&__p();var r=q.payload;m.forEach(function(s){if(s.id in r){var t=s.products.data[0];t.inventory=r[s.id];if(t.commerce_settings){t.commerce_settings.inventory=t.inventory;t.commerce_settings.total_inventory=t.inventory}c("PageContentTabDispatcher").handlePostChanged(s)}})}).setFinallyHandler(function(){c("PageContentTabLoadingDialog").hide();n&&n()}).send()}};f.exports=i}),null);
__d("BOFSellerLoggingSources",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD_SECTION:"AddSection",DEV_TEST:"DevTest",FINISH_SETUP_BANNER:"FinishSetupBanner",GRAPH_API:"GraphApi",MARKETPLACE_COMPOSER:"MarketplaceComposer",NLU_BANNER:"NLUBanner",PAGE_CARD:"PageCard",PAGE_COMPOSER:"PageComposer",PRODUCT_FEED:"ProductFeed",PRODUCT_TAGGING_TYPEAHEAD:"ProductTaggingTypeahead",PUBLISHING_TOOLS:"PublishingTools",QP:"QP",SHOP_EDIT:"ShopEdit",SHOP_TAB:"ShopTab",STRIPE_REDIRECT:"StripeRedirect"})}),null);
__d("CommerceB2CUnsupportedCurrencies",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CNY:"CNY",CUC:"CUC",FBZ:"FBZ",IRR:"IRR",KPW:"KPW",SDG:"SDG",SYP:"SYP"})}),null);
__d("CommerceCurrencySelector.react",["CurrencyConfig","CommerceB2CUnsupportedCurrencies","React","XUISingleSelector.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("XUISingleSelector.react").Option,k=c("React").PropTypes,l=200,m="FBZ";h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;n.prototype.render=function(){var o=this.$CommerceCurrencySelector1(),p=this.props.selectedCurrency;o=o.filter(function(r){return!this.$CommerceCurrencySelector2(r.iso)}.bind(this));if(this.$CommerceCurrencySelector2(p))p="USD";var q=o.map(function(r){return c("React").createElement(j,{key:r.iso,value:r.iso},r.name)});return c("React").createElement(c("XUISingleSelector.react"),{maxheight:l,value:p,onChange:this.props.onChange},q)};n.prototype.$CommerceCurrencySelector2=function(o){return Object.values(c("CommerceB2CUnsupportedCurrencies")).indexOf(o)!==-1};n.prototype.$CommerceCurrencySelector1=function(){var o=c("CurrencyConfig").allCurrenciesByCode,p=Object.keys(o);return p.map(function(q){return o[q]}).filter(function(q){return q.iso!==m&&q.name!==null}).sort(function(q,r){return q.name.localeCompare(r.name)})};function n(){h.apply(this,arguments)}n.propTypes={onChange:k.func.isRequired,selectedCurrency:k.string.isRequired,selectedPaymentProvider:k.number};f.exports=n}),null);
__d("CommerceSelfServeProductTaxCategories",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD:49e5,TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:49e6,TAX_ITEM_CODE_COMMERCE_CLOTHING:531e5,TAX_ITEM_CODE_COMMERCE_SHOES:5311e4,TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:5312e4,TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:5313e4,TAX_ITEM_CODE_COMMERCE_JEWELRY:541e5,TAX_ITEM_CODE_COMMERCE_WATCHES:54111500,TAX_ITEM_CODE_COMMERCE_OTHERS:-1})}),null);
__d("PageProductComposerMarketplaceCategorySelector.react",["cx","fbt","BUIFormSelector.react","React","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("BUIFormSelector.react").Option;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.categories.map(function(o){return c("React").createElement(l,{value:o.id,key:o.id},o.text)});return c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-94",display:"block",weight:"bold",shade:"dark",size:"meta1"},i._("Product Category")),c("React").createElement(c("BUIFormSelector.react"),{density:"snug",onChange:function(o){return this.props.onCategoryClick(o.value)}.bind(this),value:this.props.value},n))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("PageProductComposerShippingOptions.react",["ix","cx","fbt","xuiglyph","CommerceSelfServeUI","CurrencyInput.atlas","Image.react","LeftRight.react","Link.react","React","XUIGrayText.react","XUIText.react","XUITextInput.react"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("React").PropTypes;l=babelHelpers.inherits(o,c("React").Component);m=l&&l.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.$PageProductComposerShippingOptions1=function(){return{shipping_country:"US",shipping_price_currency:this.props.currencyCode,shipping_price_value:0,shipping_service:null}}.bind(this),this.$PageProductComposerShippingOptions2=function(u,v){var w=this.props.shippingOptions;w[u].shipping_service=v;this.props.onShippingOptionsChange(w)}.bind(this),this.$PageProductComposerShippingOptions3=function(u,v){var w=this.props.shippingOptions;w[u].shipping_price_value=v;this.props.onShippingOptionsChange(w)}.bind(this),this.$PageProductComposerShippingOptions5=function(){var u=this.props.shippingOptions;u[u.length]=this.$PageProductComposerShippingOptions1();this.props.onShippingOptionsChange(u)}.bind(this),this.$PageProductComposerShippingOptions4=function(u){var v=this.props.shippingOptions;v.splice(u,1);this.props.onShippingOptionsChange(v);var w=u>0?u-1:0;this.refs[w].focusInput()}.bind(this),q}o.prototype.UNSAFE_componentWillMount=function(){if(this.props.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()])};o.prototype.UNSAFE_componentWillReceiveProps=function(p){if(p.shippingOptions.length===0)this.props.onShippingOptionsChange([this.$PageProductComposerShippingOptions1()])};o.prototype.render=function(){__p&&__p();var p=this.props.shippingOptions.length,q=h("88985"),r=[];this.props.shippingOptions.forEach(function(x){var y=x.shipping_service,z=r.length;r[z]=c("React").createElement("tr",{className:"_5b1f",key:"option-"+z},c("React").createElement("td",{className:"_b3y"},c("React").createElement(c("XUITextInput.react"),{className:"_2mfs",disabled:this.props.disabled,height:"tall",value:y,placeholder:j._("Shipping method name"),onChange:function(A){return this.$PageProductComposerShippingOptions2(z,A.target.value)}.bind(this),ref:z})),c("React").createElement("td",{className:"_b3z"},c("React").createElement(c("CurrencyInput.atlas"),{className:"_5rpn",currency:x.shipping_price_currency,disabled:this.props.disabled,isZeroValidValue:true,value:Number(x.shipping_price_value)/100,onChange:function(A){return this.$PageProductComposerShippingOptions3(z,A*100)}.bind(this)})),p>c("CommerceSelfServeUI").MIN_SHIPPING_OPTIONS?c("React").createElement("td",{className:"_b3-"},c("React").createElement(c("Link.react"),{onClick:function(A){this.props.disabled?null:this.$PageProductComposerShippingOptions4(z)}.bind(this)},c("React").createElement(c("Image.react"),{className:"_2_qb",src:q}))):null)}.bind(this));var s=void 0,t=c("React").createElement(c("XUIText.react"),{size:"meta1"},j._("Add Shipping Method"));if(p>=c("CommerceSelfServeUI").MAX_SHIPPING_OPTIONS){var u=j._("You have reached the maximum number of shipping options.");s=c("React").createElement(c("Link.react"),{"data-hover":"tooltip","data-tooltip-content":u,onClick:function x(y){return y.stopPropagation()}},t)}else s=c("React").createElement(c("Link.react"),{onClick:this.props.disabled?null:this.$PageProductComposerShippingOptions5},t);var v=null;if(this.props.settingsURI)v=c("React").createElement(c("Link.react"),{className:"_3-9b",href:this.props.settingsURI,target:"_blank"},j._("Edit Default Shipping Options"));var w=null;if(!this.props.hideTitle)w=c("React").createElement("div",{className:"_3-94"},c("React").createElement(c("XUIGrayText.react"),{display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Shipping Options"),v),c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1"},j._("Customers will only be charged one shipping fee per order, even if they order more than one of this item.")));return c("React").createElement("div",{className:"_4qx _2pid"},w,c("React").createElement("table",{className:"_b40"},c("React").createElement("tbody",null,r)),c("React").createElement("div",{className:"_2pic _2pir"},s))};o.propTypes={currencyCode:n.string.isRequired,disabled:n.bool,hideTitle:n.bool,settingsURI:n.object,shippingOptions:n.arrayOf(n.shape({shipping_country:n.string,shipping_price_currency:n.string,shipping_price_value:n.number,shipping_service:n.string})).isRequired,onShippingOptionsChange:n.func.isRequired};f.exports=o}),null);
__d("PageProductComposerTaxCategorySelector.react",["cx","fbt","invariant","BUIFormSelector.react","CommerceSelfServeProductTaxCategories","React","SUIBusinessTheme","SUISimplePopover.react","XUIGrayText.react","forEachObject"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("BUIFormSelector.react").Option;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.getTaxCategoryDescription=function(o){__p&&__p();Object.prototype.hasOwnProperty.call(c("CommerceSelfServeProductTaxCategories"),o)||j(0);switch(c("CommerceSelfServeProductTaxCategories")[o]){case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION:return i._("Sports and Recreation");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_CLOTHING:return i._("Clothing");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_SHOES:return i._("Shoes");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_LUGGAGE_BAGS:return i._("Luggage\/Bags");case c("CommerceSelfServeProductTaxCategories").TAX_ITME_CODE_COMMERCE_PERSONAL_CARE:return i._("Personal Care");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_JEWELRY:return i._("Jewelry");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_WATCHES:return i._("Watches");case c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_OTHERS:return i._("Other physical goods");default:j(0)}};n.prototype.render=function(){var o=this.props.isManagedNmorShop?i._("Tax Category"):i._("Product Category"),p=this.props.isManagedNmorShop?i._("This category is used to calculate tax for your item. Select the category that best describes your product."):i._("This category is used to calculate taxes. You can also enter a tax rate under Custom Product Taxes in Advanced Options."),q=[];c("forEachObject")(c("CommerceSelfServeProductTaxCategories"),function(r,s){if(r!==c("CommerceSelfServeProductTaxCategories").NONE&&r!==c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)q.push(c("React").createElement(m,{key:"UNSPSC_"+r,value:r},this.getTaxCategoryDescription(s)))}.bind(this));return c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-94",display:"block",shade:"dark",size:"meta1",weight:"bold"},o,c("React").createElement(c("SUISimplePopover.react"),{content:p,contentWidthUseSparingly:318,position:"below",theme:c("SUIBusinessTheme")})),c("React").createElement(c("BUIFormSelector.react"),{density:"snug",onChange:this.props.onTaxCategoryChange,value:this.props.taxCategory},q))};function n(){k.apply(this,arguments)}n.defaultProps={taxCategory:c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_OTHERS};f.exports=n}),null);
__d("PageProductReviewNUX.react",["cx","fbt","React","ReactLayeredComponentMixin_DEPRECATED","XUIDialog.react","XUIDialogBody.react","XUICloseButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIGrayText.react","classWithMixins","mixin"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=500;j=babelHelpers.inherits(n,c("classWithMixins")(c("React").Component,c("mixin")(c("ReactLayeredComponentMixin_DEPRECATED"))));k=j&&j.prototype;function n(){k.constructor.call(this);this.state={dialogShown:true}}n.prototype.render=function(){return c("React").createElement("span",null)};n.prototype.renderLayers=function(){if(!this.state.dialogShown)return{};return{dialog:c("React").createElement(c("XUIDialog.react"),{width:m,onToggle:function(o){return this.$PageProductReviewNux1.bind(this,o)}.bind(this),shown:this.state.dialogShown,layerHideOnBlur:false},c("React").createElement("div",{className:"_2pie _2pij"},c("React").createElement(c("XUICloseButton.react"),{label:this.props.closeButtonText,className:"layerCancel rfloat"})),c("React").createElement(c("XUIDialogBody.react"),{className:"_4o_9"},c("React").createElement("h1",{className:"_4o_a"},this.$PageProductReviewNux2()),c("React").createElement(c("XUIGrayText.react"),{size:"header4"},this.$PageProductReviewNux3())),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogOkayButton.react"),{use:"confirm",action:"button",onClick:this.$PageProductReviewNux1.bind(this,false)})))}};n.prototype.$PageProductReviewNux2=function(){return i._("You just added your first product!")};n.prototype.$PageProductReviewNux3=function(){return i._("All products are processed before they are visible to your customers. You will receive a notification when this is done, usually within a few minutes.")};n.prototype.$PageProductReviewNux1=function(o){this.setState({dialogShown:o});if(!o&&this.props.onDialogClosed)this.props.onDialogClosed()};n.propTypes={onDialogClosed:l.func};f.exports=n}),null);
__d("ProductVisibilitySelector.react",["fbt","BUIFormSelector.react","ProductVisibility","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("BUIFormSelector.react").Option,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props,o=n.onChange,p=n.value,q=babelHelpers.objectWithoutProperties(n,["onChange","value"]);return c("React").createElement(c("BUIFormSelector.react"),babelHelpers["extends"]({onChange:function(r){function o(s){return r.apply(this,arguments)}o.toString=function(){return r.toString()};return o}(function(r){return o(r.value)}),value:p},q),c("React").createElement(k,{value:c("ProductVisibility").PUBLISHED},h._("Public")),c("React").createElement(k,{value:c("ProductVisibility").STAGING},h._("Unpublished")))};function m(){i.apply(this,arguments)}m.propTypes=babelHelpers["extends"]({onChange:l.func.isRequired,value:l.string.isRequired},c("BUIFormSelector.react").propTypes);f.exports=m}),null);
__d("XCommerceSelfServeParam",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({EXPLANATION:"explanation",PAGE_ID:"page_id",AMOUNT:"amount",BUSINESS_ID:"business_id",ADDRESS:"address",STREET_1:"street1",STREET_2:"street2",CITY:"city",STATE:"region",ZIP:"postalCode",ACCEPTED_TOS:"accepted_tos",ALERT_EMAIL:"alert_email",COLLECTION_NAME:"collection_name",CONTACT_EMAIL:"contact_email",COUNTRY_CODE:"country_code",MANAGED_STRIPE_LE_TYPE:"managed_stripe_le_type",PAYMENT_PROVIDER:"payment_provider",PAYPAL_MERCHANT_EMAIL:"paypal_merchant_email",RETURN_POLICY_TIME:"return_policy_time",SECONDARY_CTA:"secondary_product_cta",SETTINGS_ID:"settings_id",SHIPPING_POLICY_TIME:"shipping_policy_time",STATE_TAX_REGISTRATION_NUMBERS:"state_tax_registration_numbers",STRIPE_DEFERRED_EMAIL:"stripe_deferred_email",TAX_NEXUS_LOCATIONS:"tax_nexus_locations",VISIBILITY:"visibility",CHECKOUT_URL:"checkout_url",COLLECTION_ID:"collection_id",CURRENCY_CODE:"currency_code",DEFAULT_SHIPPING_OPTIONS_JSON:"default_shipping_options_json",FEATURED_PRODUCT:"featured_product",INVENTORY:"inventory",IS_ON_SALE:"is_on_sale",PRODUCT_CATALOG_ID:"catalog_id",PRODUCT_DESCRIPTION:"product_desc",PRODUCT_ID:"product_id",PRODUCT_PHOTO_IDS:"photo_ids",PRODUCT_VIDEO_IDS:"video_ids",PRODUCT_PRICE:"product_price",PRODUCT_SALE_PRICE:"product_sale_price",PRODUCT_TITLE:"product_title",SHARE_TO_TIMELINE:"share_to_timeline",SHIPPING_OPTION_NAMES:"shipping_option_names",SHIPPING_OPTION_VALUES:"shipping_option_values",TAX_APPLIED_TO_SHIPPING_MAP:"tax_applied_to_shipping_map",TAX_CATEGORY:"tax_category",TAX_LOCATIONS:"tax_locations",TAX_PERCENT_MAP:"tax_percent_map",VARIANT_NAMES:"variant_names",VARIANT_INVENTORY:"variant_inventory_map",VARIANT_PRICE:"variant_price_map",VARIANT_SALE_PRICE:"variant_sale_price_map",VARIANT_DATA:"variant_serial_data_map",VARIANT_PRODUCT_ID:"variant_product_id_map",CATEGORY_ID:"category_id",SOURCE_POST_ID:"post_id"})}),null);
__d("XPagesManagerFeaturedItemsCountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/featured_items_count/",{})}),null);
__d("XPagesManagerProductCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/products/product_create/",{})}),null);
__d("XPagesManagerProductVariantsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/product_variants/",{catalog_item_id:{type:"FBID",required:true}})}),null);
__d("XPagesManagerProductViewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/product/",{product_id:{type:"String",required:true}})}),null);
__d("XPagesProfileShopController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/{page_token}/shop/",{page_token:{type:"String",required:true},business_id:{type:"Int"},rid:{type:"Int"},rt:{type:"Enum",enumType:0},location:{type:"Enum",enumType:1},share_id:{type:"Int"},cid:{type:"Int"},obs:{type:"String"},hsi:{type:"Int"},offer_id:{type:"Int"},updated_cids:{type:"IntVector"},new_pids_count:{type:"IntVector"},new_pids:{type:"IntVector"},search_text:{type:"String"},__nodl:{type:"Exists",defaultValue:false},qr:{type:"String"},qr_code_id:{type:"FBID"},ref:{type:"String"},mt_nav:{type:"Bool",defaultValue:false},referrer:{type:"String"},_sref_:{type:"Int"},_vref_:{type:"Int"}})}),null);
__d("PageProductComposerDialog.react",["ix","cx","fbt","ActorURI","AdsCurrencyInput_DEPRECATED.react","AsyncRequest","BOFSellerLogger","BOFSellerLoggerEvent","BOFSellerLoggingSources","BUIFormButton.react","CommerceCurrencyInputUtils","CommerceCurrencySelector.react","CommerceExceptionHandlerMixin.react","CommerceInventoryAvailabilityOptions","CommerceInventoryToggle.react","CommerceSelfServeProductTaxCategories","CommerceSelfServeProductTaxRatesTable.react","CommerceSelfServeSection","Currency","DOM","FBNumberInput.react","FBToggleSwitch.react","Image.react","InlineBlock.react","Link.react","PageCommerceProductVariantPage.react","PageContentTabDispatcher","PageContentTabProductPhotoUploader.react","PageProductActions","PageProductComposerMarketplaceCategorySelector.react","PageProductComposerReturnPolicy.react","PageProductComposerShippingOptions.react","PageProductComposerTaxCategorySelector.react","PageProductReviewNUX.react","PageSettingsRef","PagesManagerProductToolsConstants","PECurrency","ProductVisibility","ProductVisibilitySelector.react","React","ReactDOM","ShopManagementTab","SUIBusinessTheme","SUISimplePopover.react","XCommerceSelfServeParam","XPagesManagerFeaturedItemsCountController","XPagesManagerProductCreateController","XPagesManagerProductVariantsController","XPagesManagerProductViewController","XPagesManagerSettingsController","XPagesManagerShopManagementController","XPagesProfileShopController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUIDialogTitle.react","XUIError.react","XUIGrayText.react","XUINotice.react","XUISpinner.react","XUITextInput.react","areEqual","fbglyph","getOwnObjectValues","goURI","idx","PageContentTabConstants"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("React").PropTypes,l=c("PageContentTabConstants").TABS,m="USD",n=500,o=3,p=80,q=14,r=50,s=100,t=1,u="0",v=100,w={main:"main",variant:"variant"},x={edit:"Edit",advanced:"Advanced"},y=c("React").createClass({displayName:"PageProductComposerDialog",mixins:[c("CommerceExceptionHandlerMixin.react")],propTypes:{categories:k.array,checkoutURL:k.string,collectionID:k.string,currencyCode:k.string,defaultReturnPolicyTime:k.number,defaultShippingOptions:k.array,isManagedNmorShop:k.bool,onProductChanged:k.func,onProductCreated:k.func,onProductDeleted:k.func,pageContentTabAccessToken:k.string.isRequired,pageID:k.string.isRequired,pageHasShop:k.bool.isRequired,postID:k.string,prefillConfig:k.shape({currencyCode:k.string,description:k.string,photos:k.array,price:k.number,title:k.string}),productCatalogID:k.string.isRequired,productID:k.string,productGroupID:k.string,requireDescription:k.bool.isRequired,sections:k.array.isRequired,shownInitially:k.bool,showShareToTimelineToggle:k.bool,showTOS:k.bool,showVideoUploadButton:k.bool,source:k.oneOf(c("getOwnObjectValues")(c("BOFSellerLoggingSources"))).isRequired,tosURI:k.string,onClose:k.func,shouldCreateShopFromProduct:k.bool},getDefaultProps:function z(){return{showShareToTimelineToggle:true}},getInitialState:function z(){var A,B,C,D,E;return{categoryID:null,checkoutURL:this.props.checkoutURL||"",currencyCode:((A=this.props)!=null?(A=A.prefillConfig)!=null?A.currencyCode:A:A)||this.props.currencyCode||m,currentTabKey:x.edit,currentPage:w.main,dialogShown:this.props.shownInitially,errorTabs:[],featuredCount:0,hasAttemptedSave:false,inventory:c("CommerceInventoryAvailabilityOptions").INVENTORY_IN_STOCK,isOnSale:false,loading:false,saving:false,photos:((B=this.props)!=null?(B=B.prefillConfig)!=null?B.photos:B:B)||[],videos:[],productDesc:((C=this.props)!=null?(C=C.prefillConfig)!=null?C.description:C:C)||"",productPrice:((D=this.props)!=null?(D=D.prefillConfig)!=null?D.price:D:D)||0,productSalePrice:0,productTitle:((E=this.props)!=null?(E=E.prefillConfig)!=null?E.title:E:E)||"",productVisibility:c("ProductVisibility").PUBLISHED,returnPolicyTime:Math.max(this.props.defaultReturnPolicyTime||0,q),shareToTimeline:false,shippingOptions:this.props.defaultShippingOptions||[],taxCategory:c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_OTHERS,taxRates:{state_abbr:{},zip_code:{}},showVariants:false,visibilityNotice:null,variants:[],variantItems:{}}},UNSAFE_componentWillMount:function z(){this._reviewedProductData=this._getReviewableDataFromState(this.state);if(this.props.productID)this._fetchProductDetails(this.props.pageID,this.props.productID);if(this.props.productGroupID)this._fetchVariants(this.props.pageID,this._getUniqueProductIdentifier(this.props));this._fetchFeaturedCount(this.props.pageID)},componentDidMount:function z(){var event=this.props.productID?c("BOFSellerLoggerEvent").ACTN_EDIT_PRODUCT_CLICK:c("BOFSellerLoggerEvent").ACTN_ADD_PRODUCT_CLICK;this._logEvent(event)},UNSAFE_componentWillReceiveProps:function z(A){if(this.props.pageID!==A.pageID||this.props.productID!==A.productID||this.props.productGroupID!==A.productGroupID){this._fetchProductDetails(A.pageID,A.productID);this._fetchVariants(A.pageID,this._getUniqueProductIdentifier(A))}},_fetchFeaturedCount:function z(A){this.setState({loading:true});var B=c("ActorURI").create(c("XPagesManagerFeaturedItemsCountController").getURIBuilder().getURI(),A);new(c("AsyncRequest"))().setURI(B).setHandler(function(C){var D=C.payload.featured_count;this.setState({loading:false,featuredCount:D})}.bind(this)).send()},_fetchProductDetails:function z(A,B){this.setState({loading:true});var C=c("ActorURI").create(c("XPagesManagerProductViewController").getURIBuilder().setString(c("XCommerceSelfServeParam").PRODUCT_ID,B).getURI(),A);new(c("AsyncRequest"))().setURI(C).setHandler(this._onProductDetailsFetched).send()},_fetchVariants:function z(A,B){this.setState({loading:true});var C=c("ActorURI").create(c("XPagesManagerProductVariantsController").getURIBuilder().setFBID("catalog_item_id",B).getURI(),A);new(c("AsyncRequest"))().setURI(C).setHandler(function(D){var E=D.payload,F={variants:E.variants,variantItems:E.variantItems};this._oldVariants=this._deepClone(F);this._reviewedProductData=this._getReviewableDataFromState(babelHelpers["extends"]({},this.state,E));this.setState(E)}.bind(this)).send()},_oldVariants:{variants:[],variantItems:{}},_deepClone:function z(A){return JSON.parse(JSON.stringify(A))},onPhotosSelected:function z(A){this.setState({photos:this.state.photos.concat(A)})},onPhotoRemoved:function z(A){this.setState({photos:this.state.photos.filter(function(B){return B.fbid!==A.fbid})})},onPhotoEdited:function z(A,B){var C=this.state.photos.findIndex(function(E){return E.fbid===A});if(C!==undefined){c("BOFSellerLogger").log(c("BOFSellerLoggerEvent").ACTN_PHOTO_EDITED,this.props.pageID,{target_class:"Photo",target_id:B.fbid});var D=this.state.photos.slice();D[C]=B;this.setState({photos:D})}},_onVideoSelected:function z(A){var B=this.state.videos;B=B.concat({requestID:A,fbid:A,src:null,ready:false,error:false});this.setState({videos:B})},_onVideoRemoved:function z(A){this.setState({videos:this.state.videos.filter(function(B){return B.fbid!==A.fbid})})},_onVideoUploadFinished:function z(A,B,C){var D=this.state.videos;for(var E=0;E<D.length;E++)if(D[E].requestID===A){D[E].fbid=B;D[E].src=C;D[E].ready=true}this.setState({videos:D})},_onVideoUploadError:function z(A){var B=this.state.videos;for(var C=0;C<B.length;C++)if(B[C].requestID===A){B[C].error=true;B[C].ready=false}this.setState({videos:B})},_getUniqueProductIdentifier:function z(A){return A.productGroupID!=="0"?A.productGroupID:A.productID},_getDialogHeader:function z(){switch(this.state.currentPage){case w.main:return c("React").createElement(c("XUIDialogHeader.react"),{activeTabKey:this.state.currentTabKey,onTabClick:this._handleTabChange},this._getTabHeaders());case w.variant:return c("React").createElement(c("XUIDialogTitle.react"),null,this._getTitle())}return c("React").createElement("div",null)},_getTabHeaders:function z(){var A=[c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:x.edit},this._getTitle())];if(this._showSection(c("CommerceSelfServeSection").TAX_TABLE))A.push(c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:x.advanced},j._("Advanced Options")));return A},_getPhotoUploader:function z(){var A=this.state.hasAttemptedSave?this._getPhotosError(this.state.photos):null;return c("React").createElement(c("PageContentTabProductPhotoUploader.react"),{className:"_2anr",pageID:this.props.pageID,photoEditingEnabled:true,photos:this.state.photos,onPhotosSelected:this.onPhotosSelected,onPhotoRemoved:this.onPhotoRemoved,onPhotoEdited:this.onPhotoEdited,productCatalogID:this.props.productCatalogID,pageContentTabAccessToken:this.props.pageContentTabAccessToken,videos:this.state.videos,onVideoSelected:this._onVideoSelected,onVideoUploadFinished:this._onVideoUploadFinished,onVideoUploadError:this._onVideoUploadError,onVideoRemoved:this._onVideoRemoved,showVideoUploadButton:this.props.showVideoUploadButton,xuiError:A})},_getPhotoTooltip:function z(){if(this.state.photos.length>0||this.state.videos.length>0)return null;if(this.props.source===c("BOFSellerLoggingSources").PRODUCT_TAGGING_TYPEAHEAD&&!this.props.pageHasShop)return c("React").createElement(c("XUINotice.react"),{size:"small"},c("React").createElement("div",{className:"_45zv"},j._("Adding a product lets you tag it in posts, photos and videos on your Page.")));return c("React").createElement(c("XUINotice.react"),{size:"small"},c("React").createElement("div",{className:"_1mxl"},j._("Check out our {link} for tips on making your product images look good on Facebook.",[j._param("link",c("React").createElement(c("Link.react"),{href:"https://www.facebook.com/business/help/481150918755515",target:"_blank"},j._("recommended photo guidelines")))])))},_getTabBodies:function z(){var A=this.state.currentTabKey==x.edit,B=[c("React").createElement("div",{className:A?"_2pi1":"hidden_elem",key:"basic_product_edit_tab"},c("React").createElement("div",{dangerouslySetInnerHTML:this.state.visibilityNotice}),c("React").createElement("div",null,this._getPhotoUploader(),this._getPhotoTooltip()),c("React").createElement("div",{className:"clearfix"}),this._getNamePriceDescriptionInputs(),this._getCheckoutURLInput(),this._getFeaturedToggleSwitch(),this._getShareToTimelineToggle(),c("React").createElement("div",{className:"_3p77"},c("React").createElement("div",{className:"_4o5s"},this._getInventoryInput()),c("React").createElement("div",{className:"_4o5t"},this._getTaxCategorySelector())),c("React").createElement("div",{className:"_3p77"},c("React").createElement("div",{className:"_4o5s"},this._getVariantsButton()),c("React").createElement("div",{className:"_4o5t"},this._getVisibilitySelector())),this._getEditWarning(),this._getShippingOptionsSection(),this._getReturnPolicySection(),this._getShopCreationNoticeSection(),this._getTOSSection())];if(this._showSection(c("CommerceSelfServeSection").TAX_TABLE))B.push(c("React").createElement("div",{className:(A?"hidden_elem":"")+" _2pi1 _5dz6",key:"advanced_product_edit_tab"},this._getTaxTable()));return B},_getShopCreationNoticeSection:function z(){if(this.props.pageHasShop||!this.props.shouldCreateShopFromProduct)return null;return c("React").createElement("div",{className:"_3-8x _4u1-"},j._("When you add a product we will create a shop section for your page. You can easily edit and manage your products within your shop."))},_getTOSSection:function z(){if(!this.props.showTOS)return null;return c("React").createElement("div",{className:"_3-8x _1otd"},j._("By clicking {Label displayed on button to save a product}, you agree to the {Merchant Terms and Policies link}",[j._param("Label displayed on button to save a product",this._getSaveButtonText()),j._param("Merchant Terms and Policies link",c("React").createElement(c("Link.react"),{href:this.props.tosURI,target:"_blank"},"Merchant Terms and Policies"))]))},_getMerchantSettingsURI:function z(){if(this.props.isManagedNmorShop)return c("XPagesManagerShopManagementController").getURIBuilder().setString("page_token",this.props.pageID).setEnum("tab",c("ShopManagementTab").SETTINGS).getURI();return c("XPagesManagerSettingsController").getURIBuilder().setString("page_token",this.props.pageID).setString("tab","shop").setString("ref",c("PageSettingsRef").PRODUCT_COMPOSER).getURI()},_getTaxTable:function z(){return c("React").createElement("div",null,c("React").createElement("div",{display:"block",className:"_3-96"},c("React").createElement(c("XUIGrayText.react"),{weight:"bold",shade:"dark",size:"header4"},j._("Custom Product Taxes")),c("React").createElement(c("SUISimplePopover.react"),{content:j._("You can enter specific taxes for products taxed at special rates, such as some foods and beverages."),contentWidthUseSparingly:318,position:"below",theme:c("SUIBusinessTheme")})),c("React").createElement(c("CommerceSelfServeProductTaxRatesTable.react"),{taxRates:this.state.taxRates,onChangeTaxRates:this._onChangeTaxRates}),c("React").createElement("div",{display:"block",className:"_3-8x"},c("React").createElement(c("Link.react"),{href:this._getMerchantSettingsURI(),target:"_blank"},j._("View Default Shop Taxes"))))},_getInnerContent:function z(){if(this.state.loading)return c("React").createElement(c("XUISpinner.react"),{className:"_2_i8",size:"large"});switch(this.state.currentPage){case w.main:return c("React").createElement("div",null,this._getTabBodies());case w.variant:return c("React").createElement("div",null,c("React").createElement("div",{className:"_1go"},c("React").createElement(c("InlineBlock.react"),{alignv:"middle",className:"_1gp",onClick:this._onVariantsSaveButtonClicked},c("React").createElement(c("Image.react"),{src:h("141823")})),c("React").createElement(c("InlineBlock.react"),{alignv:"middle",className:"_1gq"},j._("More options"))),c("React").createElement("div",{className:"_3-8j"},c("React").createElement(c("XUIGrayText.react"),{display:"block"},j._("Add options like sizes, colors or materials that your product comes in."))),c("React").createElement(c("PageCommerceProductVariantPage.react"),{currencyCode:this.state.currencyCode,defaultVariantPrice:this.state.productPrice,getPriceError:this._getPriceError,inventoryType:this._showSection(c("CommerceSelfServeSection").IN_STOCK_TOGGLE)?c("CommerceSelfServeSection").IN_STOCK_TOGGLE:c("CommerceSelfServeSection").INVENTORY,isOnSale:this.state.isOnSale,setVariantInfo:function(A){return this.setState(A)}.bind(this),variants:this.state.variants,variantItems:this.state.variantItems}))}return c("React").createElement("div",null)},_backToMainPage:function z(){this.setState({currentPage:w.main})},_getVariantsButton:function z(){if(!this._showSection(c("CommerceSelfServeSection").VARIANTS))return null;return c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("XUIGrayText.react"),{weight:"bold",shade:"dark",size:"meta1",display:"block"},j._("Options"),c("React").createElement(c("SUISimplePopover.react"),{content:j._("Add options like sizes, colors or materials that your product comes in."),contentWidthUseSparingly:318,position:"below",theme:c("SUIBusinessTheme")})),c("React").createElement(c("BUIFormButton.react"),{className:"_3-8w",density:"snug",label:j._("Edit Options"),onClick:function(){return this.setState({currentPage:w.variant})}.bind(this)}))},_getCheckoutURLInput:function z(){if(!this._showSection(c("CommerceSelfServeSection").CHECKOUT_URL))return null;var A=this.getFieldErrorMessage(c("XCommerceSelfServeParam").CHECKOUT_URL)||(this.state.hasAttemptedSave?this._getCheckoutURLError(this.state.checkoutURL):null);return c("React").createElement("div",{className:"_3-97"},c("React").createElement(c("XUIGrayText.react"),{display:"inline",shade:"dark",size:"meta1",weight:"bold"},j._("Checkout URL")),c("React").createElement(c("SUISimplePopover.react"),{content:j._("The website where users will be directed to purchase this product"),contentWidthUseSparingly:318,position:"above",theme:c("SUIBusinessTheme")}),c("React").createElement(c("XUITextInput.react"),{className:"_2mfs",disabled:this.state.loading,height:"tall",name:"checkoutURL",onChange:function(event){return this.setState({checkoutURL:event.target.value})}.bind(this),placeholder:j._("http:\/\/www.example.com"),value:this.state.checkoutURL,xuiError:A}))},_getDialogFooter:function z(){switch(this.state.currentPage){case w.main:return this._getMainFooter();case w.variant:return this._getVariantsFooter()}return null},_getMainFooter:function z(){var A=null;if(this.props.productID&&!this.state.loading)A=c("React").createElement(c("Link.react"),{onClick:this.state.saving?null:this._onDeleteProductClicked},c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"meta1"},j._("Delete Product")));var B=this.state.saving?c("React").createElement(c("XUISpinner.react"),{size:"small",className:"_3-90"}):null;return c("React").createElement(c("XUIDialogFooter.react"),{leftContent:A},B,c("React").createElement(c("XUIDialogCancelButton.react"),{disabled:this.state.saving||this.state.loading}),c("React").createElement(c("XUIDialogButton.react"),{use:"confirm",label:this._getSaveButtonText(),action:"button",disabled:this.state.saving||this.state.loading,onClick:this._onSubmitButtonClicked}))},_getVariantsFooter:function z(){return c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{label:j._("Cancel"),action:"button",use:"default",onClick:this._onVariantsCancelButtonClicked}),c("React").createElement(c("XUIDialogButton.react"),{label:j._("Apply"),action:"button",use:"confirm",onClick:this._onVariantsSaveButtonClicked}))},_onVariantsCancelButtonClicked:function z(){this.setState(this._deepClone(this._oldVariants));this._backToMainPage()},_onVariantsSaveButtonClicked:function z(){this._oldVariants=this._deepClone({variants:this.state.variants,variantItems:this.state.variantItems});this._backToMainPage()},show:function z(){this.setState({currentPage:w.main,dialogShown:true})},hide:function z(){this.props.onClose&&this.props.onClose();this.setState({dialogShown:false})},_onDeleteProductClicked:function z(){c("PageProductActions").deleteProductsWithConfirmation(Array(this._getUniqueProductIdentifier(this.props)),this.props.pageID,function(){this.hide();if(this.props.onProductDeleted)this.props.onProductDeleted()}.bind(this))},_getCategoryInput:function z(){if(!this._showSection(c("CommerceSelfServeSection").CATEGORY))return null;var A=this.state.categoryID?this.state.categoryID:u,B={id:u,text:j._("Select category (optional)")};return c("React").createElement(c("PageProductComposerMarketplaceCategorySelector.react"),{categories:[B].concat(this.props.categories),value:A,onCategoryClick:function(C){if(C===u)C=null;this.setState({categoryID:C})}.bind(this)})},_getNamePriceDescriptionInputs:function z(){__p&&__p();var A=null;if(this.props.requireDescription)A=j._("Add details about your item");else A=j._("Add details about your item (Optional)");var B=null;if(this.state.variants.length===0){var C=c("CommerceCurrencyInputUtils").convertPEFormatToPBFormat(this.state.productPrice,this.state.currencyCode);B=c("React").createElement(c("AdsCurrencyInput_DEPRECATED.react"),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(H){this.setState({productPrice:c("CommerceCurrencyInputUtils").convertPBFormatToPEFormat(H,this.state.currencyCode)})}.bind(this),placeholder:j._("Enter price"),value:C!==null?C:0,xuiError:this.state.hasAttemptedSave?this._getPriceError(this.state.productPrice):null});if(!this.props.currencyCode)B=c("React").createElement("div",null,c("React").createElement("div",{className:"_4tjr"},c("React").createElement(c("CommerceCurrencySelector.react"),{onChange:function(event){return this.setState({currencyCode:event.value})}.bind(this),selectedCurrency:this.state.currencyCode})),c("React").createElement("div",{className:"_4tke"},B))}else B=c("React").createElement("div",{className:"_4o5u"},c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"header4",className:"_4o5v"},this._getVariantsPriceRange("price")),c("React").createElement(c("Link.react"),{size:"small",className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:w.variant})}.bind(this)},j._("Edit")));var D=null;if(this.state.isOnSale){var E=void 0;if(this.state.variants.length===0){var F=c("CommerceCurrencyInputUtils").convertPEFormatToPBFormat(this.state.productSalePrice,this.state.currencyCode);E=c("React").createElement(c("AdsCurrencyInput_DEPRECATED.react"),{className:"_5rpn",currency:this.state.currencyCode,disabled:this.state.loading||this.state.variants.length>0,invalidInputIsNull:true,nonnegative:true,onDataUpdate:function(H){this.setState({productSalePrice:c("CommerceCurrencyInputUtils").convertPBFormatToPEFormat(H,this.state.currencyCode)})}.bind(this),placeholder:j._("Enter price"),value:F!==null?F:0,xuiError:this.state.hasAttemptedSave?this._getSalePriceError(this.state.productSalePrice):null})}else E=c("React").createElement("div",{className:"_4o5u"},c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"header4",className:"_4o5v"},this._getVariantsPriceRange("salePrice")),c("React").createElement(c("Link.react"),{size:"small",className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:w.variant})}.bind(this)},j._("Edit")));D=c("React").createElement("div",{className:"_4o5t"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-8x _3-94",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Sale Price")),E)}var G=this.state.hasAttemptedSave?this._getProductDescriptionError(this.state.productDesc):null;return c("React").createElement("div",{className:"_2pin"},this._getNameInput(),c("React").createElement("div",{className:this.state.isOnSale?"_4o5s":""},c("React").createElement(c("XUIGrayText.react"),{className:"_3-8x _3-94",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Price")),B),D,c("React").createElement("div",{className:"clearfix"}),this._getSaleToggleSwitch(),c("React").createElement(c("XUIGrayText.react"),{className:"_3-8x _3-94",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Description")),c("React").createElement(c("XUIError.react"),{xuiError:G},c("React").createElement("textarea",{name:"productDescription",className:"_3jm _2ph-",disabled:this.state.loading,rows:o,value:this.state.productDesc,onChange:function(event){return this.setState({productDesc:event.target.value})}.bind(this),placeholder:A})),this._getCategoryInput())},_getNameInput:function z(){var A=this.getFieldErrorMessage(c("XCommerceSelfServeParam").PRODUCT_TITLE)||(this.state.hasAttemptedSave?this._getProductTitleError(this.state.productTitle):null);return c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-94",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Name")),c("React").createElement(c("XUITextInput.react"),{name:"productTitle",className:"_2mfs",disabled:this.state.loading,value:this.state.productTitle,height:"tall",maxLength:p,onChange:function(event){return this.setState({productTitle:event.target.value})}.bind(this),xuiError:A}))},_getVariantsPriceRange:function z(A){__p&&__p();var B=Number.MAX_VALUE,C=Number.MIN_VALUE;for(var D in this.state.variantItems){var E=this.state.variantItems[D];if(E[A]<B)B=E[A];if(E[A]>C)C=E[A]}var F=this.state.currencyCode;if(B===C)return c("PECurrency").formatAmount(F,B,true,false,false);else return c("PECurrency").formatAmount(F,B,true,false,false)+" - "+c("PECurrency").formatAmount(F,C,true,false,false)},_getTaxCategorySelector:function z(){if(!this._showSection(c("CommerceSelfServeSection").TAX_CATEGORY))return null;var A=this.state.taxCategory||c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_OTHERS;if(A===c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION_BAD)A=c("CommerceSelfServeProductTaxCategories").TAX_ITEM_CODE_COMMERCE_SPORT_RECREATION;return c("React").createElement(c("PageProductComposerTaxCategorySelector.react"),{className:"_3-8y",isManagedNmorShop:this.props.isManagedNmorShop,onTaxCategoryChange:this._handleTaxCategoryChange,taxCategory:A})},_getVisibilitySelector:function z(){if(!this._showSection(c("CommerceSelfServeSection").PRODUCT_VISIBILITY))return null;return c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-94 _3-8x",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Visibility")),c("React").createElement(c("ProductVisibilitySelector.react"),{density:"snug",onChange:function(A){return this.setState({productVisibility:A})}.bind(this),value:this.state.productVisibility}))},_getInventoryInput:function z(){var A=null;A=this._getInventoryNumberInput()!==null?this._getInventoryNumberInput():this._getInventoryStockToggle();if(A===null)return null;return c("React").createElement("div",null,c("React").createElement(c("XUIGrayText.react"),{className:"_3-94 _3-8x",display:"block",weight:"bold",shade:"dark",size:"meta1"},j._("Inventory")),A)},_getInventoryNumberInput:function z(){__p&&__p();if(!this._showSection(c("CommerceSelfServeSection").INVENTORY))return null;var A=null;if(this.state.variants.length===0)A=c("React").createElement(c("FBNumberInput.react"),{className:"_3jm _2ph-",defaultValue:this.state.inventory,disabled:this.state.loading,name:"productInventory",nonnegative:true,onValueChange:this._updateInventory});else{var B=0;for(var C in this.state.variantItems)B+=this.state.variantItems[C].inventory;A=c("React").createElement("div",{className:"_4o5u"},c("React").createElement("div",{className:"_4o5v"},c("React").createElement(c("XUIGrayText.react"),{shade:"light",size:"header4"},B)),c("React").createElement(c("Link.react"),{className:"_20ac _2pii",onClick:function(){return this.setState({currentPage:w.variant})}.bind(this),size:"small"},j._("Edit Inventory")))}return A},_updateInventory:function z(A){this.setState({inventory:A})},_getInventoryStockToggle:function z(){__p&&__p();if(!this._showSection(c("CommerceSelfServeSection").IN_STOCK_TOGGLE))return null;var A=null;if(this.state.variants.length===0)A=c("React").createElement(c("CommerceInventoryToggle.react"),{disabled:this.state.loading,inventory:this.state.inventory,setInventoryInfo:function(D){this.setState({inventory:D?c("CommerceInventoryAvailabilityOptions").INVENTORY_IN_STOCK:c("CommerceInventoryAvailabilityOptions").INVENTORY_OUT_OF_STOCK})}.bind(this)});else{var B=0;for(var C in this.state.variantItems)B+=this.state.variantItems[C].inventory;A=c("React").createElement("div",null,c("React").createElement(c("CommerceInventoryToggle.react"),{disabled:true,inventory:B}),c("React").createElement("div",{className:"_4ul8"},c("React").createElement(c("Link.react"),{size:"small",onClick:function(){return this.setState({currentPage:w.variant})}.bind(this)},j._("Edit Option Inventory"))))}return A},_getReturnPolicySection:function z(){if(!this._showSection(c("CommerceSelfServeSection").RETURN_POLICY))return null;return c("React").createElement(c("PageProductComposerReturnPolicy.react"),{onReturnPolicyTimeChange:this._onReturnPolicyTimeChange,selectedReturnPolicyTime:this.state.returnPolicyTime})},_getSaleToggleSwitch:function z(){if(!this._showSection(c("CommerceSelfServeSection").SALE_PRICE))return null;return c("React").createElement("div",{className:"_3-8x"},c("React").createElement(c("FBToggleSwitch.react"),{disabled:this.state.loading,animate:true,checked:this.state.isOnSale,onToggle:function(A){return this.setState({isOnSale:A})}.bind(this)}),c("React").createElement("span",{className:"_3jn"},j._("This product is on sale"),c("React").createElement(c("SUISimplePopover.react"),{content:j._("Show people you're selling this product at a discount by setting a sale price in addition to the regular price."),contentWidthUseSparingly:318,position:"below",theme:c("SUIBusinessTheme")})))},_getShippingOptionsSection:function z(){if(!this._showSection(c("CommerceSelfServeSection").SHIPPING_OPTIONS))return null;return c("React").createElement(c("PageProductComposerShippingOptions.react"),{currencyCode:this.state.currencyCode,disabled:this.state.loading,settingsURI:this.props.productID?undefined:this._getMerchantSettingsURI(),shippingOptions:this.state.shippingOptions,onShippingOptionsChange:function(A){return this.setState({shippingOptions:A})}.bind(this)})},_getShareToTimelineToggle:function z(){if(this.props.productID||!this.props.showShareToTimelineToggle)return null;var A=null;if(this.state.shareToTimeline)A=c("React").createElement("div",{className:"_4lw_"},j._("Your product will be shared on your Page as soon as it's approved."));return c("React").createElement("div",null,c("React").createElement(c("FBToggleSwitch.react"),{disabled:this.state.loading,animate:true,checked:this.state.shareToTimeline,onToggle:function(B){return this.setState({shareToTimeline:B})}.bind(this)}),c("React").createElement("span",{className:"_3jn"},j._("Share this product on your page"),c("React").createElement(c("SUISimplePopover.react"),{content:j._("Automatically post this product to your Page's Timeline as soon as it's approved."),contentWidthUseSparingly:318,position:"above",theme:c("SUIBusinessTheme")})),A)},_unpackTaxRates:function z(){__p&&__p();var A=[],B={},C={};for(var D in this.state.taxRates){var E=this.state.taxRates[D];for(var F in E){A[A.length]=F;B[F]=E[F].tax_rate;C[F]=E[F].is_applied_to_shipping}}return{tax_locations:A,tax_percent_map:B,tax_applied_to_shipping_map:C}},_getFeaturedToggleSwitch:function z(){if(!this._showSection(c("CommerceSelfServeSection").FEATURED_PRODUCT_TOGGLE))return null;return c("React").createElement("div",{className:"_3-95"},c("React").createElement(c("FBToggleSwitch.react"),{disabled:this.state.loading||this._isFeatureProductToggleDisabled(),animate:true,checked:this.state.featuredProduct,onToggle:this._handleFeatureProductToggleChange}),c("React").createElement("span",{className:"_3jn"},j._("Feature this product"),c("React").createElement(c("SUISimplePopover.react"),{content:this._getHelpText(),contentWidthUseSparingly:318,position:"above",theme:c("SUIBusinessTheme")})))},_handleFeatureProductToggleChange:function z(A){var B=A?this.state.featuredCount+1:this.state.featuredCount-1;this.setState({featuredProduct:A,featuredCount:B})},_isFeatureProductToggleDisabled:function z(){return!this.state.featuredProduct&&this.state.featuredCount>=c("PagesManagerProductToolsConstants").MAX_FEATURED_ITEM_COUNT},_getHelpText:function z(){if(this._isFeatureProductToggleDisabled())return j._({"*":"You've already chosen {Maximum number of products that can be featured} to feature. Stop featuring one of your currently selected products to feature this one instead."},[j._param("Maximum number of products that can be featured",c("PagesManagerProductToolsConstants").MAX_FEATURED_ITEM_COUNT,[0])]);return j._({"*":"Featured products appear at the top of your page and are listed first in your shop. You can feature up to {Maximum number of products that can be featured} products."},[j._param("Maximum number of products that can be featured",c("PagesManagerProductToolsConstants").MAX_FEATURED_ITEM_COUNT,[0])])},_getTitle:function z(){if(this.state.currentPage===w.variant)return j._("Edit Options");if(this.props.productID)return j._("Edit Product");return j._("Add Product")},_getSaveButtonText:function z(){return j._("Save")},_onProductDetailsFetched:function z(A){var B=A.payload,C=B.visibility_notice===null?null:B.visibility_notice.markup;for(var D=0;D<B.videos.length;D++){B.videos[D].ready=true;B.videos[D].error=false}var E=B.price,F=B.sale_price,G={categoryID:B.commerce_category_id,checkoutURL:B.checkout_url,currentTabKey:x.edit,currentPage:w.main,dialogShown:true,productTitle:B.name,productDesc:B.description,productPrice:E,productSalePrice:F,productVisibility:B.visibility,photos:B.images,videos:B.videos,featuredProduct:B.featured_product,inventory:B.inventory,returnPolicyTime:B.return_policy_time,shippingOptions:B.shipping_options,taxCategory:B.tax_category,showVariants:B.show_variants,visibilityNotice:C,loading:false,featuredCount:B.featured_count,taxRates:B.tax_rates};this._reviewedProductData=this._getReviewableDataFromState(babelHelpers["extends"]({},this.state,G));this.setState(G)},_reviewedProductData:{},_getReviewableDataFromState:function z(A){var B=A.checkoutURL,C=A.productTitle,D=A.productDesc,E=A.photos,F=A.videos,G=A.variants;return this._deepClone({checkoutURL:B,productTitle:C,productDesc:D,photos:E,videos:F,variants:G})},_logEvent:function z(event){var A=this.props.productID?{target_class:"EntProductItem",target_id:this.props.productID}:null;c("BOFSellerLogger").log(event,this.props.pageID,babelHelpers["extends"]({source:this.props.source},A))},_onToggleDialog:function z(A){this.setState({dialogShown:A});if(A)return;this.props.onClose&&this.props.onClose();var event=this.props.productID?c("BOFSellerLoggerEvent").ACTN_CANCEL_EDIT_PRODUCT:c("BOFSellerLoggerEvent").ACTN_CANCEL_ADD_PRODUCT;this._logEvent(event)},_getPriceError:function z(A){var B=this._getMinimumPrice(),C=null;if(this._showSection(c("CommerceSelfServeSection").MINIMUM_PRICE_ERROR)&&(!A||A<B)){var D=c("PECurrency").formatAmount(this.state.currencyCode,B,true,false,false);C=j._("Price must be at least {Minimum Product Price}",[j._param("Minimum Product Price",D)])}else if(A==null||A<0)C=j._("Non-negative price is required");return C},_getSalePriceError:function z(A){var B=this._getPriceError(A);if(!B&&this.state.productPrice<=this.state.productSalePrice)B=j._("Sale price must be lower than regular price");return B},_getMinimumPrice:function z(){var A=r;if(this.state.currencyCode!=="USD"){var B=c("Currency").getOffset(this.state.currencyCode);A=B==v?t:s}return A},_getCheckoutURLError:function z(A){var B=null;if(A==="")B=j._("Missing Checkout URL: This product must have a valid url, like \"http:\/\/www.example.com\"");return B},_getPhotosError:function z(A){var B=null;if(this.state.photos.length===0)B=j._("Product Photo Required: Please provide at least one photo of this product");return B},_getProductTitleError:function z(A){var B=null;if(A==="")B=j._("Field is Empty: Can't have this field be blank");return B},_getEditWarning:function z(){if(!this.props.productID||this.state.visibilityNotice)return null;if(c("areEqual")(this._reviewedProductData,this._getReviewableDataFromState(this.state)))return null;return c("React").createElement(c("XUINotice.react"),{size:"small",className:"_3-8y"},j._("This product has been approved and is visible to anyone who visits your shop. If you edit this product, we'll review any changes before they're made publicly visible."))},_getProductDescriptionError:function z(A){var B=null;if(this.props.requireDescription&&A.trim()==="")B=j._("Description Required: Please provide a description for this product.");return B},_handleTabChange:function z(A){this.setState({currentTabKey:A})},_handleTaxCategoryChange:function z(A){this.setState({taxCategory:A.value})},_validatePrices:function z(){__p&&__p();var A=this.state.variants,B=this.state.variantItems;if(!A||A.length===0){if(this._getPriceError(this.state.productPrice)||this.state.isOnSale&&this._getSalePriceError(this.state.productSalePrice)){this._navigateToTab(x.edit);return false}return true}for(var C in this.state.variantItems){var D=this._getMinimumPrice();if(B[C].price<D||this.state.isOnSale&&this.state.variantItems[C].salePrice<D){this._navigateToTab(w.variant);return false}}return true},_validateVariants:function z(){return!this._getVariantsError()},_getVariantsError:function z(){var A=this.state.variants;if(!A||A.length===0)return null;var B=A.map(function(D){return D.options});for(var C=0;C<B.length;C++)if(B[C].length<=1)return j._("Please add more than one type for each option.");return null},_validateCheckoutURL:function z(){if(!this._showSection(c("CommerceSelfServeSection").CHECKOUT_URL))return true;return!this._getCheckoutURLError(this.state.checkoutURL)},_validatePhotos:function z(){return!this._getPhotosError(this.state.photos)},_validateProductTitle:function z(){return!this._getProductTitleError(this.state.productTitle)},_onSubmitButtonClicked:function z(){__p&&__p();this.setState({saving:true,hasAttemptedSave:true});if(!this._validatePrices()||!this._validateCheckoutURL()||!this._validatePhotos()||!this._validateProductTitle()||!this._validateVariants()){this.setState({saving:false});return}var A=[];this.state.photos.forEach(function(U){A.push(U.fbid)});var B=[];this.state.videos.forEach(function(U){if(U.ready&&!U.error)B.push(U.fbid)});var C=this.state.shippingOptions.filter(function(U){return U.shipping_service&&!!U.shipping_service.trim()});this.setState({shippingOptions:C});var D=[],E=[];C.forEach(function(U){D.push(U.shipping_service);E.push(Math.round(U.shipping_price_value))});var F=this._unpackTaxRates(),G=this.state.variants,H=G.map(function(U){return U.label}),I=G.map(function(U){return U.options}),J=this.state.variantItems,K={},L={},M={},N={},O={};for(var P in J){var Q=J[P];K[P]=Q.inventory;L[P]=Q.price;M[P]=Q.salePrice;N[P]=JSON.stringify(Q.properties);O[P]=Q.productID}var R={};R.source=this.props.source;R[c("XCommerceSelfServeParam").PRODUCT_TITLE]=this.state.productTitle;R[c("XCommerceSelfServeParam").PRODUCT_DESCRIPTION]=this.state.productDesc;R[c("XCommerceSelfServeParam").PRODUCT_PRICE]=this.state.productPrice;R[c("XCommerceSelfServeParam").PRODUCT_SALE_PRICE]=this.state.productSalePrice;R[c("XCommerceSelfServeParam").IS_ON_SALE]=this.state.isOnSale;R[c("XCommerceSelfServeParam").COLLECTION_ID]=this.props.collectionID;R[c("XCommerceSelfServeParam").CATEGORY_ID]=this.state.categoryID;R[c("XCommerceSelfServeParam").CURRENCY_CODE]=this.state.currencyCode;R[c("XCommerceSelfServeParam").PRODUCT_PHOTO_IDS]=A;R[c("XCommerceSelfServeParam").PRODUCT_VIDEO_IDS]=B;R[c("XCommerceSelfServeParam").PRODUCT_CATALOG_ID]=this.props.productCatalogID;R[c("XCommerceSelfServeParam").PRODUCT_ID]=this.props.productID;R[c("XCommerceSelfServeParam").FEATURED_PRODUCT]=this.state.featuredProduct;R[c("XCommerceSelfServeParam").SHARE_TO_TIMELINE]=this.props.showShareToTimelineToggle&&this.state.shareToTimeline;R[c("XCommerceSelfServeParam").INVENTORY]=this.state.inventory;R[c("XCommerceSelfServeParam").SHIPPING_OPTION_NAMES]=D;R[c("XCommerceSelfServeParam").SHIPPING_OPTION_VALUES]=E;R[c("XCommerceSelfServeParam").RETURN_POLICY_TIME]=this.state.returnPolicyTime;R[c("XCommerceSelfServeParam").TAX_CATEGORY]=this.state.taxCategory;R[c("XCommerceSelfServeParam").TAX_LOCATIONS]=F.tax_locations;R[c("XCommerceSelfServeParam").TAX_APPLIED_TO_SHIPPING_MAP]=F.tax_applied_to_shipping_map;R[c("XCommerceSelfServeParam").TAX_PERCENT_MAP]=F.tax_percent_map;R[c("XCommerceSelfServeParam").VARIANT_NAMES]=H;R[c("XCommerceSelfServeParam").VARIANT_INVENTORY]=K;R[c("XCommerceSelfServeParam").VARIANT_PRICE]=L;R[c("XCommerceSelfServeParam").VARIANT_SALE_PRICE]=M;R[c("XCommerceSelfServeParam").VARIANT_DATA]=N;R[c("XCommerceSelfServeParam").VARIANT_PRODUCT_ID]=O;R[c("XCommerceSelfServeParam").VISIBILITY]=this.state.productVisibility;R[c("XCommerceSelfServeParam").CHECKOUT_URL]=this.state.checkoutURL;R[c("XCommerceSelfServeParam").ACCEPTED_TOS]=this.props.showTOS;R[c("XCommerceSelfServeParam").SOURCE_POST_ID]=this.props.postID;for(var S=0;S<I.length;S++)R["variant"+S+"_options"]=I[S];var T=c("ActorURI").create(c("XPagesManagerProductCreateController").getURIBuilder().getURI(),this.props.pageID);this.sendAsync(T,R,this._onProductUpdated,function(){return this.setState({saving:false})}.bind(this));if(this.props.source===c("BOFSellerLoggingSources").NLU_BANNER)this._navigateToShopSection()},_navigateToShopSection:function z(){var A=c("XPagesProfileShopController").getURIBuilder().setString("page_token",this.props.pageID).getURI();c("goURI")(A)},_navigateToTab:function z(A){switch(A){case w.variant:this.setState({currentPage:w.variant});break;case x.edit:this.setState({currentTabKey:x.edit});break;case x.advanced:this.setState({currentTabKey:x.advanced});break}},_onChangeTaxRates:function z(A){this.setState({taxRates:A})},_onProductUpdated:function z(A){__p&&__p();this.setState({saving:false,dialogShown:false});if(this.props.productID)c("PageContentTabDispatcher").handlePostChanged(A.payload);else{if(this.props.onProductCreated)this.props.onProductCreated(A.payload);c("PageContentTabDispatcher").handlePostCreated(l.COMMERCE_PRODUCTS,A.payload,this.props.pageID)}if(A.payload.show_creation_nux)c("ReactDOM").render(c("React").createElement(c("PageProductReviewNUX.react"),{onDialogClosed:function(){if(this.props.onProductChanged)this.props.onProductChanged(A.payload)}.bind(this)}),c("DOM").create("div"));else if(this.props.onProductChanged)this.props.onProductChanged(A.payload);c("ReactDOM").unmountComponentAtNode(c("ReactDOM").findDOMNode(this).parentNode)},_onReturnPolicyTimeChange:function z(A){this.setState({returnPolicyTime:A.value})},render:function z(){__p&&__p();if(!this.state.dialogShown)return null;var A=[];if(this.hasFieldErrors())A.push(j._("Your product can't be saved as is. Please check the product info, options and advanced options and try again."));if(this.hasGeneralError())A.push(this.getGeneralErrorMessage());else if(this.state.hasAttemptedSave&&this._getVariantsError())A.push(this._getVariantsError());var B=null;if(A.length>0)B=c("React").createElement("div",{className:"_2pib _2piq"},this.renderErrorMessages(A));return c("React").createElement(c("XUIDialog.react"),{width:n,causalElementRef:function(){return this.refs.createButton}.bind(this),onToggle:this._onToggleDialog,shown:this.state.dialogShown,key:"dialog"},this._getDialogHeader(),c("React").createElement(c("XUIDialogBody.react"),{useCustomPadding:true},this._getInnerContent()),B,this._getDialogFooter())},_showSection:function z(A){return this.props.sections.indexOf(A)>=0}});f.exports=y}),null);
__d("XCommerceProductDialogLoaderController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/commerce/product_composer_dialog/loader/",{page_id:{type:"Int",required:true}})}),null);
__d("PageProductComposerDialogLoader.react",["AsyncRequest","BOFSellerLoggingSources","LoadingDialog.react","PageProductComposerDialog.react","React","XCommerceProductDialogLoaderController","XCommerceSelfServeParam","getOwnObjectValues"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("React").PropTypes,i=440,j=c("React").createClass({displayName:"PageProductComposerDialogLoader",propTypes:{collectionID:h.string,onClose:h.func,onProductChanged:h.func,onProductCreated:h.func,onProductDeleted:h.func,prefillConfig:h.shape({currencyCode:h.string.isRequired,description:h.string.isRequired,photos:h.array.isRequired,price:h.number.isRequired,title:h.string.isRequired}),productID:h.string,productGroupID:h.string,pageID:h.string.isRequired,postID:h.string,source:h.oneOf(c("getOwnObjectValues")(c("BOFSellerLoggingSources"))).isRequired},getInitialState:function k(){return{loading:true}},UNSAFE_componentWillMount:function k(){this._fetchPageDetails(this.props.pageID)},_fetchPageDetails:function k(l){var m=c("XCommerceProductDialogLoaderController").getURIBuilder().setInt(c("XCommerceSelfServeParam").PAGE_ID,l).getURI();new(c("AsyncRequest"))().setURI(m).setHandler(this._onPageDetailsFetched).send()},_onPageDetailsFetched:function k(l){var m=l.payload;this.setState({categories:m.categories,currencyCode:m.currency_code,defaultReturnPolicyTime:m.default_return_policy,defaultShippingOptions:m.default_shipping_options,isManagedNmorShop:m.is_managed_nmor_shop,hasValidTOS:m.has_valid_tos,loading:false,pageContentTabAccessToken:m.page_content_tab_access_token,pageHasShop:m.page_has_shop,productCatalogID:m.product_catalog_id,requireDescription:m.require_description,sections:m.sections,shouldCreateShopFromProduct:m.should_create_shop_from_product,showVideoUploadButton:m.show_video_upload_button,tosURI:m.tos_uri})},render:function k(){if(this.state.loading)return c("React").createElement(c("LoadingDialog.react"),{shown:true,width:i});return c("React").createElement(c("PageProductComposerDialog.react"),{categories:this.state.categories,collectionID:this.props.collectionID,currencyCode:this.state.currencyCode,defaultReturnPolicyTime:this.state.defaultReturnPolicyTime,defaultShippingOptions:this.state.defaultShippingOptions,isManagedNmorShop:this.state.isManagedNmorShop,onClose:this.props.onClose,onProductChanged:this.props.onProductChanged,onProductCreated:this.props.onProductCreated,onProductDeleted:this.props.onProductDeleted,pageContentTabAccessToken:this.state.pageContentTabAccessToken,pageHasShop:this.state.pageHasShop,pageID:this.props.pageID,postID:this.props.postID,prefillConfig:this.props.prefillConfig,productCatalogID:this.state.productCatalogID,productGroupID:this.props.productGroupID,productID:this.props.productID,requireDescription:this.state.requireDescription,sections:this.state.sections,shouldCreateShopFromProduct:this.state.shouldCreateShopFromProduct,showShareToTimelineToggle:this.state.pageHasShop,showTOS:!this.state.hasValidTOS,showVideoUploadButton:this.state.showVideoUploadButton,shownInitially:true,source:this.props.source,tosURI:this.state.tosURI})}});f.exports=j}),null);
__d("PageNuxIDEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADD_PROFILE_PICTURE:5039,ADD_COVER_PHOTO:5040,ADMIN_POST_CREATION_UPSELL:4684,AUTO_JOB_OPENING_POST_CONVERSION_NUX:5810,PAGE_OFFER_COMPOSER_TILE:5104,BOOST_PAGE_LIKE:4416,BOOST_WEBSITE:4415,FOOD_DRINK_ADMIN_ORDER_POST_UPSELL:5201,SEE_PAGES_FEED:4411,OFFER_TAB_NUX:5217,OFFER_TAB_RERUN_OFFER:5218,PAGE_CTA_AUTO_PROVISION:5219,PAGE_CTA_NEW_CTA_TYPE:5220,PAGE_CTA_NEW_FEATURE:5221,PAGE_CTA_PROMOTION:5222,PAGE_CTA_SUGGESTION:5223,WWW_HOME_TAB_STORY_NUX:5314,WWW_PUBLISH_PAGE_NUX:5341,WWW_COVER_SLIDESHOW_MENU_OPTION_NUX:5462,WWW_COVER_ON_TOUR_BADGE_MENU_OPTION_NUX:5649,COMPOSER_TARGETING_TAGGER:5056,COMPOSER_PRODUCT_TAGGER:5057})}),null);
__d("PageNuxSurfaceEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PAGE_TIMELINE:"page_timeline",PAGE_INSIGHTS_TAB:"page_insights_tab",PAGE_COMPOSER:"page_composer"})}),null);
__d("ReactComposerProductTaggerButton.react",["fbt","cx","AsyncRequest","CommerceProductTaggerType","CommerceSelfServeNUXType","React","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerButtonMixin","ReactComposerTaggerType","PageNuxIDEnum","PageNuxSurfaceEnum","PagesNuxFrameworkHelper","XCommerceSelfServeMerchantNUXSeenController","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"ReactComposerProductTaggerButton",mixins:[c("ReactComposerTaggerButtonMixin")],statics:{loggingName:c("ReactComposerLoggingName").PRODUCT_TAGGER,taggerID:c("ReactComposerTaggerType").PRODUCT},propTypes:{nuxType:j.string,productTaggerType:j.string.isRequired,shouldUseNewNuxFramework:j.bool},getDefaultProps:function l(){return{nuxType:c("CommerceSelfServeNUXType").COMPOSER_PRODUCT_TAGGER_BUTTON}},getInitialState:function l(){return{isProductTaggerNuxVisible:!this._shouldUseNuxFramework()}},getTitle:function l(){return h._("Tag a product")},getNUX:function l(){if(!this.state.showNUX||!this.state.contextRef)return null;var m=this.props.productTaggerType===c("CommerceProductTaggerType").SHOP_PAGE?h._("Tag products from your shop in your post"):h._("Tag products in your post"),n=c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"center",contextRef:function(){return this.state.contextRef}.bind(this),onCloseButtonClick:this._hideNUX,position:"below",shown:this.state.isProductTaggerNuxVisible,width:"auto"},m);if(this.props.shouldUseNewNuxFramework)c("PagesNuxFrameworkHelper").registerNux(c("PageNuxIDEnum").COMPOSER_PRODUCT_TAGGER,c("PageNuxSurfaceEnum").PAGE_COMPOSER,function(){return this._showNux()}.bind(this));return n},getTooltip:function l(){return h._("Tag a product")},getClassName:function l(){return"_22ma"},getRef:function l(){return"fbReactComposerProductTaggerButton"},componentDidMount:function l(){this.setState({contextRef:this.refs.fbReactComposerProductTaggerButton,isProductTaggerNuxVisible:!this._shouldUseNuxFramework()})},_shouldUseNuxFramework:function l(){return!!this.props.productTaggerNuxID&&!!this.props.shouldUseNewNuxFramework},_showNux:function l(){this.setState({isProductTaggerNuxVisible:true})},_hideNUX:function l(){this.setState({isProductTaggerNuxVisible:false});if(this._shouldUseNuxFramework())c("PagesNuxFrameworkHelper").closeNux(c("PageNuxIDEnum").COMPOSER_PRODUCT_TAGGER,c("PageNuxSurfaceEnum").PAGE_COMPOSER);c("ReactComposerTaggerActions").handleSetTaggerShowNUX(this.context.composerID,c("ReactComposerTaggerType").PRODUCT,false);var m=c("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",this.context.actorID).setEnum("nux_type",this.props.nuxType).getURI();new(c("AsyncRequest"))(m).send()}});f.exports=k}),null);
__d("ReactComposerProductTaggerTokenizerToken.react",["cx","React","ReactComposerPeopleTaggerTokenizerToken.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l="_rox";return c("React").createElement(c("ReactComposerPeopleTaggerTokenizerToken.react"),babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,l)}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ReactComposerProductTaggerComponent.react",["cx","fbt","BOFSellerLoggingSources","CommerceProductTaggerType","DOM","Grid.react","ReactComposerPhotoActions","ReactComposerProductTaggerTokenizerToken.react","ReactComposerTaggerActions","ReactComposerTaggerPresenter","ReactComposerTaggerType","ReactComposerTaggerViewStyles","PageProductComposerDialogLoader.react","ProductTaggingTranslations","React","ReactDOM","SearchableEntry","TokenizerExampleSearchSource","XUITokenizer.react","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Grid.react").GridItem,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={numberOfTags:this.props.taggerData.length,queryString:""},this.$ReactComposerProductTaggerComponent9=function(t){var u=t.products.data[0];if(this.$ReactComposerProductTaggerComponent8(u.id))return;var v={title:u.name,subtitle:u.price,type:"product_item",uniqueID:u.id};this.$ReactComposerProductTaggerComponent10(new(c("SearchableEntry"))(v))}.bind(this),this.$ReactComposerProductTaggerComponent4=function(t){if(t.getType()==="product_item_add"){c("ReactDOM").render(c("React").createElement(c("PageProductComposerDialogLoader.react"),{onProductCreated:this.$ReactComposerProductTaggerComponent9,pageID:this.props.pageID,source:c("BOFSellerLoggingSources").PRODUCT_TAGGING_TYPEAHEAD}),c("DOM").create("div"));return}if(this.$ReactComposerProductTaggerComponent8(t.getUniqueID()))return;this.$ReactComposerProductTaggerComponent10(t)}.bind(this),this.$ReactComposerProductTaggerComponent6=function(t){var u=this.props.taggerData,v=u.indexOf(t);if(v==-1)return;u.splice(v,1);this.setState({numberOfTags:u.length});c("ReactComposerPhotoActions").untagSubjectFromAllPhotos(this.props.reactComposerID,t.getUniqueID());this.props.onSelect&&this.props.onSelect(u)}.bind(this),this.$ReactComposerProductTaggerComponent5=function(event){this.setState({queryString:event.target.value})}.bind(this),p}n.prototype.componentDidMount=function(){this.$ReactComposerProductTaggerComponent2()};n.prototype.componentDidUpdate=function(o,p){if(this.state.numberOfTags!==p.numberOfTags||this.state.queryString!==p.queryString)this.$ReactComposerProductTaggerComponent2()};n.prototype.componentWillUnmount=function(){this.$ReactComposerProductTaggerComponent2(false)};n.prototype.render=function(){return c("React").createElement(c("Grid.react"),{cols:2,className:"_5esl"},c("React").createElement(l,{key:"label",className:"_5esm"},i._("Products")),c("React").createElement(l,{key:"tokenizer",className:"_5esw"},c("React").createElement("div",null,c("React").createElement(c("XUITokenizer.react"),babelHelpers["extends"]({},this.props,{additionalEntries:this.$ReactComposerProductTaggerComponent3(),className:"_5esx _ysh _4fmg",entries:this.props.taggerData,focusAfterSelection:false,focusedOnInit:this.props.autoFocus,onAddEntryAttempt:this.$ReactComposerProductTaggerComponent4,onQueryStringChange:this.$ReactComposerProductTaggerComponent5,onRemoveEntryAttempt:this.$ReactComposerProductTaggerComponent6,placeholder:this.props.placeholder,presenter:this.$ReactComposerProductTaggerComponent7(),ref:function(o){return this.$ReactComposerProductTaggerComponent1=o}.bind(this),searchSource:this.props.taggerSource,showEntriesOnFocus:true})))))};n.prototype.$ReactComposerProductTaggerComponent2=function(o){var p=this.props.productTaggerType;if(p!==c("CommerceProductTaggerType").INFLUENCER_PAGE)return;var q=void 0;if(o!==undefined)q=o;else q=this.state.numberOfTags===1&&!this.state.queryString;c("ReactComposerTaggerActions").handleSetTaggerShowTooltip(this.props.reactComposerID,c("ReactComposerTaggerType").SPONSOR,q)};n.prototype.$ReactComposerProductTaggerComponent3=function(){if(!this.props.showAddProduct)return[];var o=this.props.productTaggerType===c("CommerceProductTaggerType").SHOP_PAGE,p={photo:"/images/commerce/create-product-typeahead.png",title:c("ProductTaggingTranslations").getAddProductTitle(o),subtitle:c("ProductTaggingTranslations").getAddProductSubtitle(o),type:"product_item_add",uniqueID:"product_item_add"};return[new(c("SearchableEntry"))(p)]};n.prototype.$ReactComposerProductTaggerComponent8=function(o){var p=this.props.taggerData;return p.some(function(q){return q.getUniqueID()===o})};n.prototype.$ReactComposerProductTaggerComponent10=function(o){var p=this.props.taggerData;p.push(o);this.setState({numberOfTags:p.length,queryString:this.$ReactComposerProductTaggerComponent1.queryString});this.props.onSelect&&this.props.onSelect(p)};n.prototype.$ReactComposerProductTaggerComponent7=function(){var o={};o.taggerViewStyle=c("ReactComposerTaggerViewStyles").DEFAULT;o.taggerListClassName="_ysi";return Object.assign({},c("ReactComposerTaggerPresenter"),{extraRendererProps:o,sortEntries:this.$ReactComposerProductTaggerComponent11,TokenRenderer:c("ReactComposerProductTaggerTokenizerToken.react")})};n.prototype.$ReactComposerProductTaggerComponent11=function(o,p,q){o.sort(function(r,s){if(r.getType()==="product_item_add")return 1;if(s.getType()==="product_item_add")return-1;return 0});return o};n.propTypes={autoFocus:m.bool,onSelect:m.func,pageID:m.string.isRequired,placeholder:m.string,productTaggerType:m.string.isRequired,reactComposerID:m.string.isRequired,showAddProduct:m.bool,taggerSource:m.object,taggerData:m.array.isRequired};n.defaultProps={autoFocus:true,onSelect:c("emptyFunction"),placeholder:i._("Type product name or ID"),showAddProduct:false,taggerData:[],taggerSource:new(c("TokenizerExampleSearchSource"))()};f.exports=n}),null);
__d("ReactComposerProductTaggerContainer.react",["React","ReactComposerLoggingName","ReactComposerProductTaggerComponent.react","ReactComposerTaggerActions","ReactComposerTaggerContainerMixin","ReactComposerTaggerType","WebAsyncSearchSource"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("React").createClass({displayName:"ReactComposerProductTaggerContainer",_subscriptions:undefined,mixins:[c("ReactComposerTaggerContainerMixin")()],statics:{taggerID:c("ReactComposerTaggerType").PRODUCT,loggingName:c("ReactComposerLoggingName").PRODUCT_TAGGER,taggerComponent:c("ReactComposerProductTaggerComponent.react")},propTypes:{pageID:h.string.isRequired,productTaggerType:h.string.isRequired,reactComposerID:h.string.isRequired,showAddProduct:h.bool,viewer:h.string.isRequired},getInitialState:function j(){return{reachEstimate:null,searchSource:null}},UNSAFE_componentWillMount:function j(){this._updateProductSearchSource()},componentWillUnmount:function j(){this._subscriptions&&this._subscriptions.release()},_updateProductSearchSource:function j(){var k=this.state.searchSource;if(k===null)k=this._createAndBootstrapProductTypeSearchSource();c("ReactComposerTaggerActions").setTaggerSource(this.context.composerID,c("ReactComposerTaggerType").PRODUCT,k)},_createAndBootstrapProductTypeSearchSource:function j(){var k={filter:["product_items"],viewer:this.props.viewer};return new(c("WebAsyncSearchSource"))({getAllForEmptyQuery:true,queryRequests:[{uri:"/ajax/product_items/typeahead/query.php",data:Object.assign({},k,{is_bootstrap:false,page_id:this.props.pageID})}],bootstrapRequests:[{uri:"/ajax/product_items/typeahead/bootstrap.php",data:Object.assign({},k,{is_bootstrap:true,page_id:this.props.pageID})}],auxiliaryFields:{verified:"is_verified"}})}});f.exports=i}),null);
__d("ReactComposerTargetingTaggerButtonMixin",["cx","fbt"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={getInitialState:function k(){return{dialogShown:false}},getTitleTooltip:function k(){if(this.props.createLiveVideoTooltipText!=null)return this.props.createLiveVideoTooltipText;else if(this.props.useTargetingAsFilter)return i._("Narrow the potential News Feed audience for this post");else return i._("Choose the preferred audiences for this post")},getTitle:function k(){return this.getTitleTooltip()},getTooltip:function k(){return this.getTitleTooltip()},getClassName:function k(){return"_lmf"},getRef:function k(){return"fbReactComposerTargetingTagger"},_onToggle:function k(l){setTimeout(function(){return this.setState({dialogShown:l})}.bind(this),0)},_onSelectX:function k(){this.setState({dialogShown:true})}};f.exports=j}),null);
__d("XReactComposerTargetingTaggerNuxController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/react_composer/edit/targeting_tagger_nux/",{})}),null);
__d("ReactComposerTargetingTaggerButton.react",["fbt","AsyncRequest","PageNuxIDEnum","PagesComposerAudiences.react","PagesNuxFrameworkHelper","React","ReactComposerTaggerButtonMixin","ReactComposerTaggerType","ReactComposerTargetingTaggerButtonMixin","ReactLayeredComponentMixin_DEPRECATED","XReactComposerTargetingTaggerNuxController","XUIAmbientNUX.react","XUIText.react","PagesComposerAudiencesConstants","PageNuxSurfaceEnum"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("PagesComposerAudiencesConstants").TABS,k=-12,l=300,m=c("React").createClass({displayName:"ReactComposerTargetingTaggerButton",mixins:[c("ReactComposerTaggerButtonMixin"),c("ReactComposerTargetingTaggerButtonMixin"),c("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{accessToken:i.string,appID:i.string,createLiveVideoTooltipText:i.string,isLiveVideo:i.bool,feedTargetingGK:i.bool,feedTargetingShowReachGK:i.bool,hideFeedTargeting:i.bool,hideGating:i.bool,shouldShowTargetingTaggerNux:i.bool,shouldShowRestrictionTabNux:i.bool,useTargetingAsFilter:i.bool,shouldHideLeftFooter:i.bool,allowExclusionsWithoutInclusions:i.bool,shouldUseNewNuxFramework:i.bool,targetingTaggerNuxID:i.number,showWoodhengeGating:i.bool,woodhengeTiers:i.array},statics:{taggerID:c("ReactComposerTaggerType").TARGETING,disableToggle:true},getDefaultProps:function n(){return{feedTargetingGK:false,feedTargetingShowReachGK:false,hideFeedTargeting:false,hideGating:false,useTargetingAsFilter:true,shouldUseNewNuxFramework:false}},getInitialState:function n(){return{showTargetingTaggerNux:this.props.shouldShowTargetingTaggerNux,isTargetingTaggerNuxVisible:!this._shouldUseNuxFramework()}},componentDidMount:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o){var p=c("XReactComposerTargetingTaggerNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(p).setMethod("POST").setData({impression:true}).send()}},componentWillUnmount:function n(){if(this.state.showTargetingTaggerNux)this.setState({showTargetingTaggerNux:false,isTargetingTaggerNuxVisible:!this._shouldUseNuxFramework()})},_onNuxClose:function n(){this.setState({showTargetingTaggerNux:false,isTargetingTaggerNuxVisible:false});if(this._shouldUseNuxFramework())c("PagesNuxFrameworkHelper").closeNux(c("PageNuxIDEnum").COMPOSER_TARGETING_TAGGER,c("PageNuxSurfaceEnum").PAGE_COMPOSER);var o=c("XReactComposerTargetingTaggerNuxController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(o).setMethod("POST").setData({acked:true}).send()},_showNux:function n(){this.setState({isTargetingTaggerNuxVisible:true})},_shouldUseNuxFramework:function n(){return!!this.props.targetingTaggerNuxID&&!!this.props.shouldUseNewNuxFramework},_renderNux:function n(){var o=c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.fbReactComposerTargetingTagger}.bind(this),onCloseButtonClick:this._onNuxClose,offsetY:k,position:"below",shown:this.state.isTargetingTaggerNuxVisible,width:"custom",customwidth:l},c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),null,h._("Use Audience Optimization to reach people who are more likely to engage with your post."))));if(this._shouldUseNuxFramework())c("PagesNuxFrameworkHelper").registerNux(c("PageNuxIDEnum").COMPOSER_TARGETING_TAGGER,c("PageNuxSurfaceEnum").PAGE_COMPOSER,function(){return this._showNux()}.bind(this));return o},renderLayers:function n(){var o=!this.state.dialogShown&&this.state.showTargetingTaggerNux&&this.props.feedTargetingGK;if(o)return this._renderNux();if(this.state.dialogShown)return c("React").createElement(c("PagesComposerAudiences.react"),{accessToken:this.props.accessToken,allowExclusionsWithoutInclusions:this.props.allowExclusionsWithoutInclusions,appID:this.props.appID,shown:this.state.dialogShown,onToggle:this._onToggle,onSave:function(){return this._onToggle(false)}.bind(this),initialActiveKey:this.props.hideFeedTargeting?j.GATING:j.TARGETING,shouldHideLeftFooter:this.props.shouldHideLeftFooter,useTargetingAsFilter:this.props.useTargetingAsFilter,feedTargetingShowReachGK:this.props.feedTargetingShowReachGK,hideFeedTargeting:this.props.hideFeedTargeting,hideGating:this.props.hideGating,shouldShowRestrictionTabNux:this.props.shouldShowRestrictionTabNux,isLiveVideo:this.props.isLiveVideo,showWoodhengeGating:this.props.showWoodhengeGating,woodhengeTiers:this.props.woodhengeTiers});return{}}});f.exports=m}),null);
__d("ReactComposerTargetingTaggerComponent.react",["cx","fbt","Grid.react","React","XUICloseButton.react","XUIText.react","emptyFunction","isEmpty"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("Grid.react").GridItem,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerTargetingTaggerComponent1=function(){this.props.onSelect({})}.bind(this),p}n.prototype.render=function(){"use strict";return c("React").createElement(c("Grid.react"),{cols:2,className:"_5esl"},c("React").createElement(l,{key:"prefix",className:"_5esm"},i._("Targeting")),c("React").createElement(l,{key:"tagger",className:"_5esw"},c("React").createElement("div",{className:"_2doa"},c("React").createElement("div",{className:"_2dob"},c("React").createElement(c("XUICloseButton.react"),{className:"_2doc"+(c("isEmpty")(this.props.taggerData)?" hidden_elem":""),size:"small",type:"button",onClick:this.$ReactComposerTargetingTaggerComponent1})),c("React").createElement("div",{className:"_2dod"},c("React").createElement(c("XUIText.react"),null,this.props.woodhengeSentence?this.props.woodhengeSentence:this.props.targetingSentences)))))};n.propTypes={taggerData:m.object.isRequired,onSelect:m.func.isRequired,targetingSentences:m.object,woodhengeSentence:m.object};n.defaultProps={taggerData:{},onSelect:c("emptyFunction")};f.exports=n}),null);
__d("ReactComposerTargetingTaggerContainer.react",["React","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerTargetingTaggerComponent.react","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").createClass({displayName:"ReactComposerTargetingTaggerContainer",_subscriptions:undefined,mixins:[c("ReactComposerTaggerContainerStateMixin")()],statics:{taggerID:c("ReactComposerTaggerType").TARGETING},getInitialState:function i(){return{targetingSentences:null,woodhengeSentence:null}},UNSAFE_componentWillMount:function i(){var j=new(c("SubscriptionsHandler"))();j.addSubscriptions(c("ReactComposerTaggerStore").addChangeListener(this._onChange));this._subscriptions=j},componentWillUnmount:function i(){this._subscriptions&&this._subscriptions.release()},_onChange:function i(){var j=c("ReactComposerTaggerStore").getTaggerData(this.context.composerID,c("ReactComposerTaggerType").TARGETING);this.setState({targetingSentences:j?j.targetingSentences:null,woodhengeSentence:j?j.woodhengeSentence:null})},_onTaggerDataChanged:function i(j){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(j);c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").TARGETING_TAGGER,c("ReactComposerTaggerType").TARGETING,j);this.props.onSelect&&this.props.onSelect(j)},render:function i(){if(!this.state.isSelected)return c("React").createElement("noscript",null);return c("React").createElement(c("ReactComposerTargetingTaggerComponent.react"),babelHelpers["extends"]({},this.props,this.state,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged}))}});f.exports=h}),null);
__d("sdk.fbt",[],(function a(b,c,d,e,f,g){var h={_:function i(j){return typeof j==="string"?j:j[0]}};f.exports=h}),null);
__d("SUISearchInput.react",["cx","React","SUIComponent","SUITextInput.react","SUITheme","SUITooltip.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=1e3,m={hasTooltip:true,tooltipPosition:"above"};i=babelHelpers.inherits(n,c("SUIComponent"));j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={isFocused:false,isToolTip:false,isIconHovering:false},this.$SUISearchInput1=function(){this.setState({isFocused:true,isToolTip:true});this.props.onFocus&&this.props.onFocus()}.bind(this),this.$SUISearchInput2=function(){this.setState({isFocused:false});this.props.onBlur&&this.props.onBlur()}.bind(this),this.$SUISearchInput3=function(){this.props.onChange("");this.refs.input.focusInput()}.bind(this),this.$SUISearchInput4=function(){this.setState({isIconHovering:true})}.bind(this),this.$SUISearchInput5=function(){this.setState({isIconHovering:false})}.bind(this),p}n.prototype.focusInput=function(){this.refs&&this.refs.input.focusInput()};n.prototype.render=function(){var o="";if(this.state.isToolTip)o=this.props.tooltip||this.props.placeholder;var p=c("SUITheme").get(this).SUISearchInput,q=[c("React").createElement(c("SUITextInput.react"),{className:this.props.inputClassName,errorMessage:this.props.errorMessage,key:"textInput",leftIcon:c("React").cloneElement(p.searchIcon,{focused:this.state.isFocused}),onBlur:this.$SUISearchInput2,onChange:this.props.onChange,onFocus:this.$SUISearchInput1,onKeyDown:this.props.onKeyDown,placeholder:this.props.placeholder,ref:"input",rightIcon:c("React").cloneElement(p.cancelIcon,{style:{visibility:"hidden"}}),value:this.props.value}),this.props.value?c("React").createElement("button",{className:"_1qqx",key:"closeButton",onClick:this.$SUISearchInput3,type:"button"},c("React").cloneElement(p.cancelIcon,{className:"_1qq-",hover:this.state.isIconHovering,onMouseEnter:this.$SUISearchInput4,onMouseLeave:this.$SUISearchInput5})):null];return c("React").createElement("div",{className:c("joinClasses")("_1qqs",this.props.className,this.props.margin),style:babelHelpers["extends"]({width:this.props.width},this.props.style)},!this.props.hasTooltip?q:c("React").createElement(c("SUITooltip.react"),{position:this.props.tooltipPosition,tooltip:o,tooltipDelay:l},q))};n.defaultProps=m;n.propTypes={onChange:k.func.isRequired,errorMessage:k.string,inputClassName:k.string,margin:k.string,onKeyDown:k.func,onBlur:k.func,onFocus:k.func,placeholder:k.node,theme:k.instanceOf(c("SUITheme")),tooltip:k.node,tooltipPosition:c("SUITooltip.react").propTypes.position,value:k.string,width:k.oneOfType([k.string,k.number])};f.exports=n}),null);
__d("VideoContainerType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEGACY:0,CONTAINED_POST_ATTACHMENT:1,SAY_THANKS_DEPRECATED:2,LOOK_NOW_DEPRECATED:3,BROADCAST:4,ALBUM_MULTIMEDIA_POST:5,UNLISTED:6,NO_STORY:7,GOODWILL_ANNIVERSARY_DEPRECATED:8,PROFILE_VIDEO:9,DIRECT_INBOX:10,DIRECT_INBOX_REACTION:11,STORYLINE:12,GROUP_POST:14,ATLAS_VIDEO:15,LIVE_PHOTO:16,TEMP_MULTIMEDIA_POST:17,GOODWILL_ANNIVERSARY_PROMOTION_DEPRECATED:18,GOODWILL_VIDEO_SHARE:19,GOODWILL_VIDEO_PROMOTION:20,COPYRIGHT_REFERENCE_VIDEO:21,CANVAS:22,MOMENTS_VIDEO:23,APP_REVIEW_SCREENCAST:25,VIDEO_COMMENT:26,COPYRIGHT_REFERENCE_BROADCAST:27,OFFERS_VIDEO:28,JOB_APPLICATION_VIDEO:29,STORYLINE_WITH_EXTERNAL_MUSIC:30,JOB_OPENING_VIDEO:31,PAGE_SLIDESHOW_VIDEO:32,INSTANT_ARTICLE:33,PRODUCT_VIDEO:34,DIRECTED_POST_ATTACHMENT:35,PROFILE_INTRO_CARD:36,ISSUE_MODULE:37,GOODWILL_VIDEO_TOKEN_REQUIRED:38,INSTANT_APPLICATION_PREVIEW:39,REPLACE_VIDEO:40,FACECAST_DVR:41,PIXELCLOUD:42,SLIDESHOW_SHAKR:43,INSPIRATION_VIDEO:44,TAROT_DIGEST:45,SLIDESHOW_ANIMOTO:46,AUDIO_BROADCAST:47,LEARN:48,CULTURAL_MOMENT_DEPRECATED:49,YOUR_DAY:50,PAGES_COVER_VIDEO:51,GOODWILL_VIDEO_CONTAINED_SHARE:54,DCO_AD_ASSET_FEED:55,CONTAINED_POST_BROADCAST:56,QUICK_PROMOTION:57,DYNAMIC_ITEM_DISPLAY_BUNDLE:58,EVENT_TOUR:59,EVENT_COVER_VIDEO:60,AD_DERIVATIVE:61,CONTAINED_POST_AUDIO_BROADCAST:62,LIVE_CREATIVE_KIT_VIDEO:63,ALOHA_SUPERFRAME:64,INSTAGRAM_VIDEO_COPY:65,AD_BREAK_PREVIEW:66,ALOHA_CALL_VIDEO:67,STORY_ARCHIVE_VIDEO:68,BRAND_EQUITY_POLL_VIDEO:69,PROFILE_COVER_VIDEO:70,DYNAMIC_ITEM_VIDEO:71,PAGE_REVIEW_SCREENCAST:72,HEURISTIC_PREVIEW:73,GAME_CLIP:74,WOODHENGE:75,PREMIERE_SOURCE:76,PRIVATE_GALLERY_VIDEO:77})}),null);