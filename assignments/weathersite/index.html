<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CIT Assignment 10 - Weather Site Home Page - Aimee Jorgensen</title>
    <meta name="author" content="Aimee Jorgensen">
    <meta name="description" content="">
    <!-- external style references in the proper cascading order -->

    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto|Roboto+Condensed" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Oswald|Playfair+Display" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Bad+Script" rel="stylesheet">

    <!-- Google API font reference -->
    <link href="styles/normalize.css" rel="stylesheet">
    <!-- normalize useragent/browser defaults -->
    <link href="styles/main.css" rel="stylesheet">
    <!-- default styles - small/phone views -->
    <link href="styles/medium.css" rel="stylesheet">
    <!-- medium/tablet views -->
    <link href="styles/large.css" rel="stylesheet">
    <!-- large/wide/desktop views -->
</head>

<body>

    <header>
        <div class="title">
            <img src="images/Weather_SunAbstract.png" alt="The site logo" width="" height="">
            <h1>SmartCast Weather</h1>
        </div>
        <div class="subheading">Smart Forecasts for a Smart Life</div>
    </header>

    <!-- site navigation use placeholder references -->

    <button class="hamburger" onclick="toggleHam()">&#9776;</button>

    <nav>
        <ul id="nav" class="hide-nav">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="franklin.html">Franklin</a></li>
            <li><a href="greenville.html">Greenville</a></li>
            <li><a href="springfield.html">Springfield</a></li>
            <li><a href="stormcenter.html">Storm Center</a></li>
            <li><a href="gallery.html">Gallery</a></li>
        </ul>
    </nav>
    <main>
        <h2>Weather Story</h2>
        <div class="weatherStory">
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p><br>
            <img src="images/pine-tree-with-snow-200.jpg" alt="snow on pine tree">
        </div>

        <section class="weatherCities">
            <!-- JSON -->
            <script>
                var section = document.querySelector('section');

                //store the URL of the JSON we want to retrieve in a variable

                var requestURL = 'https://byui-cit230.github.io/weather/data/towndata.json';

                //XMLHttpRequest or XHR: This is a very useful JavaScript object that allows us to make network requests to retrieve resources from a server via JavaScript.  Use the "new" keyword

                var request = new XMLHttpRequest();

                //open a new request using the HTTP method 'GET' to retrieve simple data. the URL to make the request to.// The URL of the JSON file

                request.open('GET', requestURL);

                // set the response type to JSON, so that XHR knows that the server will be returning JSON and that it needs to be converted into a javascript object.
                request.responseType = 'json';

                //send the request with send method.

                request.send();

                //wait for the response to return from the server, then dealing with it.

                request.onload = function() {
                    //onload is an event handler. When the response has successfully returned it will  run.

                    //store the request in a variable called superHeroes; it will now contain the JavaScript object based on the JSON

                    var w = request.response;

                    //passing that object to two function calls

                    weatherInfo(w);
                    //header data

                }

                //creating the weather information cards.  It is an array with multiple objects and use a for loop.

                function weatherInfo(jsonObj) {
                    var cities = jsonObj['towns'];
                    for (var i = 0; i < cities.length; i++) {
                        if (cities[i].name != "Placerton") {
                            var myDiv = document.createElement('div');

                            if (cities[i].name == "Franklin")
                                myDiv.className ="citiesDiv";  
                            else if (cities[i].name == "Greenville")
                                myDiv.className ="citiesDiv2"; 
                            else if (cities[i].name == "Springfield")
                                myDiv.className ="citiesDiv";
                            
                            var myDiv1 = document.createElement('div');
                            var myDiv2 = document.createElement('div');

                            var myH2 = document.createElement('h2');
                            var myImg = document.createElement('img');
                            var myPara1 = document.createElement('p');
                            var myPara2 = document.createElement('p');
                            var myPara3 = document.createElement('p');
                            var myPara4 = document.createElement('p');

                            if (cities[i].name == "Franklin")
                                myImg.setAttribute('src', 'images/franklin bridge.jpeg');
                            if (cities[i].name == "Greenville")
                                myImg.setAttribute('src', 'images/farming.jpeg');
                            if (cities[i].name == "Springfield")
                                myImg.setAttribute('src', 'images/forest-fog-sunny-nature-615348 copy.jpg');

                            myH2.textContent = cities[i].name;
                            myPara1.textContent = 'Motto: ' + cities[i].motto;
                            myPara2.textContent = 'Year Founded: ' + cities[i].yearFounded;
                            myPara3.textContent = 'Current Population:' + cities[i].currentPopulation;
                            myPara4.textContent = 'Average Rain Fall:' + cities[i].averageRainFall;

                            myDiv1.appendChild(myImg);
                            myDiv2.appendChild(myH2);
                            myDiv2.appendChild(myPara1);
                            myDiv2.appendChild(myPara2);
                            myDiv2.appendChild(myPara3);
                            myDiv2.appendChild(myPara4);
                            myDiv.appendChild(myDiv1);
                            myDiv.appendChild(myDiv2);
                            section.appendChild(myDiv);
                        }
                    }
                }
            </script>
        </section>
    </main>
    <footer>
        <aside>
            <p>25 Main St. Franklin, IL &nbsp; 83454 &nbsp; 809.876.7676</p>
        </aside>
        <p class="footer-bar">&copy;2018 All Rights Reserved &nbsp;| &nbsp; <em><strong>SmartCast Weather </strong></em> &nbsp;| &nbsp;
            <span id="currentdate"></span>
        </p>
        <script>
            //remember to add an ID of ?mainmenu" to the nav ul"
            var urlString = document.location.href;
            varurlArray = urlString.split('/');
            var pageHREF = urlArray[urlArray.length - 1];

            if (pageHREF !== "") {
                var menu = document.querySelectorAll('ul#mainmenu li a');
                var i;
                //loop through all the menu items in the navigation
                for (i = 0; i < menu.length; i++) {
                    var currentURL = (menu[i].getAttribute("href"));
                    menu[i].parentNode.className = ""; //turn off highlighting by default
                    if (currentURL === pageHREF) {
                        menu[i] parentNode.className = "active";
                    } //end if
                } //end of the search for a match
            } //end of if !==
        </script>

    </footer>
    <script src="scripts/hamburger.js"></script>
    <script src="scripts/currentdate.js"></script>
    <script src="scripts/windchill.js"></script>
    <script src="scripts/wu_weather.js"></script>
</body>

</html>
